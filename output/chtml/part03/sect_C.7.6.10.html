<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>C.7.6.10 Mask Module</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.3.html" title="PS3.3" />
      <link rel="up" href="sect_C.7.6.html" title="C.7.6 Common Image IE Modules" />
      <link rel="prev" href="sect_C.7.6.9.html" title="C.7.6.9 Frame Pointers Module" />
      <link rel="next" href="sect_C.7.6.11.html" title="C.7.6.11 Display Shutter Module" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.3 2024c - Information Object Definitions</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">C.7.6.10 Mask Module <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.10.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_C.7.6.9.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">C.7.6 Common Image IE Modules</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_C.7.6.11.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.3.html" shape="rect">PS3.3</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_C.html" shape="rect">Information Module Definitions (Normative)</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_C.7.html" shape="rect">Common Composite IOD Modules</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_C.7.6.html" shape="rect">Common Image IE Modules</a>
         </span> &gt; <span class="breadcrumb-node">Mask Module</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h4 class="title">
                     <a id="sect_C.7.6.10" shape="rect"></a>C.7.6.10 Mask Module</h4>
               </div>
            </div>
         </div>
         <p>
            <a id="para_7e8e7ad2-be09-48d8-84bf-284e846a1e11" shape="rect"></a>
                        <a class="xref" href="sect_C.7.6.10.html#table_C.7-16" title="Table C.7-16. Mask Module Attributes" shape="rect">Table C.7-16</a> specifies the Attributes of the <a class="xref" href="sect_C.7.6.10.html" title="C.7.6.10 Mask Module" shape="rect">Mask Module</a>, which describe mask operations for a Multi-frame image.</p>
         <div class="table">
            <a id="table_C.7-16" shape="rect"></a>
            <p class="title">
               <strong>Table C.7-16. Mask Module Attributes</strong>
            </p>
            <div class="table-contents">
               <table frame="box" rules="all">
                  <thead>
                     <tr valign="top">
                        <th align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_1d8f6fd7-265f-43a4-976d-47be26794fab" shape="rect"></a>Attribute Name</p>
                                </th>
                        <th align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_3c590d1c-1a4e-4f51-8934-7c659fa0ff96" shape="rect"></a>Tag</p>
                                </th>
                        <th align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_ed3da9b0-7b45-4396-a48f-81d43909e0e3" shape="rect"></a>Type</p>
                                </th>
                        <th align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_f9efcd6c-034d-49a3-8e8a-e4c107d2fca3" shape="rect"></a>Attribute Description</p>
                                </th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_bed0e41d-87d6-4bc1-9526-214594de74db" shape="rect"></a>Mask Subtraction Sequence</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_fd29c438-5ae1-4944-9913-1fb854150b04" shape="rect"></a>(0028,6100)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_2968dd45-fbe5-44fa-9ba1-4303e4fcc3fc" shape="rect"></a>1</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_19fdb0d3-bbb7-48a4-baef-75b91bfc36dd" shape="rect"></a>Defines a Sequence that describes mask subtraction operations for a Multi-frame Image.</p>
                                    <p>
                              <a id="para_2c9eb4f6-56bb-43ae-b51c-2d895ab1f8e6" shape="rect"></a>One or more Items shall be included in this Sequence.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_fcd5b13f-d2b3-43e2-94cf-952f5dc96a24" shape="rect"></a>&gt;Mask Operation</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_0d5b47ba-2841-46b2-8f17-b42b5d1c8b7c" shape="rect"></a>(0028,6101)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_0eb8bfec-0392-4271-bced-e225a9903ef0" shape="rect"></a>1</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_f1d21096-fe5a-4663-98c3-46e3f169f574" shape="rect"></a>Defined Term identifying the type of mask operation to be performed. See <a class="xref" href="sect_C.7.6.10.html#sect_C.7.6.10.1" title="C.7.6.10.1 Mask Module Attribute Descriptions" shape="rect">Section C.7.6.10.1</a> for further explanation.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_d168dcb5-e3ab-4875-8139-51d86149f887" shape="rect"></a>&gt;Subtraction Item ID</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_f0948bcc-6998-425a-93a1-56a2ce793818" shape="rect"></a>(0028,9416)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_aa97d26e-d02e-4b0c-be43-341da860c42a" shape="rect"></a>1C</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_449a15ce-e067-48a5-acac-ae54b2fe5bd1" shape="rect"></a>Identification of the Subtraction Item used to associate a certain Mask Sub-Pixel Shift (0028,6114) in the Frame Pixel Shift Functional Group.</p>
                                    <p>
                              <a id="para_7ba49d0b-8a8e-464a-9f10-1233f1e293fc" shape="rect"></a>See <a class="xref" href="sect_C.7.6.16.2.html#sect_C.7.6.16.2.14.1" title="C.7.6.16.2.14.1 Subtraction Item ID Description" shape="rect">Section C.7.6.16.2.14.1</a>.</p>
                                    <p>
                              <a id="para_4c32dc48-fe80-40e5-bea3-f53088aab5b9" shape="rect"></a>Required if SOP Class UID (0008,0016) equals "1.2.840.10008.5.1.4.1.1.12.1.1" or "1.2.840.10008.5.1.4.1.1.12.2.1". May be present otherwise.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_691f8177-9c96-43f9-94d5-e2c9363cab04" shape="rect"></a>&gt;Applicable Frame Range</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_d2d9b304-de82-4f19-b0c9-8586977cb5fa" shape="rect"></a>(0028,6102)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_2be80288-abbb-4cbf-a9c8-58ba7afae732" shape="rect"></a>1C</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_716d09df-0dfa-4da8-890a-a5ce338bab1d" shape="rect"></a>Each pair of numbers in this multi-valued Attribute specify a beginning and ending frame number inclusive of a range where this particular mask operation is valid. Discontinuous ranges are represented by multiple pairs of numbers. Frames in a Multi-frame Image are specified by sequentially increasing number values beginning with 1. If this Attribute is missing in this particular Sequence Item, then the mask operation is applicable throughout the entire Multi-frame Image, subject to certain limits as described in <a class="xref" href="sect_C.7.6.10.html#sect_C.7.6.10.1.1" title="C.7.6.10.1.1 Mask Operation" shape="rect">Section C.7.6.10.1.1</a>.</p>
                                    <p>
                              <a id="para_7ef75ad3-54b2-4f41-af78-a86c3698d750" shape="rect"></a>Required if Mask Operation (0028,6101) equals REV_TID. May be present otherwise.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_17d2911a-0423-46a6-ad8c-775af620b6bd" shape="rect"></a>&gt;Mask Frame Numbers</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_c164b6c8-f470-43de-85e7-bf9d33a980bd" shape="rect"></a>(0028,6110)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_b06db3f8-aeca-4d3d-94cf-ca8f4d02f281" shape="rect"></a>1C</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_0c6aecb0-7e29-4d6b-9922-959ea057f41a" shape="rect"></a>Specifies the frame numbers of the pixel data used to generate this mask. Frames in a Multi-frame Image are specified by sequentially increasing number values beginning with 1. Required if Mask Operation (0028,6101) is AVG_SUB.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_6c309833-8e07-4592-b5fd-014b8aebff3a" shape="rect"></a>&gt;Contrast Frame Averaging</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_a89d1331-df6d-4d1a-9444-8bba26abb8f0" shape="rect"></a>(0028,6112)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_7eb25a08-d70f-44fa-964d-75824aed64e8" shape="rect"></a>3</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_645332ec-74b0-4512-af8a-4ae8763ba9eb" shape="rect"></a>Specifies the number of contrast frames to average together before performing the mask operation. If the Attribute is missing, no averaging is performed.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_6ada096f-f6e0-4636-9a29-670d089f19e7" shape="rect"></a>&gt;Mask Sub-pixel Shift</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_a0a4b2e3-1d3a-4e3f-90ea-280c2b43f68a" shape="rect"></a>(0028,6114)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_e3c2328c-c9a8-4683-87f5-fe263160fa57" shape="rect"></a>3</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_573ff6f0-9be6-4998-8cfd-b8a4cda78ed2" shape="rect"></a>A pair of floating point numbers specifying the fractional vertical [adjacent row spacing] and horizontal [adjacent column spacing] pixel shift applied to the mask before subtracting it from the contrast frame. See <a class="xref" href="sect_C.7.6.10.html#sect_C.7.6.10.1.2" title="C.7.6.10.1.2 Mask Sub-pixel Shift" shape="rect">Section C.7.6.10.1.2</a>.</p>
                                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                              <h3 class="title">Note</h3>
                              <p>
                                 <a id="para_ba00d9b2-ccac-4347-a36b-df304811ee58" shape="rect"></a>When the Frame Pixel Shift Functional Group is present the values of the Mask Pixel Shift Attribute of that Functional Group prevails over the values specified in this Module.</p>
                           </div>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_f2cb28e3-94df-40dd-a27b-d3bf913c475c" shape="rect"></a>&gt;TID Offset</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_d43d50cf-0d9d-4c52-afed-9f1571f3529d" shape="rect"></a>(0028,6120)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_f44ea790-332f-4afb-ae53-a7adb7a3b04e" shape="rect"></a>2C</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_02f4ba2c-a9e9-435a-b993-4d7817723c22" shape="rect"></a>If Mask Operation is TID, specifies the offset to be subtracted from the current frame number in order to locate the mask frame in TID mode.</p>
                                    <p>
                              <a id="para_506a719d-66b4-43ee-bda0-de79e141283d" shape="rect"></a>If Mask Operation is REV_TID, specifies the initial offset to be subtracted from the first contrast frame number. See <a class="xref" href="sect_C.7.6.10.html#sect_C.7.6.10.1.1" title="C.7.6.10.1.1 Mask Operation" shape="rect">Section C.7.6.10.1.1</a>.</p>
                                    <p>
                              <a id="para_78f2f62b-e65e-4fb6-bc43-34947c1fcc02" shape="rect"></a>If zero length, TID Offset defaults to 1. Required if Mask Operation (0028,6101) is TID or REV_TID.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_099cdb14-a080-4812-a36f-5938316ad4b2" shape="rect"></a>&gt;Mask Operation Explanation</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_909d6d8e-8a07-4ad5-8ff5-7b0d3f151e98" shape="rect"></a>(0028,6190)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_8bf32136-d098-4f47-ba3e-c40d746e83ed" shape="rect"></a>3</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_65fa1956-8da7-4811-a2d3-c35e87aa769a" shape="rect"></a>Free form explanation of this particular mask operation.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_c8d1af5f-3dc5-478d-8e6f-4051204510e6" shape="rect"></a>&gt;Mask Selection Mode</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_57c248d0-ef9e-47bb-9d62-8767a4b03a20" shape="rect"></a>(0028,9454)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_fc5a4df5-ef81-4747-a561-69194639eef8" shape="rect"></a>3</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_011c9e3e-cb4c-4e09-ba18-0a10e158d7e3" shape="rect"></a>Specifies the method of selection of the mask operations of this Item.</p>
                                    <div class="variablelist">
                              <p class="title">
                                 <strong>Enumerated Values:</strong>
                              </p>
                              <dl class="variablelist compact">
                                 <dt>
                                    <span class="term">SYSTEM</span>
                                 </dt>
                                 <dd>
                                    <p>
                                       <a id="para_17df90b5-fe5e-4dc6-ab4c-9ee2f6ae4ba7" shape="rect"></a>
                                    </p>
                                 </dd>
                                 <dt>
                                    <span class="term">USER</span>
                                 </dt>
                                 <dd>
                                    <p>
                                       <a id="para_a80a6363-50ca-4357-93d0-53997550166e" shape="rect"></a>
                                    </p>
                                 </dd>
                              </dl>
                           </div>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_6cd0c5e3-574b-4018-8ea6-f26e63c5267f" shape="rect"></a>Recommended Viewing Mode</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_6bcd2b0c-b932-4106-8471-bd6a7911c920" shape="rect"></a>(0028,1090)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_f1ea6f59-a2ba-4705-9a0a-b96d030ee14a" shape="rect"></a>2</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_d3ff87f6-d246-48d9-a21f-225804136891" shape="rect"></a>Specifies the recommended viewing protocol(s).</p>
                                    <div class="variablelist">
                              <p class="title">
                                 <strong>Defined Terms:</strong>
                              </p>
                              <dl class="variablelist compact">
                                 <dt>
                                    <span class="term">SUB</span>
                                 </dt>
                                 <dd>
                                    <p>
                                       <a id="para_e5b2a557-8c79-443c-9260-4d1f53426e40" shape="rect"></a>For subtraction with mask images.</p>
                                 </dd>
                                 <dt>
                                    <span class="term">NAT</span>
                                 </dt>
                                 <dd>
                                    <p>
                                       <a id="para_0bb94af6-8f9d-4ed4-981e-6b53080e11c1" shape="rect"></a>Native viewing of image as encoded.</p>
                                 </dd>
                              </dl>
                           </div>
                                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                              <h3 class="title">Note</h3>
                              <p>
                                 <a id="para_9f1cf042-4cd2-4cab-8d21-b07b36cf64cd" shape="rect"></a>If an implementation does not recognize the Defined Term for Recommended Viewing Mode (0028,1090), reverting to native display mode is recommended.</p>
                           </div>
                                </td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
         <br class="table-break" clear="none" />
         <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Note</h3>
            <p>
               <a id="para_70a723d1-c9b7-433f-b149-5025857a1b5f" shape="rect"></a>Frame numbers begin at 1.</p>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h5 class="title">
                        <a id="sect_C.7.6.10.1" shape="rect"></a>C.7.6.10.1 Mask Module Attribute Descriptions</h5>
                  </div>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h6 class="title">
                           <a id="sect_C.7.6.10.1.1" shape="rect"></a>C.7.6.10.1.1 Mask Operation</h6>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_52628436-5521-460a-866f-70bd3232d9d0" shape="rect"></a>Mask Operation (0028,6101) specifies a type of mask operation to be performed.</p>
               <div class="variablelist">
                  <p class="title">
                     <strong>Defined Terms:</strong>
                  </p>
                  <dl class="variablelist compact">
                     <dt>
                        <span class="term">
                                        <span class="bold">
                              <strong>NONE</strong>
                           </span>
                                    </span>
                     </dt>
                     <dd>
                        <p>
                           <a id="para_ac54ca21-da4b-4688-9317-4ad9f7962b91" shape="rect"></a>(No Subtraction) No mask subtraction operation is specified;</p>
                     </dd>
                     <dt>
                        <span class="term">
                                        <span class="bold">
                              <strong>AVG_SUB</strong>
                           </span>
                                    </span>
                     </dt>
                     <dd>
                        <p>
                           <a id="para_8113f820-a2b7-4021-8b63-3ae5ac46478f" shape="rect"></a>(Average Subtraction) The frames specified by the Mask Frame Numbers (0028,6110) are averaged together, shifted by the amount specified in the Mask Sub-pixel Shift (0028,6114), then subtracted from the contrast frames in the range specified in the Applicable Frame Range (0028,6102). Contrast Frame Averaging (0028,6112) number of frames starting with the current frame are averaged together before the subtraction. If the Applicable Frame Range is not present in this Sequence Item, the Applicable Frame Range is assumed to end at the last frame number of the image minus Contrast Frame Averaging (0028,6112) plus one;</p>
                     </dd>
                     <dt>
                        <span class="term">
                                        <span class="bold">
                              <strong>TID</strong>
                           </span>
                                    </span>
                     </dt>
                     <dd>
                        <p>
                           <a id="para_2d7619b8-658c-4321-9ae0-594733036cbe" shape="rect"></a>(Time Interval Differencing) The mask for each frame within the Applicable Frame Range (0028,6102) is selected by subtracting TID Offset (0028,6120) from the respective frame number. If the Applicable Frame Range is not present in this Sequence Item, the Applicable Frame Range is assumed to be a range where TID offset subtracted from any frame number with the range results in a valid frame number within the Multi-frame image.</p>
                        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                           <h3 class="title">Note</h3>
                           <p>
                              <a id="para_8b8fabf8-74c8-4968-a1d7-dfb29a4fff86" shape="rect"></a>A positive value for TID Offset (0028,6120) means that the mask frame numbers are lower than the subtracted frame numbers. A negative TID Offset means that the mask frame numbers are higher than the subtracted frame numbers.</p>
                        </div>
                     </dd>
                     <dt>
                        <span class="term">
                                        <span class="bold">
                              <strong>REV_TID</strong>
                           </span>
                                    </span>
                     </dt>
                     <dd>
                        <p>
                           <a id="para_fc1bb1ae-307a-4d64-ae4f-a9a2b5236fee" shape="rect"></a>(Reversed Time Interval Differencing) The number of the mask frame for each contrast frame within the Applicable Frame Range (0028,6102) is calculated by subtracting TID Offset (0028,6120) from the first frame within the Applicable Frame Range, TID Offset (0028,6120) +2 from the second frame within the Applicable Frame Range, TID Offset (0028,6120) +4 from the third frame and so on. The Applicable Frame Range (0028,6102) shall be present.</p>
                        <p>
                           <a id="para_36994876-f165-4e07-8f0a-a753047eb744" shape="rect"></a>When multiple pairs of frame numbers are specified in the Applicable Frame Range Attribute, the beginning frame numbers (i.e., the first frame number in each pair) shall be in increasing order.</p>
                        <p>
                           <a id="para_942d855f-28f7-4d38-aa85-fe6a4420c6ac" shape="rect"></a>Algorithm to calculate the Mask Frame Number:</p>
                        <p>
                           <a id="para_4c071e3c-3387-4bf4-ae72-ece6ad1f4850" shape="rect"></a>MFN = (FCFN - TID Offset) - (CFN - FCFN)</p>
                        <p>
                           <a id="para_43b204f1-8b43-4d82-ab63-10d401a4c1da" shape="rect"></a>Where:</p>
                        <p>
                           <a id="para_9412ef9a-4fde-4bf1-8220-422499c0eaa7" shape="rect"></a>MFN = Mask Frame Number</p>
                        <p>
                           <a id="para_32ce19de-06b7-42b1-8066-46ee5f84cc37" shape="rect"></a>CFN = Contrast Frame Number</p>
                        <p>
                           <a id="para_22e5b9d7-e7f1-42fe-8644-825e0516baa9" shape="rect"></a>FCFN = First Contrast Frame Number, the first frame number of the first pair in the Applicable Frame Range</p>
                        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                           <h3 class="title">Note</h3>
                           <p>
                              <a id="para_0cada9d2-7315-446b-87ac-56575370181f" shape="rect"></a>A positive value for TID Offset (0028,6120) means that the mask frame numbers are lower than the subtracted frame numbers. A negative TID Offset means that the mask frame numbers are higher than the subtracted frame numbers.</p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Note</h3>
                  <p>
                     <a id="para_266adf1a-ce9c-4efb-b01a-40e07951f214" shape="rect"></a>Example of TID Offset, see <a class="xref" href="sect_C.7.6.10.html#figure_C.7.6.10-1" title="Figure C.7.6.10-1. Example of TID Offset" shape="rect">Figure C.7.6.10-1</a>:</p>
                  <p>
                     <a id="para_42c46ad6-f1d4-4f10-a6cf-7ba6e8d26c69" shape="rect"></a>
                                    </p>
                  <div class="figure">
                     <a id="figure_C.7.6.10-1" shape="rect"></a>
                     <div class="figure-contents">
                        <div class="mediaobject">
                           <img src="figures/PS3.3_C.7.6.10-1.svg" alt="Example of TID Offset" />
                        </div>
                     </div>
                     <p class="title">
                        <strong>Figure C.7.6.10-1. Example of TID Offset</strong>
                     </p>
                  </div>
                  <p>
                     <br class="figure-break" clear="none" />
                                </p>
                  <p>
                     <a id="para_49af80ae-7223-4687-9861-0b2ba25d9c93" shape="rect"></a>Number of Frames: 32</p>
                  <p>
                     <a id="para_cf468854-caae-4190-bf46-6c4ffd99a422" shape="rect"></a>Applicable Frame Range: 20 to 30</p>
                  <p>
                     <a id="para_4f11342f-c69d-46c9-a2a3-9b9e36d5aeee" shape="rect"></a>TID Offset: 5</p>
                  <p>
                     <a id="para_9eeaa8b2-808f-46a7-a5ec-208706cd8fb9" shape="rect"></a>For Calculating the TID Offset for Mask Operation REV_TID see <a class="xref" href="sect_C.7.6.10.html#table_C.7.6.10-1" title="Table C.7.6.10-1. Example Mask Frame Numbers for Mask Operation REV_TID" shape="rect">Table C.7.6.10-1</a>.</p>
                  <div class="table">
                     <a id="table_C.7.6.10-1" shape="rect"></a>
                     <p class="title">
                        <strong>Table C.7.6.10-1. Example Mask Frame Numbers for Mask Operation REV_TID</strong>
                     </p>
                     <div class="table-contents">
                        <table frame="box" rules="all">
                           <thead>
                              <tr valign="top">
                                 <th align="center" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_ef7718a7-4cbd-43e2-989f-3faef65bcb1a" shape="rect"></a>Contrast Frame Number (CFN) (Absolute value)</p>
                                            </th>
                                 <th align="center" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_3b64fef6-f4d6-4f8a-b1f9-895dcb84852e" shape="rect"></a>Mask Frame Number (MFN) (Absolute value)</p>
                                            </th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_aa8f5544-bc5a-40ac-9baa-8817b5eebd92" shape="rect"></a>20</p>
                                            </td>
                                 <td align="left" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_7a5d4ca0-e11a-42b0-8e69-9857012e3a1f" shape="rect"></a>15</p>
                                            </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_15330e55-b38f-4b90-9762-0bed514f5ac0" shape="rect"></a>21</p>
                                            </td>
                                 <td align="left" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_fda9c913-6362-4915-80bc-afdb251ffd60" shape="rect"></a>14</p>
                                            </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_81816281-3419-4b03-bc38-3929c4340219" shape="rect"></a>22</p>
                                            </td>
                                 <td align="left" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_e8d40ff7-ff24-4d2a-85f1-374335f40390" shape="rect"></a>13</p>
                                            </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_c52d8e37-6497-4fd4-8018-d9a758157de6" shape="rect"></a>…</p>
                                            </td>
                                 <td align="left" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_99b6dada-b256-4f57-a21f-8496c2cb2c98" shape="rect"></a>…</p>
                                            </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_94548a37-dbe1-402e-8873-8a29ee8d47ad" shape="rect"></a>28</p>
                                            </td>
                                 <td align="left" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_48d2318a-80f2-4462-b272-b5a66d6c905b" shape="rect"></a>7</p>
                                            </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_48a28f4b-ef94-47b8-8704-3eac33d5f3d3" shape="rect"></a>29</p>
                                            </td>
                                 <td align="left" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_b8772ece-887c-452e-8f18-ac97cdd14262" shape="rect"></a>6</p>
                                            </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_51665780-9df8-4f9a-b3c3-9e28ca7d93e3" shape="rect"></a>30</p>
                                            </td>
                                 <td align="left" rowspan="1" colspan="1">
                                                <p>
                                       <a id="para_2240b4f1-fb52-4033-b755-a2bca508c3ad" shape="rect"></a>5</p>
                                            </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </div>
                  <br class="table-break" clear="none" />
                  <p>
                     <a id="para_1412a18f-692e-45ef-bc13-f5ba9cd0010c" shape="rect"></a>In this example the acquisition of the mask frames starts with frame 5 and ends with frame 15. The acquisition of the contrast frames starts with frame 20 and ends with frame 30 (Applicable Frame Range). The number 5 for TID Offset indicates a gap between "end of mask frames" and "begin of contrast frames" of 4 frames, e.g., injection phase and/or time needed to drive C-arm in reverse. Additionally, in this example, the first 4 frames and the last two frames are not used for this Reversed Time Interval Differencing loop.</p>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h6 class="title">
                           <a id="sect_C.7.6.10.1.2" shape="rect"></a>C.7.6.10.1.2 Mask Sub-pixel Shift</h6>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_0de54813-988b-445d-ac19-b1b601c0b15f" shape="rect"></a>A pair of floating point numbers specifying the fractional vertical [adjacent row spacing] and horizontal [adjacent column spacing] pixel shift applied to the mask before subtracting it from the contrast frame. The row offset results in a shift of the pixels along the column axis. The column offset results in a shift of the pixels along the row axis. A positive row offset is a shift toward the pixels of the lower row of the pixel plane. A positive column offset is a shift toward the pixels of the left hand side column of the pixel plane.</p>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_C.7.6.9.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="sect_C.7.6.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_C.7.6.11.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">C.7.6.9 Frame Pointers Module </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.3.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> C.7.6.11 Display Shutter Module</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.3 2024c - Information Object Definitions</span>
            </th>
         </tr>
      </table>
   </body>
</html>
