<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>C.20.2 Spatial Registration Module</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.3.html" title="PS3.3" />
      <link rel="up" href="sect_C.20.html" title="C.20 Spatial Registration" />
      <link rel="prev" href="sect_C.20.html" title="C.20 Spatial Registration" />
      <link rel="next" href="sect_C.20.3.html" title="C.20.3 Deformable Spatial Registration Module" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.3 2024b - Information Object Definitions</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">C.20.2 Spatial Registration Module <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.20.2.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_C.20.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">C.20 Spatial Registration</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_C.20.3.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.3.html" shape="rect">PS3.3</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_C.html" shape="rect">Information Module Definitions (Normative)</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_C.20.html" shape="rect">Spatial Registration</a>
         </span> &gt; <span class="breadcrumb-node">Spatial Registration Module</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h3 class="title">
                     <a id="sect_C.20.2" shape="rect"></a>C.20.2 Spatial Registration Module</h3>
               </div>
            </div>
         </div>
         <p>
            <a id="para_0a9e3cd5-ccab-4694-ab5b-0eb9fc2da6f2" shape="rect"></a>
                    <a class="xref" href="sect_C.20.2.html#table_C.20.2-1" title="Table C.20.2-1. Spatial Registration Module Attributes" shape="rect">Table C.20.2-1</a> specifies the Attributes of the <a class="xref" href="sect_C.20.2.html" title="C.20.2 Spatial Registration Module" shape="rect">Spatial Registration Module</a>.</p>
         <div class="table">
            <a id="table_C.20.2-1" shape="rect"></a>
            <p class="title">
               <strong>Table C.20.2-1. Spatial Registration Module Attributes</strong>
            </p>
            <div class="table-contents">
               <table frame="box" rules="all">
                  <thead>
                     <tr valign="top">
                        <th align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_ee5ccb4d-b06b-42d4-8bb5-99ab73a8cbe3" shape="rect"></a>Attribute Name</p>
                            </th>
                        <th align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_0a7931bc-8b76-4a0e-9bf4-6197471eb21e" shape="rect"></a>Tag</p>
                            </th>
                        <th align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_8acd41b7-a870-4627-af29-6839c0dbe8cd" shape="rect"></a>Type</p>
                            </th>
                        <th align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_8bee35ad-5f5c-41ed-8e75-1743b7a12db0" shape="rect"></a>Attribute Description</p>
                            </th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_e370f4c5-aaa9-4946-9441-9222048f273b" shape="rect"></a>Content Date</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_0eb6f8ee-7e9e-4300-8d3c-d1df8e176553" shape="rect"></a>(0008,0023)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_dfc87cd3-882d-4b45-9e32-50c4b4eb8fc5" shape="rect"></a>1</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_2eb43f18-8678-453b-9c8a-119ea568529a" shape="rect"></a>The date the content creation started.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_6fb99645-91ee-4cee-bbe3-4c00b3e96649" shape="rect"></a>Content Time</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_7ac87cbd-81a3-47fd-860d-03fb8234db97" shape="rect"></a>(0008,0033)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_44c807d3-f0ae-431b-939e-1872b3b57ba9" shape="rect"></a>1</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_429204e3-1094-4171-9f68-198f7ff66c7d" shape="rect"></a>The time the content creation started.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" colspan="4" rowspan="1">
                                <p>
                              <a id="para_c4a5775b-acab-40af-bf6d-cb2629dad8e6" shape="rect"></a>
                                    <span class="italic">Include <a class="xref" href="sect_10.9.html#table_10-12" title="Table 10-12. Content Identification Macro Attributes" shape="rect">Table 10-12 “Content Identification Macro Attributes”</a>
                                    </span>
                                </p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_796ef812-0451-44ab-a678-5a709dca099d" shape="rect"></a>Registration Sequence</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_3fc547cd-d94a-4e6e-97ac-e5bd8afc33e0" shape="rect"></a>(0070,0308)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_4d406930-c64a-481d-84bb-89660ceaf8ff" shape="rect"></a>1</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_382b22db-95be-4d7c-b2cd-fab5553b3439" shape="rect"></a>A Sequence of registration Items. Each Item defines a spatial registration of the images referenced in that Item to the Registered RCS established by this SOP Instance. All referenced images are in the same spatial Frame of Reference or atlas.</p>
                                <p>
                              <a id="para_8243dbe6-2ac6-4d3b-9da0-6adc5a799a51" shape="rect"></a>One or more Items shall be included in this Sequence.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_fa3c79bd-96f1-4cf6-ab80-1c5a702b7883" shape="rect"></a>&gt;Frame of Reference UID</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_496b9f96-268d-4976-8d94-f04faba51603" shape="rect"></a>(0020,0052)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_076a859a-de61-4bb5-b26b-fa4273c32fc1" shape="rect"></a>1C</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_03f403d3-166c-449a-b40f-f67bb3e78d82" shape="rect"></a>Identifies the Frame of Reference of the referenced data, that may or may not be an image set (e.g., atlas or physical space). See <a class="xref" href="sect_C.7.4.html#sect_C.7.4.1.1.1" title="C.7.4.1.1.1 Frame of Reference UID" shape="rect">Section C.7.4.1.1.1</a> for further explanation.</p>
                                <p>
                              <a id="para_ef1e8752-510f-4bd2-9e29-2800619d7142" shape="rect"></a>Required if Referenced Image Sequence (0008,1140) is absent. May be present otherwise.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_4ae88be8-379d-48fa-9534-31afe290a7c8" shape="rect"></a>&gt;Referenced Image Sequence</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_11f60617-d0c4-4f24-8b51-02800d4ee500" shape="rect"></a>(0008,1140)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_4fdf232a-6065-4120-9784-f393113a04b1" shape="rect"></a>1C</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_ae768c06-8f64-4469-813b-47f94a511d5d" shape="rect"></a>Identifies the set of images of the referenced data, registered in this Item.</p>
                                <p>
                              <a id="para_2226c05e-5257-42d9-85ea-f9a1f504e820" shape="rect"></a>One or more Items shall be included in this Sequence.</p>
                                <p>
                              <a id="para_1ae13d3d-29f7-4bd3-88b1-6deba58b0675" shape="rect"></a>Required if Frame of Reference UID (0020,0052) is absent. May be present otherwise.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" colspan="4" rowspan="1">
                                <p>
                              <a id="para_11b13012-4012-4b10-bb42-9dbd6c2da93e" shape="rect"></a>
                                    <span class="italic">&gt;&gt;Include <a class="xref" href="sect_10.3.html#table_10-3" title="Table 10-3. Image SOP Instance Reference Macro Attributes" shape="rect">Table 10-3 “Image SOP Instance Reference Macro Attributes”</a>
                                    </span>
                                </p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_461d6c34-667f-48a9-8e1c-99fc14d51b79" shape="rect"></a>&gt;Matrix Registration Sequence</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_efc8e2c4-c504-454b-a2b3-b46753ad8bcb" shape="rect"></a>(0070,0309)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_371219df-06cb-4ecd-8dcc-76c42e7fb2c9" shape="rect"></a>1</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_979c96b3-3510-4d7f-8cf3-7ff34afa94c3" shape="rect"></a>A Sequence that specifies one spatial registration.</p>
                                <p>
                              <a id="para_8a33b1a8-10c8-4932-8fb3-cab51cdfa4df" shape="rect"></a>Only a single Item shall be included in this Sequence.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_95cd6e62-85ca-4864-8457-5d293999b6da" shape="rect"></a>&gt;&gt;Frame of Reference Transformation Comment</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_39299c5e-04e9-460a-bd2e-9b09b6a2ffab" shape="rect"></a>(3006,00C8)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_f92845d1-e2be-4c83-80e9-87b24de72aba" shape="rect"></a>3</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_fadae216-4437-40bd-8d0f-cb07a5a1849d" shape="rect"></a>User description or comments about the registration.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_1463c2f9-6c7c-4d79-9939-5c5ebff545b6" shape="rect"></a>&gt;&gt;Registration Type Code Sequence</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_8ba279f8-d5c1-456a-8298-200f9d97bb18" shape="rect"></a>(0070,030D)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_6a208a26-0d40-486d-96d3-b888aa794bdc" shape="rect"></a>2</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_2b25b2d3-1112-4905-b2ce-df6f5ea984f7" shape="rect"></a>Describes the information input into the registration process.</p>
                                <p>
                              <a id="para_b0e523b4-a253-459d-af31-a960ae1314ed" shape="rect"></a>Zero or one Item shall be included in this Sequence.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" colspan="3" rowspan="1">
                                <p>
                              <a id="para_996be8be-d6ca-40d5-9015-185bcbfc51da" shape="rect"></a>
                                    <span class="italic">&gt;&gt;&gt;Include <a class="xref" href="sect_8.8.html#table_8.8-1" title="Table 8.8-1. Code Sequence Macro Attributes" shape="rect">Table 8.8-1 “Code Sequence Macro Attributes”</a>
                                    </span>
                                </p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_f949b883-ff3e-4e1b-a6f1-34c69abfa4d0" shape="rect"></a>
                                    <span class="italic">B<a href="../part16/sect_CID_7100.html" class="olink" shape="rect">CID 7100 “RCS Registration Method Type”</a>.</span>
                                </p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_35d496f7-01ee-47f7-b481-33bc4103c0d6" shape="rect"></a>&gt;&gt;Matrix Sequence</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_1bf799eb-8520-493f-944f-63b9817d1902" shape="rect"></a>(0070,030A)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_66f88a04-63eb-4d3a-9637-a039e74cc656" shape="rect"></a>1</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_9c93f4c8-10b3-44c0-872e-8250e79b1dd0" shape="rect"></a>Specifies one transformation, that registers the Source RCS/images to the Registered RCS. It is expressible as multiple matrices, each in a separate Item of the Sequence.</p>
                                <p>
                              <a id="para_b3d044be-b347-49f0-9fe1-ae87668f8a92" shape="rect"></a>One or more Items shall be included in this Sequence.</p>
                                <p>
                              <a id="para_85603fe2-74a0-48e8-83fb-018d9169b258" shape="rect"></a>The Item order is significant and corresponds to matrix multiplication order. See <a class="xref" href="sect_C.20.2.html#sect_C.20.2.1.1" title="C.20.2.1.1 Frame of Reference Transformation Matrix" shape="rect">Section C.20.2.1.1</a>.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_35dec599-15a9-425e-986c-604100f13920" shape="rect"></a>&gt;&gt;&gt;Frame of Reference Transformation Matrix</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_fb653a9b-cc55-40ff-8e15-a000e1a127e2" shape="rect"></a>(3006,00C6)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_ee4fed12-5d28-4cf6-aa47-c13940b936ed" shape="rect"></a>1</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_260b3ca4-1f49-499e-b2ab-ed0794a472f3" shape="rect"></a>A 4x4 affine transformation matrix that registers a homogeneous coordinate system A to B. Matrix elements shall be listed in row-major order. See <a class="xref" href="sect_C.20.2.html#sect_C.20.2.1.1" title="C.20.2.1.1 Frame of Reference Transformation Matrix" shape="rect">Section C.20.2.1.1</a>.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_2ba81635-067b-4ccb-b0bf-7c143d689734" shape="rect"></a>&gt;&gt;&gt;Frame of Reference Transformation Matrix Type</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_ad2cda6d-d9aa-43af-b9db-2ae88eab96c0" shape="rect"></a>(0070,030C)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_cda5ec13-59c5-445a-a09c-f4549f5a1948" shape="rect"></a>1</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_f02b0b1b-6460-495c-8a9d-64140ab0733d" shape="rect"></a>Type of Frame of Reference Transformation Matrix (3006,00C6).</p>
                                <div class="variablelist">
                              <p class="title">
                                 <strong>Enumerated Values:</strong>
                              </p>
                              <dl class="variablelist compact">
                                 <dt>
                                    <span class="term">RIGID</span>
                                 </dt>
                                 <dd>
                                    <p>
                                       <a id="para_badbb475-63f1-4e84-910e-4a2113c2c1ec" shape="rect"></a>
                                    </p>
                                 </dd>
                                 <dt>
                                    <span class="term">RIGID_SCALE</span>
                                 </dt>
                                 <dd>
                                    <p>
                                       <a id="para_6d7d3275-1359-4a97-b742-c96bf1a6cecb" shape="rect"></a>
                                    </p>
                                 </dd>
                                 <dt>
                                    <span class="term">AFFINE</span>
                                 </dt>
                                 <dd>
                                    <p>
                                       <a id="para_b4e2f41a-82cc-43c3-b051-fbca7924f7fb" shape="rect"></a>
                                    </p>
                                 </dd>
                              </dl>
                           </div>
                                <p>
                              <a id="para_2c95b960-0a0a-4c5e-b6ee-c053e2254e9b" shape="rect"></a>See <a class="xref" href="sect_C.20.2.html#sect_C.20.2.1.2" title="C.20.2.1.2 Frame of Reference Transformation Matrix Type" shape="rect">Section C.20.2.1.2</a>
                                </p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_9f392d51-9d13-4bfb-801a-ee5e3ee56f9c" shape="rect"></a>&gt;Used Fiducials Sequence</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_dc93fc29-c94e-4bd7-9a1b-021e1afddd36" shape="rect"></a>(0070,0314)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_0eb4cde4-fe54-4334-8173-ff7563ae40a3" shape="rect"></a>3</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_d51df218-1659-4e38-be37-de2b44e5fd0f" shape="rect"></a>The fiducials used to determine the Frame of Reference Transformation Matrix.</p>
                                <p>
                              <a id="para_1c2f4b6b-c5b8-421f-93a6-ed03767ccc05" shape="rect"></a>One or more Items are permitted in this Sequence.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" colspan="3" rowspan="1">
                                <p>
                              <a id="para_46fa1f2f-66a1-441f-85ba-5cc58c49e184" shape="rect"></a>
                                    <span class="italic">&gt;&gt;Include <a class="xref" href="sect_10.8.html#table_10-11" title="Table 10-11. SOP Instance Reference Macro Attributes" shape="rect">Table 10-11 “SOP Instance Reference Macro Attributes”</a>
                                    </span>
                                </p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_d705f12c-25dc-4810-a137-f18cd0c68092" shape="rect"></a>
                              <span class="italic">Reference to the Spatial Fiducial SOP Instance identifying the used Fiducial(s).</span>
                           </p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_a5e47293-6199-4658-945f-1cbde82151df" shape="rect"></a>&gt;&gt;Fiducial UID</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_46fcce28-f26f-436b-81a3-addab69fa5fd" shape="rect"></a>(0070,031A)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_8917cae2-61b5-47ec-b4ba-09e71767118c" shape="rect"></a>1</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_a711b60c-eaef-46a2-9c17-91a692386536" shape="rect"></a>The UID that identifies the fiducial used as registration input.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_391907ce-86e5-464c-8e17-2a01275fe70b" shape="rect"></a>&gt;Used Segments Sequence</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_a680851d-3837-4c56-832d-b8f783ba19f5" shape="rect"></a>(0062,0012)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_ba641652-2b77-464b-9ca4-bceba15561f5" shape="rect"></a>3</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_66fa429f-40bd-4be9-b1b8-5c2208dc4f9a" shape="rect"></a>The segments used to determine the Frame of Reference Transformation Matrix.</p>
                                <p>
                              <a id="para_ce3d96d6-efcc-4d3e-90be-12daaa4e286b" shape="rect"></a>One or more Items are permitted in this Sequence.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" colspan="3" rowspan="1">
                                <p>
                              <a id="para_273881ad-6aa4-4ed9-9191-8a9bf96e2703" shape="rect"></a>
                                    <span class="italic">&gt;&gt;Include <a class="xref" href="sect_10.8.html#table_10-11" title="Table 10-11. SOP Instance Reference Macro Attributes" shape="rect">Table 10-11 “SOP Instance Reference Macro Attributes”</a>
                                    </span>
                                </p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_6f80ca84-81cd-4cfc-8d89-b63928317dad" shape="rect"></a>
                              <span class="italic">Reference to the Segmentation or Surface Segmentation SOP Instance identifying the used Segments.</span>
                           </p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_4c457339-8b30-43f2-8814-56a472a7cbe3" shape="rect"></a>&gt;&gt;Referenced Segment Number</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_5edf0d65-2471-47d1-8e39-6361cb9c53cb" shape="rect"></a>(0062,000B)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_57b723db-0d35-43b1-a4b1-7dd25ecb1319" shape="rect"></a>1</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_ce27d5ca-facd-4d92-933b-839562dc2455" shape="rect"></a>Uniquely identifies the segment described in Segment Sequence (0062,0002) by reference to Segment Number (0062,0004). Referenced Segment Number (0062,000B) shall not be multi-valued.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_edbc9e1c-cf7a-451a-b301-b6540104cd69" shape="rect"></a>&gt;Used RT Structure Set ROI Sequence Sequence</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_837e35ba-0ef2-4a26-9a3e-131c20345086" shape="rect"></a>(0070,0315)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_68de5232-e418-4d11-b62d-57f2513e0eb5" shape="rect"></a>3</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_bcd97ed9-36f5-44f7-8e71-17fe39f01ad4" shape="rect"></a>The ROIs defined in an RT Structure Set Instance used to determine the Frame of Reference Transformation Matrix.</p>
                                <p>
                              <a id="para_bcff30cc-36cb-46a4-b068-470fc9a5c780" shape="rect"></a>One or more Items are permitted in this Sequence.</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" colspan="3" rowspan="1">
                                <p>
                              <a id="para_ae4d0e6b-053c-423e-b779-2ed2be87d102" shape="rect"></a>
                                    <span class="italic">&gt;&gt;Include <a class="xref" href="sect_10.8.html#table_10-11" title="Table 10-11. SOP Instance Reference Macro Attributes" shape="rect">Table 10-11 “SOP Instance Reference Macro Attributes”</a>
                                    </span>
                                </p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_81e69338-046f-4090-836d-dfea39d5679c" shape="rect"></a>
                              <span class="italic">Reference to the RT Structure Set SOP Instance identifying the used ROIs.</span>
                           </p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_bfc2e287-5d44-4314-984b-c356bad5d2d7" shape="rect"></a>&gt;&gt;Referenced ROI Number</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_f5a2bde2-b5a9-4c9c-a56c-e9ef816bc090" shape="rect"></a>(3006,0084)</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_2cc3dcfa-59b3-431b-8342-a5d91cafe6aa" shape="rect"></a>1</p>
                            </td>
                        <td align="left" rowspan="1" colspan="1">
                                <p>
                              <a id="para_5c58419e-56af-4672-b4c2-2b4e1417d3fc" shape="rect"></a>Uniquely identifies the ROI described in the Structure Set ROI Sequence (3006,0020) by reference to ROI Number (3006,0022).</p>
                            </td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
         <br class="table-break" clear="none" />
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title">
                        <a id="sect_C.20.2.1" shape="rect"></a>C.20.2.1 Spatial Registration Module Attribute Descriptions</h4>
                  </div>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h5 class="title">
                           <a id="sect_C.20.2.1.1" shape="rect"></a>C.20.2.1.1 Frame of Reference Transformation Matrix</h5>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_51200bbb-6637-4032-b03c-fa5ef343954e" shape="rect"></a>The Frame of Reference Transformation Matrix (3006,00C6) <sup>A</sup>M<sub>B</sub> describes how to transform a point (<sup>B</sup>x,<sup>B</sup>y,<sup>B</sup>z) with respect to RCS<sub>B</sub> into (<sup>A</sup>x,<sup>A</sup>y,<sup>A</sup>z) with respect to RCS<sub>A</sub> according to <a class="xref" href="sect_C.20.2.html#equation_C.20.2-1" title="Equation C.20.2-1. " shape="rect">Equation C.20.2-1</a>.</p>
               <p>
                  <a id="para_dd022379-838e-4dd3-984f-201bad2871d5" shape="rect"></a>
                            </p>
               <div class="equation">
                  <a id="equation_C.20.2-1" shape="rect"></a>
                  <p class="title">
                     <strong>Equation C.20.2-1. </strong>
                  </p>
                  <div class="equation-contents">
                     <object type="image/svg+xml" data="figures/sect_C.20.2_image_1.svg" style="">
                        <param name="src" value="image_1.svg" />
                     </object>
                  </div>
               </div>
               <p>
                  <br class="equation-break" clear="none" />
                        </p>
               <p>
                  <a id="para_1695599e-d101-4f3e-affd-516e83384873" shape="rect"></a>The Matrix Registration is expressible as multiple matrices, each in a separate Item of Matrix Sequence (0070,030A). <a class="xref" href="sect_C.20.2.html#equation_C.20.2-2" title="Equation C.20.2-2. " shape="rect">Equation C.20.2-2</a> specifies the order of the matrix multiplication where <span class="bold">
                     <strong>M<sub>1</sub>
                            </strong>
                  </span>, <span class="bold">
                     <strong>M<sub>2</sub>
                            </strong>
                  </span> and <span class="bold">
                     <strong>M<sub>3</sub>
                            </strong>
                  </span> are the first, second and third Items in the Sequence.</p>
               <p>
                  <a id="para_2cee4087-394a-4cca-8421-8e0b759e4f23" shape="rect"></a>
                            </p>
               <div class="equation">
                  <a id="equation_C.20.2-2" shape="rect"></a>
                  <p class="title">
                     <strong>Equation C.20.2-2. </strong>
                  </p>
                  <div class="equation-contents">
                     <object type="image/svg+xml" data="figures/sect_C.20.2_image_2.svg" style="">
                        <param name="src" value="image_2.svg" />
                     </object>
                  </div>
               </div>
               <p>
                  <br class="equation-break" clear="none" />
                        </p>
               <p>
                  <a id="para_0e7bc4e4-72f1-4f8d-8345-4838af68f39b" shape="rect"></a>where</p>
               <p>
                  <a id="para_561fd08c-32fd-4d1a-9e13-bbefdaa2df6f" shape="rect"></a>
                            </p>
               <div class="informalequation">
                  <object type="image/svg+xml" data="figures/sect_C.20.2_image_3.svg" style="position: relative; bottom: -27.525px;">
                     <param name="src" value="image_3.svg" />
                  </object>
               </div>
               <p>
                        </p>
               <p>
                  <a id="para_461797bd-bed6-4960-b2d0-8985e9631133" shape="rect"></a>Registration often involves two or more RCS, each with a corresponding Frame of Reference Transformation Matrix. For example, another Frame of Reference Transformation Matrix <sup>A</sup>M<sub>C</sub> can describe how to transform a point (<span class="italic">
                                <sup>C</sup>x,<sup>C</sup>y,<sup>C</sup>z</span>) with respect to RCS <span class="italic">
                                <sub>C</sub>
                            </span> into (<span class="italic">
                                <sup>A</sup>x,<sup>A</sup>y,<sup>A</sup>z</span>) with respect to RCS<sub>A</sub>. It is straightforward to find the Frame of Reference Transformation Matrix <span class="italic">
                                <sup>B</sup>
                            </span>M<span class="italic">
                                <sub>C</sub>
                            </span> that describes how to transform the point (<span class="italic">
                                <sup>C</sup>x,<sup>C</sup>y,<sup>C</sup>z</span>) with respect to RCS<sub>C</sub> into the point (<span class="italic">
                                <sup>B</sup>x,<sup>B</sup>y,<sup>B</sup>z</span>) with respect to RCS<sub>B</sub>. The solution is to invert <sup>A</sup>M<sub>B</sub> and multiply by <sup>A</sup>M<sub>C</sub>, as shown in <a class="xref" href="sect_C.20.2.html#equation_C.20.2-3" title="Equation C.20.2-3. " shape="rect">Equation C.20.2-3</a>.</p>
               <p>
                  <a id="para_f638085a-0b82-49e7-ab0f-8dee75963254" shape="rect"></a>
                            </p>
               <div class="equation">
                  <a id="equation_C.20.2-3" shape="rect"></a>
                  <p class="title">
                     <strong>Equation C.20.2-3. </strong>
                  </p>
                  <div class="equation-contents">
                     <object type="image/svg+xml" data="figures/sect_C.20.2_image_4.svg" style="">
                        <param name="src" value="image_4.svg" />
                     </object>
                  </div>
               </div>
               <p>
                  <br class="equation-break" clear="none" />
                        </p>
               <p>
                  <a id="para_3e1bceb7-5eee-461b-a982-502c10d3a7f3" shape="rect"></a>If two or more transformation matrices describe the relation between Patient coordinates and a device-centric Well-known Frame of Reference, any calculations assuming transitivity via the Well-known Frame of Reference must be performed with great care to assure that both registrations reflect the same positioning of the patient with respect to the common Well-known Frame of Reference.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h5 class="title">
                           <a id="sect_C.20.2.1.2" shape="rect"></a>C.20.2.1.2 Frame of Reference Transformation Matrix Type</h5>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_d560ae08-7e36-4fe1-861b-0436ff09f031" shape="rect"></a>There are three types of Registration Matrices:</p>
               <p>
                  <a id="para_0a35821d-edf0-4808-85b7-5320516e0c8c" shape="rect"></a>RIGID: This is a registration involving only translations and rotations. Mathematically, the matrix is constrained to be orthonormal and describes six degrees of freedom: three translations, and three rotations.</p>
               <p>
                  <a id="para_cb8cb595-4f60-4231-9f29-2ccb54998f1c" shape="rect"></a>RIGID_SCALE: This is a registration involving only translations, rotations and scaling. Mathematically, the matrix is constrained to be orthogonal and describes nine degrees of freedom: three translations, three rotations and three scales. This type of transformation is sometimes used in atlas mapping.</p>
               <p>
                  <a id="para_efc7c774-0984-4959-8b6d-edd7e67398ba" shape="rect"></a>AFFINE: This is a registration involving translations, rotations, scaling and shearing. Mathematically, there are no constraints on the elements of the Frame of Reference Transformation Matrix other than that the last row shall be (0,0,0,1) to preserve the homogeneous coordinates, so it conveys twelve degrees of freedom. This type of transformation is sometimes used in atlas mapping.</p>
               <p>
                  <a id="para_487f12c6-3cba-4381-9ec9-e071e2520791" shape="rect"></a>See <a href="../part17/chapter_P.html" class="olink" shape="rect">Annex P “Transforms and Mappings (Informative)” in PS3.17</a> for more detail.</p>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_C.20.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="sect_C.20.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_C.20.3.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">C.20 Spatial Registration </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.3.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> C.20.3 Deformable Spatial Registration Module</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.3 2024b - Information Object Definitions</span>
            </th>
         </tr>
      </table>
   </body>
</html>
