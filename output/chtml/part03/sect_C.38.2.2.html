<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>C.38.2.2 Stored File Access Macro</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.3.html" title="PS3.3" />
      <link rel="up" href="sect_C.38.2.html" title="C.38.2 Inventory Related Macros" />
      <link rel="prev" href="sect_C.38.2.html" title="C.38.2 Inventory Related Macros" />
      <link rel="next" href="sect_C.38.2.3.html" title="C.38.2.3 Inventory Reference Macro" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.3 2024a - Information Object Definitions</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">C.38.2.2 Stored File Access Macro <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.38.2.2.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_C.38.2.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">C.38.2 Inventory Related Macros</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_C.38.2.3.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.3.html" shape="rect">PS3.3</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_C.html" shape="rect">Information Module Definitions (Normative)</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_C.38.html" shape="rect">Inventory Modules</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_C.38.2.html" shape="rect">Inventory Related Macros</a>
         </span> &gt; <span class="breadcrumb-node">Stored File Access Macro</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h4 class="title">
                     <a id="sect_C.38.2.2" shape="rect"></a>C.38.2.2 Stored File Access Macro</h4>
               </div>
            </div>
         </div>
         <p>
            <a id="para_a294776b-bffd-4fbe-af29-e7934d8449e3" shape="rect"></a>
                        <a class="xref" href="sect_C.38.2.2.html#table_C.38.2-2" title="Table C.38.2-2. Stored File Access Macro Attributes" shape="rect">Table C.38.2-2</a> specifies the Attributes of the <a class="xref" href="sect_C.38.2.2.html" title="C.38.2.2 Stored File Access Macro" shape="rect">Stored File Access Macro</a>, which describe non-DICOM protocol access to a stored SOP Instance in the DICOM File Format, possibly contained in a container file.</p>
         <div class="table">
            <a id="table_C.38.2-2" shape="rect"></a>
            <p class="title">
               <strong>Table C.38.2-2. Stored File Access Macro Attributes</strong>
            </p>
            <div class="table-contents">
               <table frame="box" rules="all">
                  <thead>
                     <tr valign="top">
                        <th align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_ca89fd4a-c69f-47c2-8a0f-51225a23fc2b" shape="rect"></a>Attribute Name</p>
                                </th>
                        <th align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_8af424d7-a81a-484e-a2c7-d44bcdb50b3a" shape="rect"></a>Tag</p>
                                </th>
                        <th align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_4aef69f4-da41-4c81-910b-46cf2b3a4d50" shape="rect"></a>Type</p>
                                </th>
                        <th align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_4b8ab86f-ef62-490b-af1d-04317299388f" shape="rect"></a>Attribute Description</p>
                                </th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_4ad6f112-f0ac-4eee-8da1-184bc1a579f4" shape="rect"></a>File Access URI</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_138ccb07-1382-4d94-b597-85b203ee33f8" shape="rect"></a>(0008,0409)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_f0a3367a-a9b3-4de5-9801-3c45a756dded" shape="rect"></a>1C</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_663511cd-235b-48a7-bd58-75a074dcfe61" shape="rect"></a>Access URI for a file containing the SOP Instance. See <a class="xref" href="sect_C.38.2.2.html#sect_C.38.2.2.1.1" title="C.38.2.2.1.1 File Access URI" shape="rect">Section C.38.2.2.1.1</a>.</p>
                                    <p>
                              <a id="para_b4969f15-de33-444c-8fcb-e5e200b13638" shape="rect"></a>Required if the referenced SOP Instance is in the DICOM File Format, and is accessible through a non-DICOM protocol (see <a class="xref" href="chapter_P.html" title="P Stored File Access Through Non-DICOM Protocols (Normative)" shape="rect">Annex P</a>).</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_a9407f58-250e-41d9-8a38-0d6e0ca80319" shape="rect"></a>Container File Type</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_26db7fcc-44e7-4fcb-a985-fcfa0fc36ece" shape="rect"></a>(0008,040A)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_e14c4933-49f1-4718-8a2b-a66e9e3b2f32" shape="rect"></a>1C</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_ee90828a-a223-403a-99ca-91861ef9b34e" shape="rect"></a>Type of container file. See <a class="xref" href="sect_C.38.html#sect_C.38.1.2.8" title="C.38.1.2.8 Container File Type" shape="rect">Section C.38.1.2.8</a> for Defined Terms.</p>
                                    <p>
                              <a id="para_e1126d54-9e48-4d00-b756-dab47c47a9fd" shape="rect"></a>Required if File Access URI (0008,0409) is present.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_dc0b1ae4-5a30-4baa-9602-e67af9edca65" shape="rect"></a>Filename in Container</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_afc79e15-03f5-4bef-8510-68a586cfa3e9" shape="rect"></a>(0008,040B)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_4a1cd6df-68e9-4877-b336-e1003c486122" shape="rect"></a>1C</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_905de4b9-9c2a-45bf-9f21-90d083a056ac" shape="rect"></a>Filename within a container file of the file containing the SOP Instance. See <a class="xref" href="sect_C.38.2.2.html#sect_C.38.2.2.1.2" title="C.38.2.2.1.2 Filename in Container, File Offset in Container, and File Length in Container" shape="rect">Section C.38.2.2.1.2</a>.</p>
                                    <p>
                              <a id="para_c9c0ad88-5713-4d71-ba2e-0e226087b204" shape="rect"></a>Required if Container File Type (0008,040A) is ZIP, TAR, or TARGZIP.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_b04e4bec-3bff-4665-9ae0-f310f6f0cc9f" shape="rect"></a>File Offset in Container</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_fade47c4-8dd5-4076-9a81-efef529b3719" shape="rect"></a>(0008,040C)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_864c4be7-3083-4540-a8e7-15ad36dadf0c" shape="rect"></a>1C</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_f6dd1b8e-c59b-4eca-9781-38907bf2b917" shape="rect"></a>Byte offset (zero-based) within a container file for the start of the SOP Instance file. See <a class="xref" href="sect_C.38.2.2.html#sect_C.38.2.2.1.2" title="C.38.2.2.1.2 Filename in Container, File Offset in Container, and File Length in Container" shape="rect">Section C.38.2.2.1.2</a>.</p>
                                    <p>
                              <a id="para_57689750-22e3-4066-81b3-ac87220f747e" shape="rect"></a>Required if Container File Type (0008,040A) is BLOB. May be present otherwise.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_189b6d13-59e4-4490-8b8b-34a46c5d8fda" shape="rect"></a>File Length in Container</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_a81b4728-ebb4-401d-8d1f-3aaa14eae490" shape="rect"></a>(0008,040D)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_ab9119b0-b536-409f-8b3b-2caa08f3f977" shape="rect"></a>1C</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_b5ee70ec-0c8f-4294-abb4-45d684f7b651" shape="rect"></a>Length in bytes of the SOP Instance file within a container file. See <a class="xref" href="sect_C.38.2.2.html#sect_C.38.2.2.1.2" title="C.38.2.2.1.2 Filename in Container, File Offset in Container, and File Length in Container" shape="rect">Section C.38.2.2.1.2</a>.</p>
                                    <p>
                              <a id="para_bcc0ea25-ab4c-46b5-9ed7-a2d8043ca680" shape="rect"></a>Required if Container File Type (0008,040A) is BLOB. May be present otherwise.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_e83ddef1-0db0-4413-83aa-f6fdb6d1234e" shape="rect"></a>Stored Instance Transfer Syntax UID</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_7b64d343-6ffb-48ce-84b7-1f75d312aa3e" shape="rect"></a>(0008,040E)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_b82b9c40-1f94-456a-839b-efe12eb03c71" shape="rect"></a>1C</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_1373d1bb-74c2-405b-9265-760ebd38d89e" shape="rect"></a>Transfer Syntax of the SOP Instance encoded in DICOM File Format. Equal to Transfer Syntax UID (0002,0010) in File Meta Information header of the stored Instance.</p>
                                    <p>
                              <a id="para_4f44f697-c82e-476b-9f87-f7e41e6a49e0" shape="rect"></a>Required if File Access URI (0008,0409) is present.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_8a0ef65e-876f-4333-87a1-c9431287c348" shape="rect"></a>Lossy Image Compression Ratio</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_f9a99f00-5f07-4d41-8979-cb482d60a301" shape="rect"></a>(0028,2112)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_1f252bc7-51a6-48a0-9863-5749df6d2456" shape="rect"></a>3</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_ec085696-3d04-4c27-b4b7-abd3beb8002f" shape="rect"></a>Describes the approximate lossy compression ratio(s) that have been applied to this image.</p>
                                    <p>
                              <a id="para_b63cc609-0b76-4e72-8d43-efa5c1de5fc4" shape="rect"></a>See <a class="xref" href="sect_C.7.6.html#sect_C.7.6.1.1.5.2" title="C.7.6.1.1.5.2 Lossy Image Compression Ratio" shape="rect">Section C.7.6.1.1.5.2</a>.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_bc6c229e-39e6-4b1b-87a4-4ee6c4ab6e68" shape="rect"></a>MAC Algorithm</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_e8ce7bf3-9e01-4476-a99b-0eb79df7e617" shape="rect"></a>(0400,0015)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_8932e6f9-9ddf-4144-8b26-2e9717ef4339" shape="rect"></a>1C</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_c15f0de8-b825-4e48-8558-7a2b730a4373" shape="rect"></a>The algorithm used for generating a Message Authentication Code. See <a class="xref" href="sect_C.12.html#table_C.12.1.1.3.1.2-1" title="Table C.12.1.1.3.1.2-1. Defined Terms for MAC Algorithm (0400,0015)" shape="rect">Table C.12.1.1.3.1.2-1</a> for Defined Terms.</p>
                                    <p>
                              <a id="para_cb26c01d-08f3-4171-851d-177d59e01506" shape="rect"></a>Required if MAC (0400,0404) is present.</p>
                                </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_ad846a32-5081-4a0e-9db4-7ec0bd86c22c" shape="rect"></a>MAC</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_4c5e6ce5-d9cb-42c1-afa5-6447819cccfc" shape="rect"></a>(0400,0404)</p>
                                </td>
                        <td align="center" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_80fa8ae2-6f41-40bf-80ec-f989f7b296cd" shape="rect"></a>3</p>
                                </td>
                        <td align="left" rowspan="1" colspan="1">
                                    <p>
                              <a id="para_8c2a9bbc-cdce-410c-a681-65e4ec84b8da" shape="rect"></a>Message Authentication Code computed across the stored instance file for verification of file integrity. See <a class="xref" href="sect_C.38.2.2.html#sect_C.38.2.2.1.3" title="C.38.2.2.1.3 MAC" shape="rect">Section C.38.2.2.1.3</a>.</p>
                                </td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
         <br class="table-break" clear="none" />
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h5 class="title">
                        <a id="sect_C.38.2.2.1" shape="rect"></a>C.38.2.2.1 Stored File Access Macro Attribute Descriptions</h5>
                  </div>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h6 class="title">
                           <a id="sect_C.38.2.2.1.1" shape="rect"></a>C.38.2.2.1.1 File Access URI</h6>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_d439a2d1-6267-41a5-a484-53d90111e50a" shape="rect"></a>File Access URI (0008,0409) provides the URI for accessing a file containing the SOP Instance in the DICOM File Format. The file may contain a single SOP Instance, or it may be a container file in which one or more SOP Instance files are included.</p>
               <p>
                  <a id="para_dc857464-86b6-46e6-99da-9d375aed2294" shape="rect"></a>File Access URI (0008,0409) may be a relative path reference beginning with the single-dot-segment "./" (see <a class="xref" href="sect_P.2.html#sect_P.2.1" title="P.2.1 URI Format" shape="rect">Section P.2.1</a>). In this case, the value is merged with a Stored Instance Base URI (0008,0407) specified for the context of this Attribute in accordance with <a class="xref" href="sect_P.2.html#sect_P.2.1" title="P.2.1 URI Format" shape="rect">Section P.2.1</a>.</p>
               <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Note</h3>
                  <p>
                     <a id="para_53deb74f-098a-49f7-8f86-4090c8787303" shape="rect"></a>The merge of a relative path File Access URI (0008,0409) with a Stored Instance Base URI (0008,0407) involves only two Attribute values. For example, a relative path specified at the Instance level is not merged with any Study or Series level relative path values, but only with a base URI. This contrasts with the web-based Studies Service of <a href="../part18/PS3.18.html" class="olink" shape="rect">PS3.18</a>, which might require constructing a URI from a base URI in the Retrieve URL (0008,1190), DICOM-defined strings, a Study Instance UID (0020,000D), a Series Instance UID (0020,000E), and a Referenced SOP Instance UID (0008,1155).</p>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h6 class="title">
                           <a id="sect_C.38.2.2.1.2" shape="rect"></a>C.38.2.2.1.2 Filename in Container, File Offset in Container, and File Length in Container</h6>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_bca6c951-7dea-4516-b63e-8f82b42cb54f" shape="rect"></a>If the stored SOP Instance is included in a ZIP, TAR, or TARGZIP container file as specified in <a class="xref" href="chapter_P.html#sect_P.1.2" title="P.1.2 Container File Formats" shape="rect">Section P.1.2</a>, Filename in Container (0008,040B) is the filename within that container file of the file containing the SOP Instance.</p>
               <p>
                  <a id="para_7aba5a91-b7f5-4030-a240-28fcbaaedded" shape="rect"></a>If the stored SOP Instance is included in a BLOB container file, and optionally for other container formats, File Offset in Container (0008,040C) is the byte offset for the start of the file for the SOP Instance, and File Length in Container (0008,040D) is the file length. For TARGZIP container files, this is the offset within the TAR container file after extraction from the GZIP container file.</p>
               <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Note</h3>
                  <p>
                     <a id="para_7b02179b-694b-4b5c-9776-11306aa381ce" shape="rect"></a>Locating a file by filename within a container file may require parsing the entire container file (TAR) or look up in the index (ZIP). The File Offset in Container (0008,040C) and File Length in Container (0008,040D), if provided by the SCP, allows the SCU to directly access a specific file.</p>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h6 class="title">
                           <a id="sect_C.38.2.2.1.3" shape="rect"></a>C.38.2.2.1.3 MAC</h6>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_157eb186-370f-4950-9221-1b8bc2246a75" shape="rect"></a>The integrity of a stored SOP Instance file may be verified by a Message Authentication Code (also known as a message digest, hash, or cryptographic checksum) computed across the SOP Instance file. The MAC (0400,0404) value is computed across the entire file as a byte stream, including the Preamble, Prefix, Meta-Information Header, and Data Set Trailing Padding (see <a href="../part10/chapter_7.html" class="olink" shape="rect">Section 7 “DICOM File Format” in PS3.10</a>). For files stored in container files, the MAC is computed on the file extracted from the container.</p>
               <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Note</h3>
                  <p>
                     <a id="para_4d2ba189-75c9-44cd-91b2-4290285f8ae9" shape="rect"></a>This differs from the MAC for Digital Signatures (see <a class="xref" href="sect_C.12.html#sect_C.12.1.1.3" title="C.12.1.1.3 Digital Signatures Macro" shape="rect">Section C.12.1.1.3</a>), which is computed across an enumerated list of Attributes within the SOP Instance, not across the entire file.</p>
               </div>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_C.38.2.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="sect_C.38.2.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_C.38.2.3.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">C.38.2 Inventory Related Macros </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.3.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> C.38.2.3 Inventory Reference Macro</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.3 2024a - Information Object Definitions</span>
            </th>
         </tr>
      </table>
   </body>
</html>
