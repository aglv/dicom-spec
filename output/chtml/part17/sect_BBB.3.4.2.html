<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>BBB.3.4.2 Transactions and Message Flow</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.17.html" title="PS3.17" />
      <link rel="up" href="sect_BBB.3.4.html" title="BBB.3.4 Treatment-delivery With External Verification - Machine Adjustment Required" />
      <link rel="prev" href="sect_BBB.3.4.html" title="BBB.3.4 Treatment-delivery With External Verification - Machine Adjustment Required" />
      <link rel="next" href="chapter_CCC.html" title="CCC Ophthalmic Axial Measurements and Intraocular Lens Calculations Use Cases (Informative)" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.17 2024c - Explanatory Information</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">BBB.3.4.2 Transactions and Message Flow <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part17/sect_BBB.3.4.2.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_BBB.3.4.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">BBB.3.4 Treatment-delivery With External Verification - Machine Adjustment Required</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="chapter_CCC.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.17.html" shape="rect">PS3.17</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_BBB.html" shape="rect">Unified Procedure Step in Radiotherapy (Informative)</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_BBB.3.html" shape="rect">Use Cases</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_BBB.3.4.html" shape="rect">Treatment-delivery With External Verification - Machine Adjustment Required</a>
         </span> &gt; <span class="breadcrumb-node">Transactions and Message Flow</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h4 class="title">
                     <a id="sect_BBB.3.4.2" shape="rect"></a>BBB.3.4.2 Transactions and Message Flow</h4>
               </div>
            </div>
         </div>
         <p>
            <a id="para_ed6c0454-577a-4fcf-9df9-4b829e97ceec" shape="rect"></a>This section describe in detail the interactions illustrated in <a class="xref" href="sect_BBB.3.4.html#figure_BBB.3.4.1-1" title="Figure BBB.3.4.1-1. Treatment Delivery Message Sequence - Machine Adjustment Required" shape="rect">Figure BBB.3.4.1-1</a>.</p>
         <div class="orderedlist">
            <ol class="orderedlist" type="1">
               <li class="listitem">
                  <p>
                     <a id="para_94a0d6ad-a6e2-4a41-bfad-a4f10c6aac56" shape="rect"></a>'Deliver Beam x' on TDS console (optional step)</p>
                  <p>
                     <a id="para_bf147728-99a1-4bea-93ab-21cd6332b2d0" shape="rect"></a>See use case <a class="xref" href="sect_BBB.3.2.html" title="BBB.3.2 Treatment Delivery Normal Flow - External Verification" shape="rect">BBB.3.2</a>.</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_2cdb934d-2876-4a7a-891f-48b842387b24" shape="rect"></a>Create RT Conventional Machine Verification Instance</p>
                  <p>
                     <a id="para_c0db3a1d-4416-4aeb-b57d-63c60000dcee" shape="rect"></a>See use case <a class="xref" href="sect_BBB.3.2.html" title="BBB.3.2 Treatment Delivery Normal Flow - External Verification" shape="rect">BBB.3.2</a>.</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_19a20b94-d61d-4c81-8d7c-68c666b7d19d" shape="rect"></a>Set 'Beam x' RT Conventional Machine Verification Instance</p>
                  <p>
                     <a id="para_9d35cd1c-9939-423d-8978-379fa463693d" shape="rect"></a>See use case <a class="xref" href="sect_BBB.3.2.html" title="BBB.3.2 Treatment Delivery Normal Flow - External Verification" shape="rect">BBB.3.2</a>.</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_4f84c318-bdba-4b1c-94f4-b8bd8278034c" shape="rect"></a>Initiate Machine Verification</p>
                  <p>
                     <a id="para_6962afcd-f4b3-401e-94db-9d67f5bea7d3" shape="rect"></a>See use case <a class="xref" href="sect_BBB.3.2.html" title="BBB.3.2 Treatment Delivery Normal Flow - External Verification" shape="rect">BBB.3.2</a>.</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_4afa0e0f-1961-456b-ac2b-197e359204bc" shape="rect"></a>Verify Machine Parameters</p>
                  <p>
                     <a id="para_1ff56bf6-e4cf-4420-a5bc-7d3f94f2071f" shape="rect"></a>The MPV then attempts to verify the treatment parameters for 'Beam x'. The MPV determines that one or more treatment parameters are out-of-tolerance. It sends an N-EVENT-REPORT signal to the TDS with an Event Type of Done and an RT Machine Verification Status of NOT_VERIFIED. It may also display the verification status and information to the user (5a).</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_4522bced-4e5a-45d5-9465-1d0ea3d8f422" shape="rect"></a>Get RT Conventional Machine Verification</p>
                  <p>
                     <a id="para_6cfa8632-16cf-4055-8df9-c22592f84afc" shape="rect"></a>The TDS then requests the failed verification parameters of the verification process. This is conveyed using the N-GET primitive of the RT Conventional Machine Verification SOP Class. The MPV replies with an N-GET-RESPONSE having a Treatment Verification Status of NOT_VERIFIED. The reason(s) for the failure is encoded in the Failed Parameters Sequence (0074,1048) Attribute of the response.</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_fe05f177-392d-4f14-bda2-e10e54f8dfd3" shape="rect"></a>Request machine adjustment</p>
                  <p>
                     <a id="para_584d5fb0-c663-475a-a681-4296e48f985c" shape="rect"></a>As illustrated in this example, some implementations may require that the User observes the failed verification parameters on the MPV console and manually request the required machine adjustment. In this case the User makes the request to the TDS via its user interface. In other implementations the TDS makes the adjustments automatically and request verification without User intervention.</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_cd942acf-008e-43a2-8211-3d5098c0f947" shape="rect"></a>Adjust TDS and Set 'Beam x' RT Conventional Machine Verification Instance</p>
                  <p>
                     <a id="para_e1b5f459-4846-468d-bcb9-635253a99c61" shape="rect"></a>The TDS adjusts one or more of its parameters as requested, then sets the RT Conventional Machine Verification SOP Instance to indicate that the TDS is once again ready for treatment delivery. This is conveyed using the N-SET primitive of the RT Conventional Machine Verification SOP Class. The N-SET command provides values for all applicable parameters (not just those that have been modified) since if one or more parameters within a top-level sequence is supplied, then all the applicable parameters within that sequence must also be supplied (otherwise DICOM requires their values to be cleared).</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_a02df62d-1076-46b9-94aa-2ec20eadad52" shape="rect"></a>Initiate Machine Verification</p>
                  <p>
                     <a id="para_5b8cc7e3-fa6b-4e0c-b4d0-cb8cd2ed3929" shape="rect"></a>The TDS performs another N-ACTION on the RT Conventional Machine Verification SOP Instance to request that the MPV re-perform treatment verification. See use case <a class="xref" href="sect_BBB.3.2.html" title="BBB.3.2 Treatment Delivery Normal Flow - External Verification" shape="rect">BBB.3.2</a>.</p>
                  <p>
                     <a id="para_d6b45a04-2810-447d-87e3-9aa5d9bec4ab" shape="rect"></a>As an optional step, the MPV may notify the TDS that the verification is in process at any time, by sending an N-EVENT-REPORT signal to the TDS with an Event Type of Pending (9a).</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_bcbb61d1-a4ed-4ef5-b3e5-56b2d910bb73" shape="rect"></a>Re-verify Machine Parameters</p>
                  <p>
                     <a id="para_70beea49-ee48-4740-bae6-cd56a4b3599e" shape="rect"></a>The MPV verifies the treatment parameters, and determines that the required adjustments have been made, i.e., all parameters are now within tolerance. It sends an N-EVENT-REPORT signal to the TDS with an Event Type of Done and an RT Conventional Machine Verification Status of VERIFIED.</p>
                  <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                     <h3 class="title">Note</h3>
                     <p>
                        <a id="para_8cc73a76-ff6d-492d-8fe1-b95a1e44307d" shape="rect"></a>If another verification failure occurs, the override cycle can be repeated as many times as necessary.</p>
                  </div>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_462ce911-602e-4eb7-b910-ed5bd195037b" shape="rect"></a>Get RT Conventional Machine Verification (optional step)</p>
                  <p>
                     <a id="para_0ceee0ec-4420-4288-a600-67ffc0d13160" shape="rect"></a>See use case <a class="xref" href="sect_BBB.3.2.html" title="BBB.3.2 Treatment Delivery Normal Flow - External Verification" shape="rect">BBB.3.2</a>.</p>
                  <p>
                     <a id="para_790694c4-64a0-4954-a9ab-b55dacc7d2fc" shape="rect"></a>The TDS then delivers the therapeutic radiation.</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_33cb772d-4c05-4be3-8608-26b3682a2bd4" shape="rect"></a>Store 'Beam x' RT Beams Treatment Record to Archive</p>
                  <p>
                     <a id="para_52937162-c41f-4696-ab4e-747244c0b867" shape="rect"></a>See use case <a class="xref" href="sect_BBB.3.2.html" title="BBB.3.2 Treatment Delivery Normal Flow - External Verification" shape="rect">BBB.3.2</a>.</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_d7282c93-1d43-4405-8c2d-6211690d6762" shape="rect"></a>Delete RT Conventional Machine Verification Instance</p>
                  <p>
                     <a id="para_73811dcb-a4f5-459e-8170-a5b263d7b931" shape="rect"></a>See use case <a class="xref" href="sect_BBB.3.2.html" title="BBB.3.2 Treatment Delivery Normal Flow - External Verification" shape="rect">BBB.3.2</a>.</p>
               </li>
            </ol>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_BBB.3.4.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="sect_BBB.3.4.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="chapter_CCC.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">BBB.3.4 Treatment-delivery With External Verification - Machine Adjustment Required </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.17.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> CCC Ophthalmic Axial Measurements and Intraocular Lens Calculations Use Cases (Informative)</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.17 2024c - Explanatory Information</span>
            </th>
         </tr>
      </table>
   </body>
</html>
