<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>YYYY.7 Operational Considerations</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.17.html" title="PS3.17" />
      <link rel="up" href="chapter_YYYY.html" title="YYYY Inventories (Informative)" />
      <link rel="prev" href="sect_YYYY.6.8.html" title="YYYY.6.8 De-identification" />
      <link rel="next" href="sect_YYYY.7.2.html" title="YYYY.7.2 Using Non-DICOM Protocols" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.17 2024c - Explanatory Information</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">YYYY.7 Operational Considerations <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part17/sect_YYYY.7.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_YYYY.6.8.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">YYYY Inventories (Informative)</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_YYYY.7.2.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.17.html" shape="rect">PS3.17</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_YYYY.html" shape="rect">Inventories (Informative)</a>
         </span> &gt; <span class="breadcrumb-node">Operational Considerations</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both">
                     <a id="sect_YYYY.7" shape="rect"></a>YYYY.7 Operational Considerations</h2>
               </div>
            </div>
         </div>
         <p>
            <a id="para_45a1fd41-132e-48f4-a7a6-747071f4b77f" shape="rect"></a>This section describes topics relevant to implementation and use of Inventories.</p>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title">
                        <a id="sect_YYYY.7.1" shape="rect"></a>YYYY.7.1 Transforming Repository Query Responses into Inventory SOP Instances</h3>
                  </div>
               </div>
            </div>
            <p>
               <a id="para_4018941b-3cbf-473e-a0c5-448830c9a6a2" shape="rect"></a>For implementation reasons, there will be situations where the repository implements the Repository Query SOP Class, but the using application wants to work asynchronously from an Inventory SOP Instance. Because the Repository Query SOP Class and the Inventory IOD arealigned technically, it is feasible for an intermediary application to transform Repository Query responses into Inventory SOP Instances.</p>
            <p>
               <a id="para_94d2a548-1f10-4168-a637-d6a021dc06db" shape="rect"></a>The basic operation is for the using application to first inform the intermediary application about its desired Scope of Inventory, which can be done through the Inventory Creation SOP Class or some non-DICOM method (such as manual configuration). The intermediary application performs Repository Queries at the Study level using the desired Key Attributes, including universal matching for all Attributes that will be included in the Inventory (minimally, the Type 1 and Type 2 Attributes specified in the Inventory IOD). For each response, the application performs a query for the Series, and for each Series a query for instances, down to the level for which the Inventory is being produced. The responses from the three hierarchical levels are encoded in the Sequence Items of an Inventory SOP Instance. A separate Inventory SOP Instance might be created for each Study level Repository Query transaction, with the
                    Instances chained as described in <a class="xref" href="sect_YYYY.3.3.2.html#sect_YYYY.3.3.2.1" title="YYYY.3.3.2.1 Serial Production" shape="rect">Section YYYY.3.3.2.1</a>.</p>
            <p>
               <a id="para_1f6c78f8-1d76-4ce5-bb8a-5326d008caa4" shape="rect"></a>The intermediary application must account for Attributes not supported for matching by the SCP (see <a class="xref" href="sect_YYYY.7.11.html" title="YYYY.7.11 Key Attributes Unsupported For Matching" shape="rect">Section YYYY.7.11</a>). Such Attributes need to be excluded from the Scope of Inventory in the produced Inventory SOP Instances as they were not used for selection of Studies.</p>
            <p>
               <a id="para_222dc6bf-cbb0-4282-89f6-99c0f31fca85" shape="rect"></a>The process for transforming a Relational query to an Inventory SOP Instance is more complex, and requires knowledge of the hierarchical level of each Attribute. The initial query is not at the Study level, but rather a relational query at the Series or Instance level. Depending on the Key Attributes requested to be returned for the level(s) higher than the Query level, the application may need to perform follow-on queries at those higher levels. In particular, the Attributes defined at multiple levels (such as Removed from Operation Use (0008,0405) and File Set Access Sequence (0008,0419) ) need to be requested at each specific level.</p>
            <p>
               <a id="para_d3aee65a-8497-49f0-9ca6-1d37a0f6bc36" shape="rect"></a>While such transforms are relatively straightforward, there are some differences between Repository Query and the Inventory IOD that need to be addressed. First, the specification of Key Attributes differs, as the Query uses constructs unavailable to SOP Instances, and the IOD uses Sequence Attributes for different types of matching. Second, the Query uses the Metadata Sequence (0008,041D) and the Updated Metadata Sequence (0008,041E) to be able to obtain metadata Attributes without needing to enumerate them, while in the Inventory IOD all Attributes are encoded in the top-level Data Set for the appropriate entity Sequence Item. Of course, the intermediary application needs to handle error conditions that may occur, which should be expected in a process that may extend over several days, with applications that may also be involved in other tasks that may interrupt the inventory production.</p>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_YYYY.6.8.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="chapter_YYYY.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_YYYY.7.2.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">YYYY.6.8 De-identification </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.17.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> YYYY.7.2 Using Non-DICOM Protocols</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.17 2024c - Explanatory Information</span>
            </th>
         </tr>
      </table>
   </body>
</html>
