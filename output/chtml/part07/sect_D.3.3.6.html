<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>D.3.3.6 Service-Object Pair (SOP) Class Common Extended Negotiation</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.7.html" title="PS3.7" />
      <link rel="up" href="sect_D.3.3.html" title="D.3.3 DICOM Application Association Information" />
      <link rel="prev" href="sect_D.3.3.5.2.html" title="D.3.3.5.2 SOP Class Extended Negotiation Sub-Item Structure (A-ASSOCIATE-AC)" />
      <link rel="next" href="sect_D.3.3.7.html" title="D.3.3.7 User Identity Negotiation" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.7 2024c - Message Exchange</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">D.3.3.6 Service-Object Pair (SOP) Class Common Extended Negotiation <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part07/sect_D.3.3.6.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_D.3.3.5.2.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">D.3.3 DICOM Application Association Information</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_D.3.3.7.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.7.html" shape="rect">PS3.7</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_D.html" shape="rect">Association Negotiation (Normative)</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_D.3.html" shape="rect">Association Establishment</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_D.3.3.html" shape="rect">DICOM Application Association Information</a>
         </span> &gt; <span class="breadcrumb-node">Service-Object Pair (SOP) Class Common Extended Negotiation</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h4 class="title">
                     <a id="sect_D.3.3.6" shape="rect"></a>D.3.3.6 Service-Object Pair (SOP) Class Common Extended Negotiation</h4>
               </div>
            </div>
         </div>
         <p>
            <a id="para_31aef017-4efe-427c-aed9-8e73d8e2adce" shape="rect"></a>The SOP Class Common Extended Negotiation allows, at Association establishment, peer DICOM AEs to exchange application information, the form of which is generic, and not specific to individual Service Classes, as compared to the information defined in D.3.3.5. This is an optional feature that Association-requestors and Association-acceptors may or may not choose to support.</p>
         <p>
            <a id="para_1112a3d6-e978-4d89-ba35-29379a13ae8a" shape="rect"></a>The information included for each SOP Class for which a sub-item is present consists of a Service Class UID and (optionally) a Related General SOP Class UID.</p>
         <p>
            <a id="para_e93d0c95-8354-4562-aadd-6d8915d628d0" shape="rect"></a>The Service Class UID conveys the Service Class of the SOP Class.</p>
         <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Note</h3>
            <p>
               <a id="para_83421938-ecf6-4697-9c1f-cff5479f199b" shape="rect"></a>Explicit conveyance of the Service Class may allow the selection of the proper format for the Service-class-application-information of the SOP Class Extended Negotiation Sub-Item.</p>
         </div>
         <p>
            <a id="para_df79db08-d4d7-4b5f-94f6-df970268ae99" shape="rect"></a>The Related General SOP Class UID conveys zero or more Related General SOP Class for the SOP Class.</p>
         <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Note</h3>
            <div class="orderedlist">
               <ol class="orderedlist" type="1">
                  <li class="listitem">
                     <p>
                        <a id="para_bb3042a5-8bba-4839-913e-9a25292b34ea" shape="rect"></a>Consider the example of negotiation of support for a Procedure Log Storage SOP Class. That SOP Class is of the Storage Service Class. The encoding of the IOD would be compatible with the more general Enhanced SR Storage SOP Class. Therefore, the following common Extended Negotiation sub-item could optionally be included:</p>
                     <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: none; ">
                           <li class="listitem" style="list-style-type: none">
                              <p>
                                 <a id="para_73d2309e-dbd7-4ba4-bece-6c515aaaaeae" shape="rect"></a>SOP Class UID: 1.2.840.10008.5.1.4.1.1.88.40 Procedure Log</p>
                           </li>
                           <li class="listitem" style="list-style-type: none">
                              <p>
                                 <a id="para_75fcea33-0283-4907-83c5-c0d93bee36e4" shape="rect"></a>Service Class UID: 1.2.840.10008.4.2 Storage Service Class</p>
                           </li>
                           <li class="listitem" style="list-style-type: none">
                              <p>
                                 <a id="para_f3603dd6-88b9-416b-988c-d83017e1265a" shape="rect"></a>Related General SOP Class UID: 1.2.840.10008.5.1.4.1.1.88.22 Enhanced SR</p>
                           </li>
                        </ul>
                     </div>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_dcd404ab-f638-41c9-bbf3-2872529751b6" shape="rect"></a>The Related SOP Class may be absent, though the Service Class may still be included. For example, there may be a new image storage SOP Class without a Related SOP Class defined in <a href="../part04/PS3.4.html" class="olink" shape="rect">PS3.4</a>, yet it is still useful to an Association-acceptor to be informed that the new SOP Class is of the Storage Service Class:</p>
                     <div class="itemizedlist">
                        <ul class="itemizedlist" style="list-style-type: none; ">
                           <li class="listitem" style="list-style-type: none">
                              <p>
                                 <a id="para_f03a3c31-7aaa-439e-bbdd-84287eae7853" shape="rect"></a>SOP Class UID: 1.2.840.10008.5.1.4.1.1.7.1 MF Single Bit SC Image Storage</p>
                           </li>
                           <li class="listitem" style="list-style-type: none">
                              <p>
                                 <a id="para_e0b5399a-41b7-4eff-b1da-4d1d1c6e84ae" shape="rect"></a>Service Class UID: 1.2.840.10008.4.2 Storage Service Class</p>
                           </li>
                           <li class="listitem" style="list-style-type: none">
                              <p>
                                 <a id="para_d17913e6-d0b2-4646-8d2c-94a92d0e565f" shape="rect"></a>Related General SOP Class UID: (none)</p>
                           </li>
                        </ul>
                     </div>
                  </li>
               </ol>
            </div>
         </div>
         <p>
            <a id="para_f4662e06-8779-4663-abb4-1cf8103deba1" shape="rect"></a>The Association-requestor may only offer one SOP Class Common Extended Negotiation Sub-Item for each SOP Class UID that is present in the A-ASSOCIATE request.</p>
         <p>
            <a id="para_9ec8279a-4d21-424e-bd44-42e3a63dce41" shape="rect"></a>No response is necessary, hence the SOP Class Common Extended Negotiation Sub-Items shall be omitted in the A-ASSOCIATE response.</p>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h5 class="title">
                        <a id="sect_D.3.3.6.1" shape="rect"></a>D.3.3.6.1 SOP Class Common Extended Negotiation Sub-Item Structure (A-ASSOCIATE-RQ)</h5>
                  </div>
               </div>
            </div>
            <p>
               <a id="para_613eb9e5-f931-4741-aa6e-25ff06f43252" shape="rect"></a>The SOP Class Common Extended Negotiation Sub-Item shall be made of a sequence of mandatory fields, the last two of which may be zero-length. Multiple SOP Class Common Extended Negotiation Sub-Items may be present in the User Data Item of the A-ASSOCIATE-RQ, however, only one Sub-Item per SOP Class UID shall be present. <a class="xref" href="sect_D.3.3.6.html#table_D.3-12" title="Table D.3-12. SOP Class Common Extended Negotiation Sub-Item Fields (A-ASSOCIATE-RQ)" shape="rect">Table D.3-12</a> shows the sequence of mandatory fields.</p>
            <div class="table">
               <a id="table_D.3-12" shape="rect"></a>
               <p class="title">
                  <strong>Table D.3-12. SOP Class Common Extended Negotiation Sub-Item Fields (A-ASSOCIATE-RQ)</strong>
               </p>
               <div class="table-contents">
                  <table frame="box" rules="all">
                     <thead>
                        <tr valign="top">
                           <th align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_5c2c7f30-2c29-4bb0-a5e8-d36aceee8d28" shape="rect"></a>
                                 <span class="bold">
                                    <strong>Item Bytes</strong>
                                 </span>
                              </p>
                           </th>
                           <th align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_2f24ad0e-180a-4cb0-a313-0835fea1901b" shape="rect"></a>
                                 <span class="bold">
                                    <strong>Field Name</strong>
                                 </span>
                              </p>
                           </th>
                           <th align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_b0bd2f97-488d-45e0-8be7-000de9e8274e" shape="rect"></a>
                                 <span class="bold">
                                    <strong>Description of Field</strong>
                                 </span>
                              </p>
                           </th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_6be4075b-f59a-489e-866d-5fc7058c8bc8" shape="rect"></a>1</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_f2e37a98-13e7-45e0-be5a-07f30f4af5d1" shape="rect"></a>Item-type</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_0c9f61a5-9bad-4363-9194-a5b5e543c1af" shape="rect"></a>57H</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_7a724c10-51da-4340-a298-8dde894b9ec2" shape="rect"></a>2</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_c2fa92a0-8d0e-4a0d-af39-17918524d660" shape="rect"></a>Sub-Item-version</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_7001f685-5e49-490d-9964-2beca1b28ed5" shape="rect"></a>This field indicates the version of the Sub-Item. Fields added to the Sub-Item definition in succeeding editions of the Standard will not affect the semantics of previously defined fields. The version of the Sub-Item defined in this edition of the Standard is 0.</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_d3c6d8d6-a1af-406f-a9e0-6a19a683efee" shape="rect"></a>3-4</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_6b23d28c-bd68-4aef-bdb0-c1ed5ed704dc" shape="rect"></a>Item-Length</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_ebbbee73-e4e4-4c67-89a9-b10679fe3373" shape="rect"></a>This Item-length shall be the number of bytes from the first byte of the following field to the last byte of the Reserved field. It shall be encoded as an unsigned binary number.</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_dee7a604-f0a1-4f59-9743-7d4d47bc7e30" shape="rect"></a>5-6</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_d55badad-324e-4fa0-97f2-ce33c46a5cb4" shape="rect"></a>SOP-class-uid-length</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_28d01bc4-fe83-42b0-af9a-b4c1957cb909" shape="rect"></a>The SOP-class-uid-length shall be the number of bytes in the SOP-class-uid field. It shall be encoded as an unsigned binary number.</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_07a9340e-f6e5-4eff-a290-492f7cee3403" shape="rect"></a>7-x</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_17ee4fde-a1ed-4134-a52e-244ec9821eb6" shape="rect"></a>SOP-class-uid</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_074f4df0-0251-4831-bf56-59973a5fcfcf" shape="rect"></a>The SOP Class identifier encoded as a UID as defined in <a href="../part05/chapter_9.html" class="olink" shape="rect">Section 9 “Unique Identifiers (UIDs)” in PS3.5</a>.</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_7e382799-6d07-4556-80c2-499bf6f7d74f" shape="rect"></a>(x+1) - (x+2)</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_e5acd048-cf0c-4613-be46-db3ff82659b6" shape="rect"></a>Service-class-uid-length</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_0485f7e2-2dff-457b-b1c0-9dd3afba5f4a" shape="rect"></a>The Service-class-uid-length shall be the number of bytes in the Service-class-uid field. It shall be encoded as an unsigned binary number.</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_69469153-8b63-49ac-90cf-2e8e983cf9ef" shape="rect"></a>(x+3) - y</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_dc308de3-1a1e-4a88-a760-4677759a081c" shape="rect"></a>Service-class-uid</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_397240b0-9b52-4948-9b97-438100981009" shape="rect"></a>The Service Class identifier encoded as a UID as defined in <a href="../part05/chapter_9.html" class="olink" shape="rect">Section 9 “Unique Identifiers (UIDs)” in PS3.5</a>.</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_aa220aab-9bc0-4abf-a5aa-4193705f0c0f" shape="rect"></a>(y+1) - (y+2)</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_8eb9d61e-12a7-4316-8998-6fa62be5d3b9" shape="rect"></a>Related-general-sop-class-identification-length</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_22fd0195-d8cd-45f7-882a-8cd74275e100" shape="rect"></a>The Related-general-sop-class-identification-length shall be the number of bytes in the Related-general-sop-class-identification field. Shall be zero if no Related General SOP Classes are identified.</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_8cd5d52f-fee5-4dd8-acc8-c89f1d832a25" shape="rect"></a>(y+3) - z</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_141bea82-729e-4702-aa74-8bb61d295f9b" shape="rect"></a>Related-general-sop-class-identification</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_1062e2e2-2fce-4631-a804-65025851abec" shape="rect"></a>The Related-general-sop-class-identification is a sequence of pairs of length and UID sub-fields. Each pair of sub-fields shall be formatted in accordance with <a class="xref" href="sect_D.3.3.6.html#table_D.3-13" title="Table D.3-13. Related-General-SOP-Class-Identification Sub-Fields" shape="rect">Table D.3-13</a>
                              </p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_04a206a5-ce99-44d8-9eac-fb865d027d83" shape="rect"></a>(z+1) - k</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_6f17e2d3-a39e-432f-ba08-f1fce2a1e874" shape="rect"></a>Reserved</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_a6ab5804-3c99-40f4-b546-1025d1bf669b" shape="rect"></a>Reserved for additional fields of the sub-item. Shall be zero-length for Version 0 of Sub-Item definition.</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <br class="table-break" clear="none" />
            <div class="table">
               <a id="table_D.3-13" shape="rect"></a>
               <p class="title">
                  <strong>Table D.3-13. Related-General-SOP-Class-Identification Sub-Fields</strong>
               </p>
               <div class="table-contents">
                  <table frame="box" rules="all">
                     <thead>
                        <tr valign="top">
                           <th align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_47ba6277-ad11-4021-a9f2-57016f762606" shape="rect"></a>
                                 <span class="bold">
                                    <strong>Bytes</strong>
                                 </span>
                              </p>
                           </th>
                           <th align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_ada6aaea-fb3e-4512-b7e0-78689e75ac9f" shape="rect"></a>
                                 <span class="bold">
                                    <strong>Sub-Field Name</strong>
                                 </span>
                              </p>
                           </th>
                           <th align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_a71aa9cb-7d5f-4d7e-aa20-272d7e934512" shape="rect"></a>
                                 <span class="bold">
                                    <strong>Description of Sub-Field</strong>
                                 </span>
                              </p>
                           </th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_f49d8354-21f6-4b80-ab80-b5a4cd5c7102" shape="rect"></a>1-2</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_a10a8e54-5309-49cd-8d5e-e24d7d35bbe9" shape="rect"></a>Related-general-sop-class-uid-length</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_596635e3-6ff7-4fb8-87d9-ecb7b47cf07c" shape="rect"></a>The Related-general-sop-class-uid-length shall be the number of bytes in the Related-general-sop-class-uid sub-field. It shall be encoded as an unsigned binary number.</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_8dd568f3-8496-46fe-a7f7-f658cbb371d6" shape="rect"></a>3-n</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_33356b54-196e-4214-8c19-3d249e1ce097" shape="rect"></a>Related-general-sop-class-uid</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_2e95f653-0c7a-4048-bc93-c23c86d179c2" shape="rect"></a>The Related General SOP Class identifier encoded as a UID as defined in <a href="../part05/chapter_9.html" class="olink" shape="rect">Section 9 “Unique Identifiers (UIDs)” in PS3.5</a>.</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <br class="table-break" clear="none" />
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_D.3.3.5.2.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="sect_D.3.3.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_D.3.3.7.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">D.3.3.5.2 SOP Class Extended Negotiation Sub-Item Structure (A-ASSOCIATE-AC) </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.7.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> D.3.3.7 User Identity Negotiation</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.7 2024c - Message Exchange</span>
            </th>
         </tr>
      </table>
   </body>
</html>
