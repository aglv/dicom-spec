<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>D.3.3.4 SCP/SCU Role Selection Negotiation</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.7.html" title="PS3.7" />
      <link rel="up" href="sect_D.3.3.html" title="D.3.3 DICOM Application Association Information" />
      <link rel="prev" href="sect_D.3.3.3.2.html" title="D.3.3.3.2 Asynchronous Operations Window Sub-Item Structure (A-ASSOCIATE-AC)" />
      <link rel="next" href="sect_D.3.3.4.2.html" title="D.3.3.4.2 SCP/SCU Role Selection Sub-Item Structure (A-ASSOCIATE-AC)" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.7 2024a - Message Exchange</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">D.3.3.4 SCP/SCU Role Selection Negotiation <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part07/sect_D.3.3.4.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_D.3.3.3.2.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">D.3.3 DICOM Application Association Information</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_D.3.3.4.2.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.7.html" shape="rect">PS3.7</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_D.html" shape="rect">Association Negotiation (Normative)</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_D.3.html" shape="rect">Association Establishment</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_D.3.3.html" shape="rect">DICOM Application Association Information</a>
         </span> &gt; <span class="breadcrumb-node">SCP/SCU Role Selection Negotiation</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h4 class="title">
                     <a id="sect_D.3.3.4" shape="rect"></a>D.3.3.4 SCP/SCU Role Selection Negotiation</h4>
               </div>
            </div>
         </div>
         <p>
            <a id="para_b557f018-3b8e-481b-98b2-1c3e7d8af750" shape="rect"></a>The SCP/SCU Role Selection Negotiation allows peer AEs to negotiate the roles in which they will serve for each SOP Class or Meta SOP Class supported on the Association. This negotiation is optional.</p>
         <p>
            <a id="para_13a813d8-4463-4f40-9c6e-2b050415cc54" shape="rect"></a>The Association-requestor, for each SOP Class UID or Meta SOP Class UID, may use one SCP/SCU Role Selection item. The SOP Class or Meta SOP Class shall be identified by its corresponding Abstract Syntax Name followed by one of the three role values:</p>
         <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
               <li class="listitem">
                  <p>
                     <a id="para_85ebcc95-6b8b-4bba-89b6-8f3cc8517db1" shape="rect"></a>Association-requestor is SCU only</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_7260706a-d509-40dd-9e97-e8f7293d217e" shape="rect"></a>Association-requestor is SCP only</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_761d216f-7704-4265-a695-041155f46a78" shape="rect"></a>Association-requestor is both SCU and SCP</p>
               </li>
            </ul>
         </div>
         <p>
            <a id="para_b7de055c-3e50-427e-ad0b-f69a6ac9fd40" shape="rect"></a>If the SCP/SCU Role Selection item is absent the default role of the Association-requestor shall be SCU and the default role of the Association-acceptor shall be SCP.</p>
         <p>
            <a id="para_40cf24e8-2bff-4bb7-b1d0-df3bbb754804" shape="rect"></a>The Association-acceptor, for each SCP/SCU Role Selection item offered, either accepts the Association-requestor proposal by returning the same value (1) or turns down the proposal by returning the value (0). The Association-acceptor shall not return the value (1) if the Association-requestor has not proposed the role, i.e., it has sent a value (0). The Association-requestor shall ignore the response if it has not proposed the role.</p>
         <p>
            <a id="para_3745c745-d4a1-4cde-8fb7-e39265a1c212" shape="rect"></a>If the SCP/SCU Role Selection item is not returned by the Association-acceptor then the role of the Association-requestor shall be SCU and the role of the Association-acceptor shall be SCP. <a class="xref" href="sect_D.3.3.4.html#figure_D.3-7" title="Figure D.3-7. SCU/SCP Role Negotiation" shape="rect">Figure D.3-7</a> illustrates the SCP/SCU Role Selection Negotiation.</p>
         <p>
            <a id="para_203f3f14-1a13-4e03-9923-a1e6e7ba065d" shape="rect"></a>If the SCP/SCU Role Selection items do not exist in the A-ASSOCIATE indication they shall be omitted in the A-ASSOCIATE response.</p>
         <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Note</h3>
            <div class="orderedlist">
               <ol class="orderedlist" type="1">
                  <li class="listitem">
                     <p>
                        <a id="para_c8253ecd-389d-4a34-bcd8-36dc84a07fad" shape="rect"></a>The choices made for the default roles are based on clarification made to previous versions of the Standard. Association-requestors that wish to offer Abstract Syntax Names using the SCP role must support this item. Association-acceptors that wish to accept Abstract Syntax Names using the SCU role must support this item.</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_8ed7bad9-2b19-4b3a-855a-c2ec0b6ae329" shape="rect"></a>If an Association-requestor offers an SCP/SCU Role Selection item for an Abstract Syntax Name but the Association-acceptor does not return an SCP/SCU Role Selection item for the same Abstract Syntax Name then the proposed roles have not been accepted and the default roles apply (i.e., Association-requestor is SCU and Association-acceptor is SCP).</p>
                  </li>
               </ol>
            </div>
         </div>
         <p>
            <a id="para_72ae98b9-8a75-434c-a0b4-5f8eece54cad" shape="rect"></a>
         </p>
         <div class="figure">
            <a id="figure_D.3-7" shape="rect"></a>
            <div class="figure-contents">
               <div class="mediaobject">
                  <img src="figures/PS3.7_D.3-7.svg" alt="SCU/SCP Role Negotiation" />
               </div>
            </div>
            <p class="title">
               <strong>Figure D.3-7. SCU/SCP Role Negotiation</strong>
            </p>
         </div>
         <p>
            <br class="figure-break" clear="none" />
         </p>
         <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Note</h3>
            <div class="orderedlist">
               <ol class="orderedlist" type="1">
                  <li class="listitem">
                     <p>
                        <a id="para_b7ce6ec6-faff-410d-83a0-cd360db4d46e" shape="rect"></a>DICOM AE "B" accepts DICOM AE "A"'s proposed role as an SCU for the Storage-MR SOP; therefore, DICOM AE "B" will perform in the SCP role. DICOM AE "B" turns down the SCP proposal from DICOM AE "A".</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_1cd1b08a-bd44-4306-9e8f-1a79f20c72a9" shape="rect"></a>Both DICOM AEs may be SCU and SCP for the Storage-CT SOP.</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_64af5f51-1b81-4af5-913b-638d1dabaa81" shape="rect"></a>DICOM AE "B" accepts DICOM AE "A"'s proposed role as an SCU for the Print-SOP; therefore, DICOM AE "B" will perform in the SCP role.</p>
                  </li>
               </ol>
            </div>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h5 class="title">
                        <a id="sect_D.3.3.4.1" shape="rect"></a>D.3.3.4.1 SCP/SCU Role Selection Sub-Item Structure (A-ASSOCIATE-RQ)</h5>
                  </div>
               </div>
            </div>
            <p>
               <a id="para_fdf0743d-03b5-4604-a4a2-805d7e5743a3" shape="rect"></a>The SCP/SCU Role Selection Sub-Item shall be made of a sequence of mandatory fields. This Sub-Item is optional and if supported, one or more SCP/SCU Role Selection Sub-Items may be present in the User Data Item of the A-ASSOCIATE-RQ. The Association-requestor may only offer one SOP Class SCP/SCU Role Selection Sub-Item for each SOP Class UID or Meta SOP Class that is present in the A-ASSOCIATE request. <a class="xref" href="sect_D.3.3.4.html#table_D.3-9" title="Table D.3-9. SCP/SCU Role Selection Sub-Item Fields (A-ASSOCIATE-RQ)" shape="rect">Table D.3-9</a> shows the sequence of the mandatory fields.</p>
            <div class="table">
               <a id="table_D.3-9" shape="rect"></a>
               <p class="title">
                  <strong>Table D.3-9. SCP/SCU Role Selection Sub-Item Fields (A-ASSOCIATE-RQ)</strong>
               </p>
               <div class="table-contents">
                  <table frame="box" rules="all">
                     <thead>
                        <tr valign="top">
                           <th align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_046a742d-7a71-4ce0-98bc-2bf2321805aa" shape="rect"></a>
                                 <span class="bold">
                                    <strong>Item Bytes</strong>
                                 </span>
                              </p>
                           </th>
                           <th align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_e62d1e43-4cc9-473c-a625-7f3a220231ef" shape="rect"></a>
                                 <span class="bold">
                                    <strong>Field Name</strong>
                                 </span>
                              </p>
                           </th>
                           <th align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_1c761cc8-4716-4417-a3ee-c7fd2bced738" shape="rect"></a>
                                 <span class="bold">
                                    <strong>Description of Field</strong>
                                 </span>
                              </p>
                           </th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_bd0ae0f2-218f-49fd-87d3-78873b303d72" shape="rect"></a>1</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_03bbe1f0-8772-4872-837e-dac23f34a4b3" shape="rect"></a>Item-type</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_6b0ce6e4-22e6-4e9b-9ce1-a9c6bdc8ea1d" shape="rect"></a>54H</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_539e1d27-c57f-4622-8272-a34a2e734aa1" shape="rect"></a>2</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_a6d48460-d5da-46b0-b0ec-5cd203fa8b5a" shape="rect"></a>Reserved</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_d932f65f-db20-48d3-a0b4-4c6c12c7d72a" shape="rect"></a>This reserved field shall be sent with a value 00H but not tested to this value when received.</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_ae59a743-aabc-4630-8222-8d1f7af99fb9" shape="rect"></a>3-4</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_0ecf0e44-ade3-40bf-9414-b022484238d9" shape="rect"></a>Item-length</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_dc8e4956-bfb3-4dde-9f8c-2d187bb2aed3" shape="rect"></a>This Item-length shall be the number of bytes from the first byte of the following field to the last byte of the SCP Role field. It shall be encoded as an unsigned binary number.</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_89f1d0f2-4ae1-4c10-9c0e-03b0b04b0ae2" shape="rect"></a>5-6</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_171caf1a-dc01-4d8a-b9ab-d2e89c8019c5" shape="rect"></a>UID-length</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_986979e2-ad58-4f3d-bba8-110a8a4cede0" shape="rect"></a>This UID-length shall be the number of bytes from the first byte of the following field to the last byte of the SOP-class-uid field. It shall be encoded as an unsigned binary number.</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="center" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_be9716ef-5c16-4122-8c06-3fdb70416dcf" shape="rect"></a>7 -xxx</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_c608f09a-00dd-46d0-905d-a228c5a0dce2" shape="rect"></a>SOP-class-uid</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_97dba67d-c728-4745-9b91-aedb52d29550" shape="rect"></a>This variable field shall contain the SOP Class UID or Meta SOP Class UID that may be used to identify the corresponding Abstract Syntax for which this Sub-Item pertains. It shall be encoded as a UID as defined in <a href="../part05/chapter_9.html" class="olink" shape="rect">Section 9 “Unique Identifiers (UIDs)” in PS3.5</a>.</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_b31466aa-d6ea-4a5d-b580-f3664022fca1" shape="rect"></a>xxx</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_29659ae2-8a4b-4b0b-8e7e-8429a8ae262d" shape="rect"></a>SCU-role</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_26414a13-e956-45cd-8eca-40383c1d67c1" shape="rect"></a>This byte field shall contain the SCU-role as defined for the Association-requestor in <a class="xref" href="sect_D.3.3.4.html" title="D.3.3.4 SCP/SCU Role Selection Negotiation" shape="rect">Section D.3.3.4</a>. It shall be encoded as an unsigned binary and shall use one of the following values:</p>
                              <p>
                                 <a id="para_ce83748c-077f-4bd8-9d26-fe35014dc5b3" shape="rect"></a>0 - non support of the SCU role</p>
                              <p>
                                 <a id="para_a3068a65-9e0a-4661-b0ff-e160cc451777" shape="rect"></a>1 - support of the SCU role</p>
                           </td>
                        </tr>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_519a9df1-e8fa-402e-a2ab-754b94ec33a3" shape="rect"></a>xxx</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_f25d4130-a412-4855-9ea8-f08903a4b3e2" shape="rect"></a>SCP-role</p>
                           </td>
                           <td align="left" rowspan="1" colspan="1">
                              <p>
                                 <a id="para_e76d909d-6b8f-46b9-b2c8-337a8439454b" shape="rect"></a>This byte field shall contain the SCP-role as defined for the Association-requestor in <a class="xref" href="sect_D.3.3.4.html" title="D.3.3.4 SCP/SCU Role Selection Negotiation" shape="rect">Section D.3.3.4</a>. It shall be encoded as an unsigned binary and shall use one of the following values:</p>
                              <p>
                                 <a id="para_0784015d-0e01-4ead-b779-18d1f30cc956" shape="rect"></a>0 - non support of the SCP role</p>
                              <p>
                                 <a id="para_2e34636c-e932-4354-ae04-2ebe0260aa81" shape="rect"></a>1 - support of the SCP role.</p>
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <br class="table-break" clear="none" />
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_D.3.3.3.2.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="sect_D.3.3.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_D.3.3.4.2.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">D.3.3.3.2 Asynchronous Operations Window Sub-Item Structure (A-ASSOCIATE-AC) </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.7.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> D.3.3.4.2 SCP/SCU Role Selection Sub-Item Structure (A-ASSOCIATE-AC)</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.7 2024a - Message Exchange</span>
            </th>
         </tr>
      </table>
   </body>
</html>
