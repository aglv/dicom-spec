<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>8.2.8 MPEG-4 AVC/H.264 High Profile / Level 4.2 Video Compression</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.5.html" title="PS3.5" />
      <link rel="up" href="sect_8.2.html" title="8.2 Native or Encapsulated Format Encoding" />
      <link rel="prev" href="sect_8.2.7.html" title="8.2.7 MPEG-4 AVC/H.264 High Profile / Level 4.1 Video Compression" />
      <link rel="next" href="sect_8.2.9.html" title="8.2.9 MPEG-4 AVC/H.264 Stereo High Profile / Level 4.2 Video Compression" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.5 2024b - Data Structures and Encoding</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">8.2.8 MPEG-4 AVC/H.264 High Profile / Level 4.2 Video Compression <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part05/sect_8.2.8.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_8.2.7.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">8.2 Native or Encapsulated Format Encoding</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_8.2.9.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.5.html" shape="rect">PS3.5</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_8.html" shape="rect">Encoding of Pixel, Overlay and Waveform Data</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_8.2.html" shape="rect">Native or Encapsulated Format Encoding</a>
         </span> &gt; <span class="breadcrumb-node">MPEG-4 AVC/H.264 High Profile / Level 4.2 Video Compression</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h3 class="title">
                     <a id="sect_8.2.8" shape="rect"></a>8.2.8 MPEG-4 AVC/H.264 High Profile / Level 4.2 Video Compression</h3>
               </div>
            </div>
         </div>
         <p>
            <a id="para_0857d3a8-89d3-4fa6-99df-d010578a607b" shape="rect"></a>DICOM provides a mechanism for supporting the use of MPEG-4 AVC/H.264 Image Compression through the Encapsulated Format. <a class="xref" href="chapter_A.html" title="A Transfer Syntax Specifications (Normative)" shape="rect">Annex A</a> defines Transfer Syntaxes that reference the MPEG-4 AVC/H.264 Standard.</p>
         <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Note</h3>
            <p>
               <a id="para_82d93ddc-5e67-4256-8e12-f7e272fdd797" shape="rect"></a>MPEG-4 AVC/H.264 compression / High Profile compression is inherently lossy. The context where the usage of lossy compression of medical images is clinically acceptable is beyond the scope of the DICOM Standard. The policies associated with the selection of appropriate compression parameters (e.g., compression ratio) for MPEG-4 AVC/H.264 High Profile / Level 4.2 are also beyond the scope of this Standard.</p>
         </div>
         <p>
            <a id="para_1cd0da6b-94af-4eda-9f4e-3a4b71727169" shape="rect"></a>The use of the DICOM Encapsulated Format to support MPEG-4 AVC/H.264 compressed pixel data requires that the Data Elements that are related to the Pixel Data encoding (e.g., Photometric Interpretation, Samples per Pixel, Planar Configuration, Bits Allocated, Bits Stored, High Bit, Pixel Representation, Rows, Columns, etc.) shall contain Values that are consistent with the characteristics of the compressed data stream, with some specific exceptions noted here. The Pixel Data characteristics included in the MPEG-4 AVC/H.264 bit stream shall be used to decode the compressed data stream.</p>
         <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Note</h3>
            <p>
               <a id="para_a11f89e6-4849-4d7e-a930-62ab9e4fb12c" shape="rect"></a>These requirements are specified in terms of consistency with what is encapsulated, rather than in terms of the uncompressed pixel data from which the compressed data stream may have been derived.</p>
         </div>
         <p>
            <a id="para_ec946e84-eec7-4e63-91e3-4ab0581cda27" shape="rect"></a>When decompressing, should the characteristics explicitly specified in the compressed data stream be inconsistent with those specified in the DICOM Data Elements, those explicitly specified in the compressed data stream should be used to control the decompression. The DICOM Data Elements, if inconsistent, can be regarded as suggestions as to the form in which an uncompressed Data Set might be encoded, subject to the general and IOD-specific rules for uncompressed Photometric Interpretation and Planar Configuration, which may require that decompressed data be converted to one of the permitted forms.</p>
         <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Note</h3>
            <p>
               <a id="para_6627d6a9-29a0-42ad-b465-1769e704f609" shape="rect"></a>If MPEG-4 Compressed Pixel Data is decompressed and re-encoded in Native (uncompressed) form, then the Data Elements that are related to the Pixel Data encoding are updated accordingly. If color components are converted from YBR_PARTIAL_420 to RGB during decompression and Native re-encoding, the Photometric Interpretation will be changed to RGB in the Data Set with the Native encoding.</p>
         </div>
         <p>
            <a id="para_f88bec93-d7a1-4443-a09b-d7b40a577317" shape="rect"></a>The requirements are:</p>
         <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
               <li class="listitem">
                  <p>
                     <a id="para_4260fe92-7704-4986-8093-d94bfeb75c21" shape="rect"></a>Planar Configuration (0028,0006) shall be 0</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_bf79123f-5908-421d-8582-b1dae38d79d6" shape="rect"></a>Samples per Pixel (0028,0002) shall be 3</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_dffaa66b-6d25-4a04-8c8c-89f3646823ab" shape="rect"></a>Photometric Interpretation (0028,0004) shall be YBR_PARTIAL_420</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_05a405b0-ff19-4015-b0eb-1629897b4365" shape="rect"></a>Bits Allocated (0028,0100) shall be 8</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_dadf1b11-cf43-4b74-82c5-9435d1c702f9" shape="rect"></a>Bits Stored (0028,0101) shall be 8</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_b750379b-d6cd-4537-9adf-420360b8a5ed" shape="rect"></a>High Bit (0028,0102) shall be 7</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_f3e1fe3d-deb9-4670-bdad-1a6276ad414c" shape="rect"></a>Pixel Representation (0028,0103) shall be 0</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_fb67109c-80c2-4541-a75d-93198451455a" shape="rect"></a>The value of MPEG-4 AVC/H.264 sample aspect_ratio_idc shall be 1 in the encapsulated MPEG-4 AVC/H.264 bit stream if aspect_ratio_info_present_flag is 1.</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_5c75cd5b-7ebb-4329-b345-ac81d5e391fc" shape="rect"></a>Pixel Aspect Ratio (0028,0034) shall be absent. This corresponds to a 'Sampling Aspect Ratio' (SAR) of 1:1.</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_d588f9c8-c387-4c86-9f20-1060d4e3b5f8" shape="rect"></a>The Values for Rows (0028,0010), Columns (0028,0011), Cine Rate (0018,0040), and Frame Time (0018,1063) or Frame Time Vector (0018,1065) shall be compliant with the High Profile / Level 4.2 of the MPEG-4 AVC/H.264 standard (<a class="xref" href="chapter_2.html#biblio_ISOIEC14496-10" title="Information technology - Coding of audio-visual objects - Part 10: Advanced Video Coding" shape="rect">[<abbr class="abbrev">ISO/IEC 14496-10</abbr>]</a>) and restricted to a square pixel aspect ratio.</p>
               </li>
            </ul>
         </div>
         <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Note</h3>
            <div class="orderedlist">
               <ol class="orderedlist" type="1">
                  <li class="listitem">
                     <p>
                        <a id="para_a224bd50-bbf3-4621-97f6-556ce086c889" shape="rect"></a>The Value of Planar Configuration (0028,0006) is irrelevant since the manner of encoding components is specified in the MPEG-4 AVC/H.264 standard, hence it is set to 0.</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_1d1bf2e2-69c7-498f-a782-4fd269a68f15" shape="rect"></a>The frame rate of the acquiring camera for '30 Hz HD' MPEG-4 AVC/H.264 may be either 30 or 30/1.001 (approximately 29.97) frames/sec. Similarly, the frame rate in the case of 60 Hz may be either 60 or 60/1.001 (approximately 59.94) frames/sec. This may lead to small inconsistencies between the video timebase and real time. The relationship between frame rate and frame time is shown in <a class="xref" href="sect_8.2.8.html#table_8-7" title="Table 8-7. MPEG-4 AVC/H.264 High Profile / Level 4.2 Image Transfer Syntax Frame Rate Attributes" shape="rect">Table 8-7</a>.</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_c5bc3eaa-ef26-4a98-a328-551c3629162d" shape="rect"></a>The Frame Time (0018,1063) may be calculated from the frame rate of the acquiring camera. A frame rate of 29.97 frames per second corresponds to a frame time of 33.367 ms.</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_4beb6bee-d7e4-4427-844a-5a0868c7bdd6" shape="rect"></a>The value of chroma_format for this profile and level is defined by MPEG as 4:2:0.</p>
                  </li>
               </ol>
            </div>
         </div>
         <div class="table">
            <a id="table_8-7" shape="rect"></a>
            <p class="title">
               <strong>Table 8-7. MPEG-4 AVC/H.264 High Profile / Level 4.2 Image Transfer Syntax Frame Rate Attributes</strong>
            </p>
            <div class="table-contents">
               <table frame="box" rules="all">
                  <thead>
                     <tr valign="top">
                        <th align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_2686d0ab-76c0-4487-9c18-599c753f3daf" shape="rect"></a>
                                    <span class="bold">
                                 <strong>Video Type</strong>
                              </span>
                                </p>
                            </th>
                        <th align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_1247c0d8-7798-440a-9a42-a82298cbbda7" shape="rect"></a>
                                    <span class="bold">
                                 <strong>Frame Rate (see Note 2)</strong>
                              </span>
                                </p>
                            </th>
                        <th align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_6bb095c4-d7a5-4b89-a6d3-35a9c788a35d" shape="rect"></a>
                                    <span class="bold">
                                 <strong>Frame Time (see Note 3)</strong>
                              </span>
                                </p>
                            </th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr valign="top">
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_45a30ec8-7db1-41de-a6bf-c11b544d8250" shape="rect"></a>30 Hz HD</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_66e9fd18-fc5f-45ed-941e-7db41c14a047" shape="rect"></a>30</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_b6012227-70e7-4ecd-baa9-1cf5d417a593" shape="rect"></a>33.33 ms</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_a422df98-caba-49cd-a577-353bee59bcdb" shape="rect"></a>25 Hz HD</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_783b8ce4-ebd3-4de5-80d6-dc69ce8eb80e" shape="rect"></a>25</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_4c194b5d-d113-493e-865d-20fe4cf85683" shape="rect"></a>40.0 ms</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_1cbfc63f-dc2c-4de6-b0ff-132d7a09d300" shape="rect"></a>60 Hz HD</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_e17b99e9-fd88-477f-bfc6-ad3754faea8a" shape="rect"></a>60</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_d6abe5e2-4198-427e-92b6-b72c4e94dbca" shape="rect"></a>16.67 ms</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_89f08542-bce7-40f3-b769-39b5ff5aee85" shape="rect"></a>50 Hz HD</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_1186ec3d-7637-4587-8f35-4ea7229333fa" shape="rect"></a>50</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_37db21c4-28cf-4bb2-92c4-a389d42d542e" shape="rect"></a>20.00 ms</p>
                            </td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
         <br class="table-break" clear="none" />
         <p>
            <a id="para_a40881b7-0591-44e4-ba9a-9c9ed86ac261" shape="rect"></a>Stereo Pairs Present (0022,0028) shall be YES if stereoscopic pairs are present, otherwise shall be NO or absent.</p>
         <div class="table">
            <a id="table_8-8" shape="rect"></a>
            <p class="title">
               <strong>Table 8-8. MPEG-4 AVC/H.264 High Profile / Level 4.2 Image Transfer Syntax Stereo Attributes</strong>
            </p>
            <div class="table-contents">
               <table frame="box" rules="all">
                  <thead>
                     <tr valign="top">
                        <th align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_2bedb806-d4bb-4615-b9e2-ffb4ab964cd3" shape="rect"></a>Transfer Syntax</p>
                            </th>
                        <th align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_fd6f9a99-c3bb-42ad-adc0-edd01cb84c40" shape="rect"></a>Stereo Pairs Present</p>
                            </th>
                        <th align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_4e826b88-86ea-46e7-bbf3-abe0a3883e8f" shape="rect"></a>Stereo Frame Packing Format</p>
                            </th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr valign="top">
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_7b474214-d2d9-4cb9-8617-ce95affbb3d7" shape="rect"></a>MPEG-4 AVC/H.264 High Profile / Level 4.2 for 2D Image Compression</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_8f673303-6b73-407c-8d37-135ef54d867c" shape="rect"></a>NO or absent</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_596b52e1-59eb-40bd-b1ab-f8f967bb6816" shape="rect"></a>absent</p>
                            </td>
                     </tr>
                     <tr valign="top">
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_bc30b730-0394-4f59-9ed2-eb227e756b02" shape="rect"></a>MPEG-4 AVC/H.264 High Profile / Level 4.2 for 3D Image Compression</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_671cf2a8-0fd7-4c9e-9e33-648d4079e77a" shape="rect"></a>YES</p>
                            </td>
                        <td align="center" rowspan="1" colspan="1">
                                <p>
                              <a id="para_51713f6d-159b-4458-9122-3a3b0a19c3f4" shape="rect"></a>present</p>
                            </td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
         <br class="table-break" clear="none" />
         <p>
            <a id="para_ba31b495-7b75-4c4e-ba18-7e58b0b5844d" shape="rect"></a>For the Non-Fragmentable Encapsulated Transfer Syntax, one Fragment shall contain the whole MPEG-4 AVC/H.264 bit stream.</p>
         <p>
            <a id="para_47d701b9-7fe5-43ab-90e1-1960c2ef0fb4" shape="rect"></a>For the Fragmentable Encapsulated Transfer Syntax, the stream may be segmented into multiple Fragments.</p>
         <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Note</h3>
            <div class="orderedlist">
               <ol class="orderedlist" type="1">
                  <li class="listitem">
                     <p>
                        <a id="para_2703bf73-ab30-4085-ab0a-c1f18a5fe645" shape="rect"></a>If a video stream exceeds the maximum length of one fragment (2^32-2 bytes), it may be sent using a Fragmentable Encapsulated Transfer Syntax. Alternatively, it may be sent using a Non-Fragmentable Encapsulated Transfer Syntax as multiple SOP Instances, but each SOP Instance will contain an independent and playable bit stream, and not depend on the encoded bit stream in other (previous) instances. The manner in which such separate instances are related is not specified in the Standard, but mechanisms such as grouping into the same Series, and references to earlier instances using Referenced Image Sequence may be used.</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_9d6f2c39-c892-4722-ad7c-1f4448f10514" shape="rect"></a>Fragmentable Encapsulated Transfer Syntaxes allow for streams of essentially unlimited length; the only limit imposed is the maximum Number of Frames (0028,0008), which is 2^31-1 frames (largest positive Value in an Integer String VR).</p>
                  </li>
               </ol>
            </div>
         </div>
         <p>
            <a id="para_c319f8b9-fab2-4ef8-8761-7bc2ea7ec610" shape="rect"></a>The container format for the video bit stream shall be MPEG-2 Transport Stream, a.k.a. MPEG-TS (see <a class="xref" href="chapter_2.html#biblio_ISOIEC13818-1" title="Information technology -- Generic coding of moving pictures and associated audio information - Part 1: Systems" shape="rect">[<abbr class="abbrev">ISO/IEC 13818-1</abbr>]</a>) or MPEG-4, a.k.a. MP4 container (see <a class="xref" href="chapter_2.html#biblio_ISOIEC14496-12" title="Information technology - Coding of audio-visual objects - Part 12: ISO base media file format" shape="rect">[<abbr class="abbrev">ISO/IEC 14496-12</abbr>]</a> and <a class="xref" href="chapter_2.html#biblio_ISOIEC14496-14" title="Information technology - Coding of audio-visual objects - Part 14: MP4 file format" shape="rect">[<abbr class="abbrev">ISO/IEC 14496-14</abbr>]</a>). The PTS/DTS of the transport stream shall be used in the MPEG coding.</p>
         <p>
            <a id="para_f0a62bdf-0c8b-42e0-896c-a4e91c34ab76" shape="rect"></a>Any audio components included in the data container shall follow the constraints detailed in <a class="xref" href="sect_8.2.12.html" title="8.2.12 Constraints for Audio Data Integration in AVC and HEVC Compressed Bit Streams" shape="rect">Section 8.2.12 Constraints for Audio Data Integration in AVC and HEVC Compressed Bit Streams</a>.</p>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_8.2.7.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="sect_8.2.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_8.2.9.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">8.2.7 MPEG-4 AVC/H.264 High Profile / Level 4.1 Video Compression </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.5.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> 8.2.9 MPEG-4 AVC/H.264 Stereo High Profile / Level 4.2 Video Compression</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.5 2024b - Data Structures and Encoding</span>
            </th>
         </tr>
      </table>
   </body>
</html>
