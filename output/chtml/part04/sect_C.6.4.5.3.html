<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>C.6.4.5.3 Prior Record Key and Subsequent Response</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.4.html" title="PS3.4" />
      <link rel="up" href="sect_C.6.4.5.html" title="C.6.4.5 C-FIND SCP Behavior" />
      <link rel="prev" href="sect_C.6.4.5.2.html" title="C.6.4.5.2 Maximum Number of Records and Incomplete Response" />
      <link rel="next" href="sect_C.6.4.5.4.html" title="C.6.4.5.4 Entities Removed From Operational Use" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.4 2024a - Service Class Specifications</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">C.6.4.5.3 Prior Record Key and Subsequent Response <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part04/sect_C.6.4.5.3.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_C.6.4.5.2.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">C.6.4.5 C-FIND SCP Behavior</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_C.6.4.5.4.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.4.html" shape="rect">PS3.4</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_C.html" shape="rect">Query/Retrieve Service Class (Normative)</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_C.6.html" shape="rect">SOP Class Definitions</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_C.6.4.html" shape="rect">Repository Query SOP Class</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_C.6.4.5.html" shape="rect">C-FIND SCP Behavior</a>
         </span> &gt; <span class="breadcrumb-node">Prior Record Key and Subsequent Response</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h5 class="title">
                     <a id="sect_C.6.4.5.3" shape="rect"></a>C.6.4.5.3 Prior Record Key and Subsequent Response</h5>
               </div>
            </div>
         </div>
         <p>
            <a id="para_5823bf3b-b7f3-4e0b-a93d-679be64aecbe" shape="rect"></a>If Prior Record Key (0008,041C) is present in the Repository Query Request Identifier, the SCP shall return entity records, continuing with the next record key, that satisfy the Key Attribute matching.
                            The SCP shall return a Failure status code A710 if the value of Prior Record Key (0008,041C) is invalid for identifying an entity determining a point of continuation.
                            See <a class="xref" href="sect_C.6.4.html#sect_C.6.4.1.1" title="C.6.4.1.1 Record Key" shape="rect">Section C.6.4.1.1</a>.</p>
         <p>
            <a id="para_271fb240-73ff-42b2-8663-d8b8cf8d12d0" shape="rect"></a>For a sequential set of Query transactions with the same Key Attribute Values, and for which each C-FIND Request after the first includes a Prior Record Key (0008,041C) value equal to the last Record Key (0008,041B) in the C-FIND Responses of the prior Query transaction, the SCP shall return the same set of C-FIND Responses as if the entire Query would have been completed in a single transaction.
                            Whether new entities and updates received by the SCP after the time of the initial Query transaction might be included in the C-FIND Responses is implementation specific.</p>
         <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Note</h3>
            <div class="orderedlist">
               <ol class="orderedlist" type="1">
                  <li class="listitem">
                     <p>
                        <a id="para_f448b86d-8065-4c5f-bac3-b7b9caf44cd2" shape="rect"></a>For example, an entity added after the time of the initial Query might be assigned a Record Key (0008,041B) that precedes a Record Key (0008,041B) already sent in a C-FIND Response; that entity will not be returned in the set of Query transactions.
                                        However, an added entity whose Record Key (0008,041B) is after the last sent Record Key (0008,041B) may or may not be included in the set of Query transactions; as it was added after the initial Query transaction, the implementation determines whether such a change is included in the responses.</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_608381e2-e244-4444-aebe-f8630c525964" shape="rect"></a>The SCP should not assume that the last Record Key (0008,041B) it sent will be used as the Prior Record Key (0008,041C) in a subsequent transaction.
                                        Error conditions may cause the SCU to need to resume from an earlier value.</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_1ece73b9-7efc-49af-94c9-befb92704809" shape="rect"></a>There is no requirement for the Key Attributes in a Request Identifier to be identical to those in a prior Repository Query transaction, even though the presence of Prior Record Key (0008,041C) implies a continuation of a prior transaction.
                                        Each Repository Query transaction is independent.
                                        The SCP does not need to retain any state information between Repository Query transactions, although it may include state information in the Record Key (0008,041B).</p>
                  </li>
               </ol>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_C.6.4.5.2.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="sect_C.6.4.5.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_C.6.4.5.4.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">C.6.4.5.2 Maximum Number of Records and Incomplete Response </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.4.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> C.6.4.5.4 Entities Removed From Operational Use</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.4 2024a - Service Class Specifications</span>
            </th>
         </tr>
      </table>
   </body>
</html>
