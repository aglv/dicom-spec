<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>CC.2 DIMSE Service Groups</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.4.html" title="PS3.4" />
      <link rel="up" href="chapter_CC.html" title="CC Unified Procedure Step Service and SOP Classes (Normative)" />
      <link rel="prev" href="chapter_CC.html" title="CC Unified Procedure Step Service and SOP Classes (Normative)" />
      <link rel="next" href="sect_CC.2.2.html" title="CC.2.2 Request UPS Cancel (N-ACTION)" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.4 - Service Class Specifications</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">CC.2 DIMSE Service Groups <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part04/sect_CC.2.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="chapter_CC.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">CC Unified Procedure Step Service and SOP Classes (Normative)</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_CC.2.2.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.4.html" shape="rect">PS3.4</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_CC.html" shape="rect">Unified Procedure Step Service and SOP Classes (Normative)</a>
         </span> &gt; <span class="breadcrumb-node">DIMSE Service Groups</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both">
                     <a id="sect_CC.2" shape="rect"></a>CC.2 DIMSE Service Groups</h2>
               </div>
            </div>
         </div>
         <p>
            <a id="para_ddf44980-e04e-4cc2-9a9d-7478269569a9" shape="rect"></a>The DIMSE Services shown in <a class="xref" href="sect_CC.2.html#table_CC.2-1" title="Table CC.2-1. DIMSE Service Group Applicable to UPS Push" shape="rect">Table CC.2-1</a>, <a class="xref" href="sect_CC.2.html#table_CC.2-2" title="Table CC.2-2. DIMSE Service Group Applicable to UPS Pull" shape="rect">Table CC.2-2</a>, <a class="xref" href="sect_CC.2.html#table_CC.2-3" title="Table CC.2-3. DIMSE Service Group Applicable to UPS Watch" shape="rect">Table CC.2-3</a>, <a class="xref" href="sect_CC.2.html#table_CC.2-4" title="Table CC.2-4. DIMSE Service Group Applicable to UPS Event" shape="rect">Table CC.2-4</a> and <a class="xref" href="sect_CC.2.html#table_CC.2-5" title="Table CC.2-5. DIMSE Service Group Applicable to UPS Query" shape="rect">Table CC.2-5</a> are applicable to the Unified Procedure Step (UPS) IOD under the UPS Push, UPS Pull, UPS Watch, UPS Event and UPS Query SOP Classes respectively.</p>
         <div class="table">
            <a id="table_CC.2-1" shape="rect"></a>
            <p class="title">
               <strong>Table CC.2-1. DIMSE Service Group Applicable to UPS Push</strong>
            </p>
            <div class="table-contents">
               <table frame="box" rules="all">
                  <thead>
                     <tr valign="top">
                        <th align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_11543d46-1234-43da-baf8-eb5d25758205" shape="rect"></a>DICOM Message Service Element</p>
                        </th>
                        <th align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_1a1c0bfb-8151-4e5f-80d3-06925a0d4e17" shape="rect"></a>Usage SCU/SCP</p>
                        </th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                            <p>
                              <a id="para_b150e93d-87a5-442e-a15e-4e8a37de7704" shape="rect"></a>N-CREATE</p>
                        </td>
                        <td align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_1fe72b11-9290-49ac-bb9f-ed85dae9abfd" shape="rect"></a>M/M</p>
                        </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                            <p>
                              <a id="para_214523de-2b8f-4d75-8d4d-ab7e304d5d27" shape="rect"></a>N-ACTION - Request UPS Cancel</p>
                        </td>
                        <td align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_f95ea8e3-4225-4898-9eba-e2342f0628f9" shape="rect"></a>U/M</p>
                        </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                            <p>
                              <a id="para_50fcb772-5ad0-4b56-9e54-ed8bdfbc02d1" shape="rect"></a>N-GET</p>
                        </td>
                        <td align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_e30240f4-dd3b-4763-b589-1190d84da897" shape="rect"></a>U/M</p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
         <br class="table-break" clear="none" />
         <div class="table">
            <a id="table_CC.2-2" shape="rect"></a>
            <p class="title">
               <strong>Table CC.2-2. DIMSE Service Group Applicable to UPS Pull</strong>
            </p>
            <div class="table-contents">
               <table frame="box" rules="all">
                  <thead>
                     <tr valign="top">
                        <th align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_337a90e4-20bc-44ef-b686-72b8351b28e6" shape="rect"></a>DICOM Message Service Element</p>
                        </th>
                        <th align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_cf7dbf91-fbcc-47d7-b09f-c43fad2f091c" shape="rect"></a>Usage SCU/SCP</p>
                        </th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                            <p>
                              <a id="para_29583449-49a8-4b4a-a361-ca3994947d1b" shape="rect"></a>C-FIND</p>
                        </td>
                        <td align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_dbcbf053-4c81-4e06-b278-b370cde89b53" shape="rect"></a>M/M</p>
                        </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                            <p>
                              <a id="para_44f5d92d-644f-47a3-ac34-d17918b9d7bf" shape="rect"></a>N-GET</p>
                        </td>
                        <td align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_0b16c3f9-fb8b-4ae4-b02b-13fd671e55ae" shape="rect"></a>M/M</p>
                        </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                            <p>
                              <a id="para_8fa5aee2-606e-4600-a522-2d77b15a9bd3" shape="rect"></a>N-SET</p>
                        </td>
                        <td align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_b81c3a5f-d724-4019-b443-d8ab3223c2ef" shape="rect"></a>M/M</p>
                        </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                            <p>
                              <a id="para_3611f851-562b-44b7-8106-9710b48fd22e" shape="rect"></a>N-ACTION - Change UPS State</p>
                        </td>
                        <td align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_3a12c677-1dda-4692-b884-ee0fac359f4f" shape="rect"></a>M/M</p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
         <br class="table-break" clear="none" />
         <div class="table">
            <a id="table_CC.2-3" shape="rect"></a>
            <p class="title">
               <strong>Table CC.2-3. DIMSE Service Group Applicable to UPS Watch</strong>
            </p>
            <div class="table-contents">
               <table frame="box" rules="all">
                  <thead>
                     <tr valign="top">
                        <th align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_7ab81bc1-19c6-454d-b78d-383109b3a125" shape="rect"></a>DICOM Message Service Element</p>
                        </th>
                        <th align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_d2254af1-906e-4449-ad2c-f91f49eeea25" shape="rect"></a>SCU/SCP</p>
                        </th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                            <p>
                              <a id="para_3dbafeec-e5da-4a39-b2bb-946fd0f31b42" shape="rect"></a>N-ACTION - Un/Subscribe</p>
                        </td>
                        <td align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_971e85a0-319c-4398-a4e2-2a5bd6ebf059" shape="rect"></a>M/M</p>
                        </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                            <p>
                              <a id="para_a86221b3-9a27-4100-9bf6-3ac65cd4b896" shape="rect"></a>N-GET</p>
                        </td>
                        <td align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_724c4430-f840-47c4-9e3a-241a11864162" shape="rect"></a>M/M</p>
                        </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                            <p>
                              <a id="para_e5eeeca1-d9a4-4fbd-8eb2-ffe141377ffb" shape="rect"></a>C-FIND</p>
                        </td>
                        <td align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_10664a90-ad01-4c00-87b2-1669accc689d" shape="rect"></a>U/M</p>
                        </td>
                     </tr>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                            <p>
                              <a id="para_22fb59ff-9423-41a6-9706-9aec7466f9cf" shape="rect"></a>N-ACTION - Request UPS Cancel</p>
                        </td>
                        <td align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_1d4eb6d9-4f23-4f41-b3db-6e3aa39326ca" shape="rect"></a>U/M</p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
         <br class="table-break" clear="none" />
         <div class="table">
            <a id="table_CC.2-4" shape="rect"></a>
            <p class="title">
               <strong>Table CC.2-4. DIMSE Service Group Applicable to UPS Event</strong>
            </p>
            <div class="table-contents">
               <table frame="box" rules="all">
                  <thead>
                     <tr valign="top">
                        <th align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_66224ecd-d8fe-4545-9a9b-22c88de7f860" shape="rect"></a>DICOM Message Service Element</p>
                        </th>
                        <th align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_a3ab4688-fe5b-45ab-8de2-256033870f22" shape="rect"></a>Usage SCU/SCP</p>
                        </th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                            <p>
                              <a id="para_574e410e-c160-48ec-8607-d22d17dc16b0" shape="rect"></a>N-EVENT-REPORT</p>
                        </td>
                        <td align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_11936161-8265-4b21-a287-36da8d66fb29" shape="rect"></a>M/M</p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
         <br class="table-break" clear="none" />
         <div class="table">
            <a id="table_CC.2-5" shape="rect"></a>
            <p class="title">
               <strong>Table CC.2-5. DIMSE Service Group Applicable to UPS Query</strong>
            </p>
            <div class="table-contents">
               <table frame="box" rules="all">
                  <thead>
                     <tr valign="top">
                        <th align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_42757f52-05c1-4b05-b189-384d39f9b9b9" shape="rect"></a>DICOM Message Service Element</p>
                        </th>
                        <th align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_c790550a-40a8-4f09-b6ce-39799d6112db" shape="rect"></a>Usage SCU/SCP</p>
                        </th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr valign="top">
                        <td align="left" rowspan="1" colspan="1">
                            <p>
                              <a id="para_e9834ed7-440c-4a41-b63e-df0b0e275187" shape="rect"></a>C-FIND</p>
                        </td>
                        <td align="center" rowspan="1" colspan="1">
                            <p>
                              <a id="para_1a07c842-f279-4a72-8f5f-4421e6b61e0d" shape="rect"></a>M/M</p>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
         <br class="table-break" clear="none" />
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title">
                        <a id="sect_CC.2.1" shape="rect"></a>CC.2.1 Change UPS State (N-ACTION)</h3>
                  </div>
               </div>
            </div>
            <p>
               <a id="para_d1cb21a6-c729-4e0c-a8f4-987ea046e6fa" shape="rect"></a>This operation allows an SCU to ask the SCP to change the state of a Unified Procedure Step (UPS) instance. This operation shall be invoked by the SCU through the DIMSE N-ACTION Service.</p>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_CC.2.1.1" shape="rect"></a>CC.2.1.1 Action Information</h4>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_76264252-4757-4879-8281-6a7f272873ed" shape="rect"></a>DICOM AEs that claim conformance to the UPS Pull SOP Class as an SCU and/or an SCP shall support the Action Types and Action Information as specified in <a class="xref" href="sect_CC.2.html#table_CC.2.1-1" title="Table CC.2.1-1. Change UPS State - Action Information" shape="rect">Table CC.2.1-1</a>.</p>
               <div class="table">
                  <a id="table_CC.2.1-1" shape="rect"></a>
                  <p class="title">
                     <strong>Table CC.2.1-1. Change UPS State - Action Information</strong>
                  </p>
                  <div class="table-contents">
                     <table frame="box" rules="all">
                        <thead>
                           <tr valign="top">
                              <th align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_f53160ec-4f13-447e-bef3-df7928f3afe8" shape="rect"></a>Action Type Name</p>
                                </th>
                              <th align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_0bb91348-f3eb-4d4c-aa2b-7e0cbb9bac18" shape="rect"></a>Action Type ID</p>
                                </th>
                              <th align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_57ecde16-85dc-447e-a020-7732a34c89fb" shape="rect"></a>Attribute Name</p>
                                </th>
                              <th align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_5deb4e19-0b9a-418a-9297-0c2ec69ac0ec" shape="rect"></a>Tag</p>
                                </th>
                              <th align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_13b19f74-e94a-4885-a48a-98d8ca32bcc2" shape="rect"></a>Requirement Type SCU/SCP</p>
                                </th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr valign="top">
                              <td align="left" rowspan="2" colspan="1">
                                    <p>
                                    <a id="para_f06393b6-28b7-4f57-852b-d22a8df9de5c" shape="rect"></a>Change UPS State</p>
                                </td>
                              <td align="center" rowspan="2" colspan="1">
                                    <p>
                                    <a id="para_64668e67-ef5e-4709-bf83-e31713f0a59b" shape="rect"></a>1</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_9f96ea4c-b418-46dc-82bc-0912b5c2c044" shape="rect"></a>Procedure Step State</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_80d168b0-2476-4dc0-8ddd-f156ed026df5" shape="rect"></a>(0074,1000)</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_54b9bd41-af1b-495f-a7a2-35146a3d841e" shape="rect"></a>1/1</p>
                                </td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_95da44cf-e673-4577-9c7b-0ef7f37dae59" shape="rect"></a>Transaction UID</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_cef8d9d3-cef4-4230-9092-d0c38f9e0570" shape="rect"></a>(0008,1195)</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_4af77ab3-9abb-4937-b6ff-637233149449" shape="rect"></a>1/1</p>
                                </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
               </div>
               <br class="table-break" clear="none" />
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_CC.2.1.2" shape="rect"></a>CC.2.1.2 Service Class User Behavior</h4>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_4368bc04-58ec-4bb2-9791-7c2c03faa2b7" shape="rect"></a>An SCU uses N-ACTION to ask the SCP to change the state of a UPS Instance as shown in <a class="xref" href="chapter_CC.html#figure_CC.1.1-1" title="Figure CC.1.1-1. Unified Procedure Step State Diagram" shape="rect">Figure CC.1.1-1</a>. Since all UPSs are created as instances of the UPS Push SOP Class, the Requested SOP Class UID (0000,0003) in the N-ACTION request shall be the UID of the UPS Push SOP Class. See <a class="xref" href="sect_CC.3.html#sect_CC.3.1" title="CC.3.1 Service Class and SOP Class UIDs" shape="rect">Section CC.3.1</a> for further details.</p>
               <p>
                  <a id="para_ac120eb1-5715-4851-a29c-998c4a59dfe1" shape="rect"></a>To take control of a SCHEDULED UPS, an SCU shall generate a Transaction UID and submit a state change to IN PROGRESS including the Transaction UID in the submission. The SCU shall record and use the Transaction UID in future N-ACTION and N-SET requests for that UPS instance.</p>
               <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Note</h3>
                  <div class="orderedlist">
                     <ol class="orderedlist" type="1">
                        <li class="listitem">
                           <p>
                              <a id="para_cad7ea3b-f249-431b-bc72-5253ffc8868d" shape="rect"></a>The performing SCU may wish to record the Transaction UID in non-volatile storage. This would allow the SCU to retain control over the UPS after recovering from a crash.</p>
                        </li>
                        <li class="listitem">
                           <p>
                              <a id="para_c483d0ac-6879-4ef6-9105-b7c183e35501" shape="rect"></a>If two SCUs try to take control of a UPS, the second SCU will get an error since the first SCU established the correct Transaction UID, so the Transaction UID provided by the second SCU is incorrect.</p>
                        </li>
                     </ol>
                  </div>
               </div>
               <p>
                  <a id="para_d303b966-4185-47f0-b63e-5e8b98f5f0f5" shape="rect"></a>Upon completion of an IN PROGRESS UPS it controls, an SCU shall submit a state change to COMPLETED and include the Transaction UID for the UPS instance.</p>
               <p>
                  <a id="para_381452bd-8a6a-4878-b787-3f4394f5fc5a" shape="rect"></a>To cancel an IN PROGRESS UPS for which it has the Transaction UID, an SCU shall submit a state change to CANCELED and include the Transaction UID for the UPS instance.</p>
               <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Note</h3>
                  <div class="orderedlist">
                     <ol class="orderedlist" type="1">
                        <li class="listitem">
                           <p>
                              <a id="para_bfe445a4-2ea3-4bd0-86bc-59a0deaa5b7f" shape="rect"></a>Prior to submitting the state change to CANCELED, the performing SCU can N-SET the values of Reason For Cancellation, Procedure Step Discontinuation Reason Code Sequence, Contact Display Name or Contact URI to provide information to observing SCUs about the context of the cancellation.</p>
                        </li>
                        <li class="listitem">
                           <p>
                              <a id="para_673e9d03-feb7-4f01-9a93-12a028c1b8a6" shape="rect"></a>To request cancellation of an IN PROGRESS UPS for which it does not have the Transaction UID, an SCU uses the Request UPS Cancel action as described in <a class="xref" href="sect_CC.2.2.html" title="CC.2.2 Request UPS Cancel (N-ACTION)" shape="rect">Section CC.2.2</a>, rather than a Change UPS State action.</p>
                        </li>
                     </ol>
                  </div>
               </div>
               <p>
                  <a id="para_9e3d8bdb-d1f7-4291-b903-47159d87a4cd" shape="rect"></a>Prior to submitting a state change to COMPLETED or CANCELED for a UPS instance it controls, the SCU shall perform any N-SETs necessary for the UPS to meet Final State requirements as described in <a class="xref" href="sect_CC.2.5.html#sect_CC.2.5.1.1" title="CC.2.5.1.1 UPS Final State Requirements" shape="rect">Section CC.2.5.1.1</a>.</p>
               <p>
                  <a id="para_7921461d-b30a-4c4b-8d9e-4684e9783d49" shape="rect"></a>At any time after receipt of the N-ACTION response, the SCU may release the association on which it sent the N-ACTION request.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_CC.2.1.3" shape="rect"></a>CC.2.1.3 Service Class Provider Behavior</h4>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_bb461197-5011-4448-9642-ae528a7d381e" shape="rect"></a>The SCP shall perform the submitted state change for the identified UPS instance by setting the Procedure Step State (0074,1000) to the requested value, or shall report the appropriate failure response code.</p>
               <p>
                  <a id="para_5af02d6c-f5a7-4d63-a24b-61539d2394ce" shape="rect"></a>Upon successfully changing the state of a UPS instance to IN PROGRESS, the SCP shall record the Transaction UID provided by the SCU in the Transaction UID (0008,1195) of the UPS instance.</p>
               <p>
                  <a id="para_967062d1-da31-4749-9b1c-1e6e1997f737" shape="rect"></a>Upon completion of the N-ACTION request, the SCP shall return, via the N-ACTION response primitive, the N-ACTION Status Code applicable to the associated request as shown in <a class="xref" href="sect_CC.2.html#table_CC.2.1-2" title="Table CC.2.1-2. N-ACTION Response Status Values [for Change UPS State]" shape="rect">Table CC.2.1-2</a>.</p>
               <p>
                  <a id="para_1fb1c7b6-fbff-4b03-841c-1b4c05ee3e83" shape="rect"></a>The SCP shall only perform legal state changes as described in <a class="xref" href="chapter_CC.html#table_CC.1.1-2" title="Table CC.1.1-2. Unified Procedure Step State Transition Table" shape="rect">Table CC.1.1-2</a>.</p>
               <p>
                  <a id="para_cb4e6d3f-1de1-4636-9fc8-bfb467fc5226" shape="rect"></a>The SCP shall refuse requests to change the state of an IN PROGRESS UPS unless the Transaction UID of the UPS instance is provided in the request.</p>
               <p>
                  <a id="para_6abea1fc-2e98-48ac-98cb-afa39fee650a" shape="rect"></a>The SCP shall refuse requests to change the state of an IN PROGRESS UPS to COMPLETED or CANCELED if the Final State requirements described in <a class="xref" href="sect_CC.2.5.html#table_CC.2.5-3" title="Table CC.2.5-3. UPS SOP Class N-CREATE/N-SET/N-GET/C-FIND Attributes" shape="rect">Table CC.2.5-3</a> have not been met.</p>
               <p>
                  <a id="para_95ee1551-01a0-46ff-889a-46125d10cc34" shape="rect"></a>After the state of the UPS instance has been changed to COMPLETED or CANCELED, the SCP shall not delete the instance until all deletion locks have been removed.</p>
               <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Note</h3>
                  <p>
                     <a id="para_977f1161-836b-447a-b275-b3ef10bf04b5" shape="rect"></a>See <a class="xref" href="sect_CC.2.3.2.html" title="CC.2.3.2 Service Class User Behavior" shape="rect">Section CC.2.3.2</a> for a description of how SCUs place and remove deletion locks and see <a href="../part17/chapter_GGG.html#sect_GGG.1" class="olink" shape="rect">Section GGG.1 “Introduction” in <span class="olinkdocname">PS3.17</span>
                     </a> Reliable Watchers and Deletion Locks for further discussion.</p>
               </div>
               <p>
                  <a id="para_ff232899-5a13-4bc2-88be-9339bf14d73c" shape="rect"></a>The SCP may also modify the Procedure Step State (0074,1000) of a UPS instance independently of an N-ACTION request, e.g., if the SCP is performing the procedure step itself, or if it has been determined that the performing SCU has been disabled.</p>
               <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Note</h3>
                  <p>
                     <a id="para_3fa0c57e-44cb-4954-8b4f-a3306549902f" shape="rect"></a>If the SCP is not performing the procedure step, this should be done with caution.</p>
               </div>
               <p>
                  <a id="para_bfbd1e8b-952b-4f35-92ef-a4e28c50a7fa" shape="rect"></a>Upon successfully changing the state of a UPS instance, the SCP shall carry out the appropriate N-EVENT-REPORT behavior as described in <a class="xref" href="sect_CC.2.4.3.html" title="CC.2.4.3 Service Class Provider Behavior" shape="rect">Section CC.2.4.3</a> if it supports the UPS Event SOP Class as an SCP.</p>
               <p>
                  <a id="para_374ffc19-69ea-4e4b-82fc-d243a0acc0f6" shape="rect"></a>Bi-directional Authentication of machines/users/applications is possible at association time (see <a href="../part07/PS3.7.html" class="olink" shape="rect">PS3.7</a> and <a href="../part15/PS3.15.html" class="olink" shape="rect">PS3.15</a>). <a href="../part07/PS3.7.html" class="olink" shape="rect">PS3.7</a> provides a "Refused: Refused: Not authorized" error code. Further requiring or documenting authentication and/or authorization features from the SCU or SCP is beyond the scope of this SOP Class.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_CC.2.1.4" shape="rect"></a>CC.2.1.4 Status Codes</h4>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_e9473bb3-3097-4988-8c36-a6d665f6ea31" shape="rect"></a>
                        <a class="xref" href="sect_CC.2.html#table_CC.2.1-2" title="Table CC.2.1-2. N-ACTION Response Status Values [for Change UPS State]" shape="rect">Table CC.2.1-2</a> defines the status code values that might be returned in a N-ACTION response. General status code values and fields related to status code values are defined for N-ACTION DIMSE Service in <a href="../part07/PS3.7.html" class="olink" shape="rect">PS3.7</a>.</p>
               <div class="table">
                  <a id="table_CC.2.1-2" shape="rect"></a>
                  <p class="title">
                     <strong>Table CC.2.1-2. N-ACTION Response Status Values [for Change UPS State]</strong>
                  </p>
                  <div class="table-contents">
                     <table frame="box" rules="all">
                        <thead>
                           <tr valign="top">
                              <th align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_dcc8b77a-7865-4932-b135-621de9f4b4b4" shape="rect"></a>Service Status</p>
                                </th>
                              <th align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_f417b6b5-2761-41d9-941e-2ff7d9cbc037" shape="rect"></a>Further Meaning</p>
                                </th>
                              <th align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_1202f8d8-6e3d-4161-a18b-149be74d72cd" shape="rect"></a>Status Code</p>
                                </th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_c2239b33-bfc3-4c47-bc31-663894ddab13" shape="rect"></a>Success</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_05381cc2-8ff7-42cb-9b46-089497c46af6" shape="rect"></a>The requested state change was performed</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_0bf29b4d-c353-4017-8621-06ba14e7429d" shape="rect"></a>0000</p>
                                </td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="2" colspan="1">
                                    <p>
                                    <a id="para_871d449a-11a4-423b-b68d-73b9c9403d3c" shape="rect"></a>Warning</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_80cf57a7-50b6-4016-9ee0-98ad5dc661e4" shape="rect"></a>The UPS is already in the requested state of CANCELED</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_5a0f059e-8d88-4731-be44-648346ca7d95" shape="rect"></a>B304</p>
                                </td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_b79941b2-d44c-4f90-ae58-3caab0e6ea55" shape="rect"></a>The UPS is already in the requested state of COMPLETED</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_70dc55f8-9421-49d6-8a53-d87df3377cca" shape="rect"></a>B306</p>
                                </td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="7" colspan="1">
                                    <p>
                                    <a id="para_4947ab3a-82df-4372-9249-e5f3c5dc8244" shape="rect"></a>Failure</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_5135b61b-24cd-48fc-9f54-56f6e589a04e" shape="rect"></a>Failed: The UPS may no longer be updated</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_b7818262-0f9b-468e-846c-a0178d202f5b" shape="rect"></a>C300</p>
                                </td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_ff0aba29-f9c4-4688-83ea-18b16e85d0a8" shape="rect"></a>Failed: The correct Transaction UID was not provided</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_1f17ed5c-5ff0-4c41-a93f-6dbdc9c290ed" shape="rect"></a>C301</p>
                                </td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_dc7741f3-5196-4dfa-b6ac-8babd4db21e3" shape="rect"></a>Failed: The UPS is already IN PROGRESS</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_1fb868d7-b6e7-49db-8ba4-20b54aab391b" shape="rect"></a>C302</p>
                                </td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_625e914c-0804-47b7-a428-ff1a42f7a38b" shape="rect"></a>Failed: The UPS may only become SCHEDULED via N-CREATE, not N-SET or N-ACTION</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_c3ec66d0-d86e-4c7c-92a6-7bce32b35897" shape="rect"></a>C303</p>
                                </td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_2cba0726-a648-472c-b6c5-b58010f000f9" shape="rect"></a>Failed: The UPS has not met final state requirements for the requested state change</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_c27858d7-63e2-4ca8-9d1e-e008d20feae6" shape="rect"></a>C304</p>
                                </td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_87bcd62f-7630-4479-a016-7f075fba3e20" shape="rect"></a>Failed: Specified SOP Instance UID does not exist or is not a UPS Instance managed by this SCP</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_4d1c27ce-30d4-49a5-a6da-ee08d17c0cc1" shape="rect"></a>C307</p>
                                </td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_38b0abba-41ee-4c23-9394-03f028e524e7" shape="rect"></a>Failed: The UPS is not yet in the "IN PROGRESS" state</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_e5398654-03a2-42c3-8008-9bd3a3934f88" shape="rect"></a>C310</p>
                                </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
               </div>
               <br class="table-break" clear="none" />
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="chapter_CC.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="chapter_CC.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_CC.2.2.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">CC Unified Procedure Step Service and SOP Classes (Normative) </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.4.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> CC.2.2 Request UPS Cancel (N-ACTION)</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.4 - Service Class Specifications</span>
            </th>
         </tr>
      </table>
   </body>
</html>
