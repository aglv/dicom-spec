<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>KK Storage Management Service Class</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.4.html" title="PS3.4" />
      <link rel="up" href="PS3.4.html" title="PS3.4" />
      <link rel="prev" href="sect_JJ.4.2.2.3.html" title="JJ.4.2.2.3 C-GET SCP Conformance" />
      <link rel="next" href="sect_KK.2.html" title="KK.2 Inventory Creation SOP Class" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.4 2024a - Service Class Specifications</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">KK Storage Management Service Class <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part04/chapter_KK.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_JJ.4.2.2.3.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1"> </th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_KK.2.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.4.html" shape="rect">PS3.4</a>
         </span> &gt; <span class="breadcrumb-node">Storage Management Service Class</span>
      </div>
      <div class="chapter">
         <div class="titlepage">
            <div>
               <div>
                  <h1 class="title">
                     <a id="chapter_KK" shape="rect"></a>KK Storage Management Service Class</h1>
               </div>
            </div>
         </div>
         <p>
            <a id="para_dd7113ad-dea6-4b30-a6f8-e47f30599803" shape="rect"></a>The Storage Management Service Class defines an application-level class-of-service that facilitates peer-to-peer controls for management of persistent storage of Composite SOP Instances.
            The Service Class allows asynchronous operations between the Service Class User (SCU) and the Service Class Provider (SCP).</p>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both">
                        <a id="sect_KK.1" shape="rect"></a>KK.1 Overview</h2>
                  </div>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="sect_KK.1.1" shape="rect"></a>KK.1.1 Use Cases</h3>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_e5a303d8-9d26-4e4b-a0e3-5b993f7faa7d" shape="rect"></a>DICOM supports all manner of peer-to-peer interactions for systems within the biomedical imaging domain.
                    In many enterprises, one or more systems are responsible for long-term management of stored SOP Instances.
                    This Service Class supports the interoperability use cases associated with such long-term storage management.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="sect_KK.1.2" shape="rect"></a>KK.1.2 SOP Classes</h3>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_22210de3-4bd9-4680-9f7f-96254c3e02f2" shape="rect"></a>Each SOP Class of the Storage Management Service Classis formed from a combination of a common DIMSE Service Group and a specific Information Object Definition.</p>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_KK.1.2.1" shape="rect"></a>KK.1.2.1 DIMSE Service Group</h4>
                        </div>
                     </div>
                  </div>
                  <p>
                     <a id="para_71bb689f-4b98-41b8-9468-3c9ec93e5319" shape="rect"></a>The DIMSE-N Services applicable to all SOP Classes of the Storage Management Service Class are shown in <a class="xref" href="chapter_KK.html#table_KK.1-1" title="Table KK.1-1. DIMSE Service Group Applicable to Storage Management" shape="rect">Table KK.1-1</a>.</p>
                  <div class="table">
                     <a id="table_KK.1-1" shape="rect"></a>
                     <p class="title">
                        <strong>Table KK.1-1. DIMSE Service Group Applicable to Storage Management</strong>
                     </p>
                     <div class="table-contents">
                        <table frame="box" rules="all">
                           <thead>
                              <tr valign="top">
                                 <th align="center" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_8265284c-7e7f-4ff0-894c-76f07e5ba608" shape="rect"></a>DICOM Message Service Element</p>
                                </th>
                                 <th align="center" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_aba1248b-a161-4b4b-bcd9-549d0dfdb9eb" shape="rect"></a>Usage SCU/SCP</p>
                                </th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_9366ed98-1746-4df5-92dc-822dce95cbe1" shape="rect"></a>N-ACTION</p>
                                </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_8b8ada01-1d7f-45ed-9a95-318faa1cd007" shape="rect"></a>M/M</p>
                                </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_08b71f4a-74bb-460d-b342-273bbc199ec7" shape="rect"></a>N-EVENT-REPORT</p>
                                </td>
                                 <td align="center" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_1645edf8-16ad-4808-b732-0e7caa9eaf5b" shape="rect"></a>M/M</p>
                                </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </div>
                  <br class="table-break" clear="none" />
                  <p>
                     <a id="para_7152df04-e702-4d00-966f-d001386dd302" shape="rect"></a>The DIMSE-N Services and Protocol are specified in <a href="../part07/chapter_10.html" class="olink" shape="rect">Section 10 “DIMSE-N” in PS3.7</a>. Additional constraints on these services, such as specific action and event types, are specified for each SOP Class.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_KK.1.2.2" shape="rect"></a>KK.1.2.2 Information Object Definitions</h4>
                        </div>
                     </div>
                  </div>
                  <p>
                     <a id="para_2c8ddff9-d3dc-41ff-a136-d449cb0e0950" shape="rect"></a>The SOP Classes of the Storage Management Service Class are defined using the IODs specified in <a class="xref" href="chapter_KK.html#table_KK.1-2" title="Table KK.1-2. Storage Management Service SOP Classes" shape="rect">Table KK.1-2</a>.</p>
                  <div class="table">
                     <a id="table_KK.1-2" shape="rect"></a>
                     <p class="title">
                        <strong>Table KK.1-2. Storage Management Service SOP Classes</strong>
                     </p>
                     <div class="table-contents">
                        <table frame="box" rules="all">
                           <thead>
                              <tr valign="top">
                                 <th align="center" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_5ce5d344-2cda-40bf-9159-6aef0c8d0366" shape="rect"></a>SOP Class Name</p>
                                </th>
                                 <th align="center" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_2a29c61e-a130-49ef-b749-ceb06c2d3a61" shape="rect"></a>SOP Class UID</p>
                                </th>
                                 <th align="center" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_812cff14-7f6e-400a-b44b-8e96237da73c" shape="rect"></a>IOD Specification (defined in <a href="../part03/PS3.3.html" class="olink" shape="rect">PS3.3</a>)</p>
                                </th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_91b457b6-3135-407e-8925-150038f30672" shape="rect"></a>Inventory Creation</p>
                                </td>
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_80476790-3e8c-4826-8678-ba313feefc21" shape="rect"></a>1.2.840.10008.5.1.4.1.1.201.5</p>
                                </td>
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_cdc66893-4dbb-49fd-b615-f21f49c14afc" shape="rect"></a>
                                       <a href="../part03/sect_B.30.html" class="olink" shape="rect">Inventory Creation IOD</a>
                                    </p>
                                </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </div>
                  <br class="table-break" clear="none" />
                  <p>
                     <a id="para_c17c3f14-897d-4689-8032-23cde041456f" shape="rect"></a>Additional constraints on these IODs, such as specific Attributes required for the different action types, are specified for each SOP Class.</p>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="sect_KK.1.3" shape="rect"></a>KK.1.3 Service Protocol</h3>
                     </div>
                  </div>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_KK.1.3.1" shape="rect"></a>KK.1.3.1 Association Negotiation</h4>
                        </div>
                     </div>
                  </div>
                  <p>
                     <a id="para_2ff4f8dc-8761-4312-9f5e-0d35583eef60" shape="rect"></a>Association establishment is the first phase of any instance of communication between peer DICOM AEs.
                        The Association negotiation rules as specified in <a href="../part07/chapter_D.html" class="olink" shape="rect">Annex D “Association Negotiation (Normative)” in PS3.7</a> are used to negotiate the supported SOP Classes and peer AE roles.</p>
                  <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                     <h3 class="title">Note</h3>
                     <p>
                        <a id="para_a514c078-c24f-4b7a-b7c9-991950cf37cd" shape="rect"></a>Implementations may restrict Association establishment subject to exchange of security related information, such as application identity and authorization, either within DICOM Association negotiation or outside the scope of the DICOM protocol.
                            See <a href="../part17/sect_YYYY.6.html" class="olink" shape="rect">Section YYYY.6 “Security Considerations” in PS3.17</a>.</p>
                  </div>
                  <p>
                     <a id="para_ee71e4b4-75e5-40af-9524-7b8e4c18f521" shape="rect"></a>Support for the SCP/SCU Role Selection Negotiation is mandatory.
                        The SOP Class Extended Negotiation is not defined for this Service Class.</p>
                  <p>
                     <a id="para_8454af3f-261d-43de-be70-e8bf3678f69f" shape="rect"></a>The SCU will open an Association when it desires to request a storage management operation by the SCP.</p>
                  <p>
                     <a id="para_c91dcf19-7cdc-4b41-8188-7717b16f936f" shape="rect"></a>The SCP will typically open an Association when it is reporting status, or has completed a requested operation or reached some other termination condition, such as a failure.
                        This Association establishment includes negotiation of SCP/SCU role.</p>
                  <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                     <h3 class="title">Note</h3>
                     <div class="orderedlist">
                        <ol class="orderedlist" type="1">
                           <li class="listitem">
                              <p>
                                 <a id="para_67dda1fb-ad84-427c-ac05-39c10b2a1f95" shape="rect"></a>The SCP may attempt to issue an N-EVENT-REPORT on the same Association as the initiating N-ACTION, but this operation may fail because the SCU is free to release at any time the Association on which it sent the N-ACTION request.</p>
                           </li>
                           <li class="listitem">
                              <p>
                                 <a id="para_dc92f158-5932-4530-85ab-dc2295c37e2f" shape="rect"></a>As DICOM defaults the Association-requestor to the SCU role, the SCP (i.e., the Association-requestor) negotiates an SCP role using the SCU/SCP role negotiation (see <a href="../part07/sect_D.3.3.4.html" class="olink" shape="rect">Section D.3.3.4 “SCP/SCU Role Selection Negotiation” in PS3.7</a>).</p>
                           </li>
                           <li class="listitem">
                              <p>
                                 <a id="para_1eb1cbe4-18aa-4731-ac12-2e7bebc5c5e0" shape="rect"></a>When responding on a different Association, the SCP uses the same AE Title as it used on the original Association, because the DICOM Standard defines a Service between two peer applications, each identified by an AE Title.
                                    Thus, the SCP should be consistently identified for all transactions with a particular peer in a SOP Class.</p>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_KK.1.3.2" shape="rect"></a>KK.1.3.2 Operations and Notifications</h4>
                        </div>
                     </div>
                  </div>
                  <p>
                     <a id="para_857d034a-ab12-4252-b5cf-65576f5ad194" shape="rect"></a>Following Association establishment, peer-to-peer communication between the SCU and SCP uses the DIMSE N-ACTION and N-EVENT-REPORT (see <a href="../part07/chapter_10.html#sect_10.1" class="olink" shape="rect">Section 10.1 “Services” in PS3.7</a>).</p>
                  <p>
                     <a id="para_11a98113-2024-468b-91a3-e3fb3193813a" shape="rect"></a>The N-ACTION and N-EVENT-REPORT primitives shall contain the well-known Storage Management SOP Instance specified in <a class="xref" href="chapter_KK.html#table_KK.1-3" title="Table KK.1-3. Storage Management SOP Instance UID" shape="rect">Table KK.1-3</a> in their Requested SOP Instance UID and Affected SOP Instance UID parameters.</p>
                  <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                     <h3 class="title">Note</h3>
                     <p>
                        <a id="para_0fab72b5-6f89-4d34-b9d5-10eb28f55b7d" shape="rect"></a>In the usage described here, there is no explicit creation of a SOP Instance (using N-CREATE) upon which an N-ACTION may operate.
                            Instead, the N-ACTION operates upon a well-known SOP Instance.
                            This SOP Instance is conceptually created during start-up of each Storage Management Service Class SCP Application.</p>
                  </div>
                  <div class="table">
                     <a id="table_KK.1-3" shape="rect"></a>
                     <p class="title">
                        <strong>Table KK.1-3. Storage Management SOP Instance UID</strong>
                     </p>
                     <div class="table-contents">
                        <table frame="box" rules="all">
                           <thead>
                              <tr valign="top">
                                 <th align="center" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_139d8f97-bfc5-4315-bfc5-d21119fd75b3" shape="rect"></a>SOP Instance UID</p>
                                </th>
                                 <th align="center" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_85e5b9ec-9e3e-43bf-a3a2-0e5cc8f6352b" shape="rect"></a>UID Name</p>
                                </th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_9a335888-eb34-44ac-98c5-ff73c5120668" shape="rect"></a>1.2.840.10008.5.1.4.1.1.201.1.1</p>
                                </td>
                                 <td align="left" rowspan="1" colspan="1">
                                    <p>
                                       <a id="para_00f604db-ea81-4996-a1a0-ffaf12c71bd5" shape="rect"></a>Storage Management SOP Instance</p>
                                </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </div>
                  <br class="table-break" clear="none" />
                  <p>
                     <a id="para_fd6eff4c-79bc-4036-b3bc-2d8f6836087a" shape="rect"></a>The SCP requests a storage management operation using the N-ACTION request primitive of one of the Storage Management Service SOP Classes.
                        The request includes a Transaction UID for tracking purposes.</p>
                  <p>
                     <a id="para_1243bbfb-650c-45f1-9448-31bf8695ba8e" shape="rect"></a>If the SCP accepts the N-ACTION request for processing, it sends a Success N-ACTION Response Status Code.
                        If it does not accept the N-ACTION request for processing, it sends an Error N-ACTION Response Status Code.
                        The actions taken by the SCU upon receiving the status is beyond the scope of this Standard.</p>
                  <p>
                     <a id="para_8010564a-f85a-4c65-af6e-b14fc22a6642" shape="rect"></a>At any time after receipt of the N-ACTION response, the SCU may release the association on which it sent the N-ACTION request.</p>
                  <p>
                     <a id="para_bd929ca2-eb77-4f2d-9712-afa95f827413" shape="rect"></a>The SCP notifies the SCU using the N-EVENT-REPORT primitive when it has completed the requested operation or reached some other termination condition, such as a failure or a time-out.
                        The notification includes the Transaction UID of the request. Upon completion or termination, the Transaction UID is no longer active and shall not be reused.</p>
               </div>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_JJ.4.2.2.3.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1"> </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_KK.2.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">JJ.4.2.2.3 C-GET SCP Conformance </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.4.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> KK.2 Inventory Creation SOP Class</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.4 2024a - Service Class Specifications</span>
            </th>
         </tr>
      </table>
   </body>
</html>
