<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>C.4.2.3.2 Extended Behavior of SCP</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.4.html" title="PS3.4" />
      <link rel="up" href="sect_C.4.2.3.html" title="C.4.2.3 C-MOVE SCP Behavior" />
      <link rel="prev" href="sect_C.4.2.3.html" title="C.4.2.3 C-MOVE SCP Behavior" />
      <link rel="next" href="sect_C.4.3.html" title="C.4.3 C-GET Operation" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.4 2024b - Service Class Specifications</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">C.4.2.3.2 Extended Behavior of SCP <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part04/sect_C.4.2.3.2.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_C.4.2.3.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">C.4.2.3 C-MOVE SCP Behavior</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_C.4.3.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.4.html" shape="rect">PS3.4</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_C.html" shape="rect">Query/Retrieve Service Class (Normative)</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_C.4.html" shape="rect">DIMSE-C Service Groups</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_C.4.2.html" shape="rect">C-MOVE Operation</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="sect_C.4.2.3.html" shape="rect">C-MOVE SCP Behavior</a>
         </span> &gt; <span class="breadcrumb-node">Extended Behavior of SCP</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h5 class="title">
                     <a id="sect_C.4.2.3.2" shape="rect"></a>C.4.2.3.2 Extended Behavior of SCP</h5>
               </div>
            </div>
         </div>
         <p>
            <a id="para_26ec851f-5609-4320-ac59-42283e49aa0d" shape="rect"></a>Extended SCP behavior shall be negotiated at Association establishment time. If an option within the extended behavior is not agreed upon in the negotiation, then only baseline SCP behavior shall be performed with respect to that option. Extended SCP behavior includes all baseline behavior with the following option:</p>
         <div class="itemizedlist">
            <ul class="itemizedlist" style="list-style-type: disc; ">
               <li class="listitem">
                  <p>
                     <a id="para_2f2d7424-1b5d-4f40-b3a9-ebd470db9f10" shape="rect"></a>Relational-retrieve</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_68ac9455-3af9-4a13-afe6-814fe8dec88d" shape="rect"></a>Enhanced Multi-Frame Image Conversion</p>
               </li>
            </ul>
         </div>
         <p>
            <a id="para_a2e5e6d0-bde7-4218-a147-16f9582d621e" shape="rect"></a>More than one option may be agreed upon.</p>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h6 class="title">
                        <a id="sect_C.4.2.3.2.1" shape="rect"></a>C.4.2.3.2.1 Relational-Retrieve</h6>
                  </div>
               </div>
            </div>
            <p>
               <a id="para_eb251c50-3ebe-4002-85ae-8ef4b4f81f98" shape="rect"></a>The C-MOVE Service with relational-retrieve removes the restriction that the SCU supply Unique Key values for levels above the Query/Retrieve level to help identify an entity at the level of the retrieval. Hence, the Identifier of a C-MOVE request may specify the transfer of:</p>
            <div class="itemizedlist">
               <ul class="itemizedlist" style="list-style-type: disc; ">
                  <li class="listitem">
                     <p>
                        <a id="para_bc23d3cb-3c94-409a-9858-d9a8ba40a520" shape="rect"></a>all Composite Object Instances related to a study by only providing a Study Instance UID (0020,000D)</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_e5d4d469-fd89-4f51-aba9-b9e24ec2fdc6" shape="rect"></a>all Composite Object Instances related to a series by only providing a Series Instance UID (0020,000E)</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_69cc18d3-1860-42a2-bee8-4b900300a7b6" shape="rect"></a>individual Composite Object Instances by only providing a list of SOP Instance UIDs (0008,0018)</p>
                  </li>
               </ul>
            </div>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h6 class="title">
                        <a id="sect_C.4.2.3.2.2" shape="rect"></a>C.4.2.3.2.2 Enhanced Multi-Frame Image Conversion</h6>
                  </div>
               </div>
            </div>
            <p>
               <a id="para_5bfdca78-ad59-4954-9ee9-cf5def337c77" shape="rect"></a>If Query/Retrieve View (0008,0053) is not present in the Request Identifier, then the SCP shall identify a set of Entities at the level of the transfer based upon the values in the Unique Keys in the Identifier of the C-MOVE request that correspond to the instances it possesses, as received, and shall initiate C-STORE sub-operations for all the corresponding storage SOP Instances.</p>
            <p>
               <a id="para_8961e0c5-7550-406a-95f1-6e4ef76af867" shape="rect"></a>If Query/Retrieve View (0008,0053) is present with a value of "CLASSIC", then the SCP shall identify a set of Entities at the level of the transfer based upon the values in the Unique Keys in the Identifier of the C-MOVE request that correspond to the Classic single frame Instances (converted from Enhanced multi-frame Instances if required), as well as any instances that were converted to preserve referential integrity, and any that did not need to be converted, and shall initiate C-STORE sub-operations for all the corresponding storage SOP Instances.</p>
            <p>
               <a id="para_2c6b2264-b3a5-4b6e-83ae-057f7ee2cd48" shape="rect"></a>If Query/Retrieve View (0008,0053) is present with a value of "ENHANCED", then the SCP shall identify a set of Entities at the level of the transfer based upon the values in the Unique Keys in the Identifier of the C-MOVE request that correspond to the Enhanced multi-frame Instances (converted from Classic single frame Instances if required), as well as any instances that were converted to preserve referential integrity, and any that did not need to be converted, and shall initiate C-STORE sub-operations for all the corresponding storage SOP Instances.</p>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
               <h3 class="title">Note</h3>
               <div class="orderedlist">
                  <ol class="orderedlist" type="1">
                     <li class="listitem">
                        <p>
                           <a id="para_6d876903-6483-4940-a0c9-a61977b1d6f0" shape="rect"></a>The SCP will not send information that is duplicated to the C-STORE SCP. For example, if an entire series of single frame instances can be converted to a separate series of converted instances, a STUDY level C-MOVE will not send both series.</p>
                     </li>
                     <li class="listitem">
                        <p>
                           <a id="para_8c19b61d-c75a-46dc-a50d-5f784b93ee0e" shape="rect"></a>The C-STORE SCP will need to support the necessary SOP Classes for converted instances, otherwise the C-STORE sub-operations will fail in the normal manner and this will be reflected in the C-MOVE responses.</p>
                     </li>
                     <li class="listitem">
                        <p>
                           <a id="para_18a61bf7-8148-44a6-8cf5-0c992cee0008" shape="rect"></a>The Query Information Model is unchanged, and the same unique, required and optional keys are equally applicable to both views, except that the values for the SERIES and IMAGE level queries will be different and will depend on the converted instance content.</p>
                     </li>
                     <li class="listitem">
                        <p>
                           <a id="para_c8163cef-dd0d-4f42-8316-e0904da9e52d" shape="rect"></a>The Query/Retrieve View is still required in an IMAGE or SERIES level request identifier, even though the requested unique key(s) are unambiguous.</p>
                     </li>
                  </ol>
               </div>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_C.4.2.3.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="sect_C.4.2.3.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_C.4.3.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">C.4.2.3 C-MOVE SCP Behavior </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.4.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> C.4.3 C-GET Operation</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.4 2024b - Service Class Specifications</span>
            </th>
         </tr>
      </table>
   </body>
</html>
