<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>9.3 DICOM Upper Layer Protocol for TCP/IP Data Units Structure</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.8.html" title="PS3.8" />
      <link rel="up" href="chapter_9.html" title="9 DICOM Upper Layer Protocol for TCP/IP" />
      <link rel="prev" href="sect_9.2.3.html" title="9.2.3 DICOM Upper Layer Protocol for TCP/IP State Transition Table" />
      <link rel="next" href="sect_9.3.2.html" title="9.3.2 A-ASSOCIATE-RQ PDU Structure" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.8 - Network Communication Support for Message Exchange</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">9.3 DICOM Upper Layer Protocol for TCP/IP Data Units Structure <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part08/sect_9.3.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_9.2.3.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">9 DICOM Upper Layer Protocol for TCP/IP</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_9.3.2.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.8.html" shape="rect">PS3.8</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_9.html" shape="rect">DICOM Upper Layer Protocol for TCP/IP</a>
         </span> &gt; <span class="breadcrumb-node">DICOM Upper Layer Protocol for TCP/IP Data Units Structure</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both">
                     <a id="sect_9.3" shape="rect"></a>9.3 DICOM Upper Layer Protocol for TCP/IP Data Units Structure</h2>
               </div>
            </div>
         </div>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title">
                        <a id="sect_9.3.1" shape="rect"></a>9.3.1 General</h3>
                  </div>
               </div>
            </div>
            <p>
               <a id="para_c8f11eae-6f24-4568-afcf-d7a815a6e967" shape="rect"></a>The Protocol Data Units (PDUs) are the message formats exchanged between peer entities within a layer. A PDU shall consist of protocol control information and user data. PDUs are constructed by mandatory fixed fields followed by optional variable fields that contain one or more items and/or sub-items.</p>
            <p>
               <a id="para_e71a4493-905a-4dca-be85-09ceddef1b56" shape="rect"></a>Items of unrecognized types shall be ignored and skipped. Items shall appear in an increasing order of their item types. Several instances of the same item shall be acceptable or shall not as specified by each item.</p>
            <p>
               <a id="para_1cdc084d-670a-46f9-8c1a-83738a760350" shape="rect"></a>The DICOM UL protocol consists of seven Protocol Data Units:</p>
            <div class="orderedlist">
               <ol class="orderedlist" type="a">
                  <li class="listitem">
                     <p>
                        <a id="para_ca2b0662-b8c8-41ef-8ff4-d768590e7333" shape="rect"></a>A-ASSOCIATE-RQ PDU</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_501252b2-9012-404d-96ba-4847041a2268" shape="rect"></a>A-ASSOCIATE-AC PDU</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_0d421bab-bdf5-431f-92e3-3b9fc1864cbd" shape="rect"></a>A-ASSOCIATE-RJ PDU</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_5cf23e18-6a18-42f0-a280-fe7a729aa4d0" shape="rect"></a>P-DATA-TF PDU</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_7231c320-bd18-45b2-9cf7-130289032332" shape="rect"></a>A-RELEASE-RQ PDU</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_890bcee5-4627-45fe-948f-9bf35605ee1a" shape="rect"></a>A-RELEASE-RP PDU</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_256653f6-58de-47a1-b6ef-becceb417551" shape="rect"></a>A-ABORT PDU</p>
                  </li>
               </ol>
            </div>
            <p>
               <a id="para_51952932-269f-469f-8d74-6c981dcffa35" shape="rect"></a>The encoding of the DICOM UL PDUs is defined as follows (Big Endian byte ordering) :</p>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
               <h3 class="title">Note</h3>
               <p>
                  <a id="para_a5dd0feb-bf93-45fb-b81e-c0122de684de" shape="rect"></a>The Big Endian byte ordering has been chosen for consistency with the OSI and TCP/IP environment. This pertains to the DICOM UL PDU headers only. The encoding of the PDV message fragments is defined by the Transfer Syntax negotiated at association establishment.</p>
            </div>
            <div class="orderedlist">
               <ol class="orderedlist" type="a">
                  <li class="listitem">
                     <p>
                        <a id="para_b5bd3255-2fd6-457d-a49b-174da208f4a8" shape="rect"></a>Each PDU type shall consist of one or more bytes that when represented, are numbered sequentially, with byte 1 being the lowest byte number.</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_9f0abd24-530c-4c8c-9c1a-3c1cc88785c9" shape="rect"></a>Each byte within the PDU shall consist of eight bits that, when represented, are numbered 7 to 0, where bit 0 is the low order bit.</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_8e480fb5-1b15-46b5-86b9-b4fa818ca2d5" shape="rect"></a>When consecutive bytes are used to represent a string of characters, the lowest byte numbers represent the first character.</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_eece2ee7-2f11-43a2-9738-6b8f9c70665c" shape="rect"></a>When consecutive bytes are used to represent a binary number, the lower byte number has the most significant value.</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_12508e1b-14ec-4b04-9c6b-28e79a11276e" shape="rect"></a>The lowest byte number is placed first in the transport service data flow.</p>
                  </li>
                  <li class="listitem">
                     <p>
                        <a id="para_858bf53b-4b30-4c8f-bfc8-03a1be78b582" shape="rect"></a>An overview of the PDUs is shown in <a class="xref" href="sect_9.3.html#figure_9-1" title="Figure 9-1. Protocol Data Units Structure and Encoding" shape="rect">Figure 9-1</a> and <a class="xref" href="sect_9.3.html#figure_9-2" title="Figure 9-2. Protocol Data Units Structure and Encoding" shape="rect">Figure 9-2</a>. The detailed structure of each PDU is specified in the following sections.</p>
                  </li>
               </ol>
            </div>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
               <h3 class="title">Note</h3>
               <p>
                  <a id="para_0ac8dd15-f2f2-4c7b-86c7-85499c72f715" shape="rect"></a>A number of parameters defined in the UL Service are not reflected in these PDUs (e.g., service parameters, fixed values, values not used by DICOM Application Entities.)</p>
            </div>
            <p>
               <a id="para_1c856036-977b-4efc-a169-1379f6c04005" shape="rect"></a>
                    </p>
            <div class="figure">
               <a id="figure_9-1" shape="rect"></a>
               <div class="figure-contents">
                  <div class="mediaobject">
                     <img src="figures/PS3.8_9-1.svg" alt="Protocol Data Units Structure and Encoding" />
                  </div>
               </div>
               <p class="title">
                  <strong>Figure 9-1. Protocol Data Units Structure and Encoding</strong>
               </p>
            </div>
            <p>
               <br class="figure-break" clear="none" />
                </p>
            <p>
               <a id="para_996e699b-e0ba-4fe6-96b5-375d40aa4e31" shape="rect"></a>
                    </p>
            <div class="figure">
               <a id="figure_9-2" shape="rect"></a>
               <div class="figure-contents">
                  <div class="mediaobject">
                     <img src="figures/PS3.8_9-2.svg" alt="Protocol Data Units Structure and Encoding" />
                  </div>
               </div>
               <p class="title">
                  <strong>Figure 9-2. Protocol Data Units Structure and Encoding</strong>
               </p>
            </div>
            <p>
               <br class="figure-break" clear="none" />
                </p>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_9.2.3.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="chapter_9.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_9.3.2.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">9.2.3 DICOM Upper Layer Protocol for TCP/IP State Transition Table </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.8.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> 9.3.2 A-ASSOCIATE-RQ PDU Structure</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.8 - Network Communication Support for Message Exchange</span>
            </th>
         </tr>
      </table>
   </body>
</html>
