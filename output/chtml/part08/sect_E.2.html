<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>E.2 Message Control Header Encoding</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.8.html" title="PS3.8" />
      <link rel="up" href="chapter_E.html" title="E Usage of the P-DATA Service By the DICOM Application Entity (Normative)" />
      <link rel="prev" href="chapter_E.html" title="E Usage of the P-DATA Service By the DICOM Application Entity (Normative)" />
      <link rel="next" href="chapter_F.html" title="F DICOM UL Encoding Rules for Application Contexts, Abstract Syntaxes, Transfer Syntaxes (Normative)" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.8 - Network Communication Support for Message Exchange</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">E.2 Message Control Header Encoding <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part08/sect_E.2.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="chapter_E.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">E Usage of the P-DATA Service By the DICOM Application Entity (Normative)</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="chapter_F.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.8.html" shape="rect">PS3.8</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_E.html" shape="rect">Usage of the P-DATA Service By the DICOM Application Entity (Normative)</a>
         </span> &gt; <span class="breadcrumb-node">Message Control Header Encoding</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both">
                     <a id="sect_E.2" shape="rect"></a>E.2 Message Control Header Encoding</h2>
               </div>
            </div>
         </div>
         <p>
            <a id="para_8e3ea471-81c2-4938-8899-ef6fc2b2b226" shape="rect"></a>The Message Control Header is located in front of each DICOM message fragment (see <a class="xref" href="sect_E.2.html#figure_E.2-1" title="Figure E.2-1. Presentation Data Value and the Message Control Header" shape="rect">Figure E.2-1</a>). Its presence is mandatory for all DICOM Abstract Syntaxes (see <a class="xref" href="chapter_B.html" title="B Abstract and Transfer Syntaxes (Informative)" shape="rect">Annex B</a> for further discussion on Abstract Syntaxes).</p>
         <p>
            <a id="para_8ba4fa18-849b-45cb-89ca-67721af09298" shape="rect"></a>The Message Control Header shall be made of one byte with the least significant bit (bit 0) taking one of the following values:</p>
         <div class="orderedlist">
            <ol class="orderedlist" type="a">
               <li class="listitem">
                  <p>
                     <a id="para_bcb9391f-93d0-4ebc-a738-3a64cc7649fe" shape="rect"></a>If bit 0 is set to 1, the following fragment shall contain Message Command information.</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_e51cb950-9333-4b4e-9377-90d92dc6262c" shape="rect"></a>If bit 0 is set to 0, the following fragment shall contain Message Data Set information.</p>
               </li>
            </ol>
         </div>
         <p>
            <a id="para_19de097e-e83d-433f-8358-d85105e0c4ed" shape="rect"></a>The next least significant bit (bit 1) shall be defined by the following rules:</p>
         <div class="orderedlist">
            <ol class="orderedlist" type="a">
               <li class="listitem">
                  <p>
                     <a id="para_0cbe3b5a-b713-45de-ad59-c84793b3c0ac" shape="rect"></a>If bit 1 is set to 1, the following fragment shall contain the last fragment of a Message Data Set or of a Message Command.</p>
               </li>
               <li class="listitem">
                  <p>
                     <a id="para_4768de9a-178f-4083-b970-2eed7a1a2bb5" shape="rect"></a>If bit 1 is set to 0, the following fragment does not contain the last fragment of a Message Data Set or of a Message Command.</p>
               </li>
            </ol>
         </div>
         <p>
            <a id="para_b9c8dd2e-0aca-43e7-b72a-5aec6966270d" shape="rect"></a>Bits 2 through 7 are always set to 0 by the sender and never checked by the receiver.</p>
         <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
            <h3 class="title">Note</h3>
            <p>
               <a id="para_1c3c51ac-ea6a-4d95-a7e2-dff728651afb" shape="rect"></a>The Message Control Header, in the Transport data flow, is the 1st byte in each PDV. The Transfer Syntax, negotiated at association establishment, defines the encoding for the Command/Data fragment.</p>
         </div>
         <p>
            <a id="para_c1a6e865-5b77-46cd-8c38-8282933e1831" shape="rect"></a>
         </p>
         <div class="figure">
            <a id="figure_E.2-1" shape="rect"></a>
            <div class="figure-contents">
               <div class="mediaobject">
                  <img src="figures/PS3.8_E.2-1.svg" alt="Presentation Data Value and the Message Control Header" />
               </div>
            </div>
            <p class="title">
               <strong>Figure E.2-1. Presentation Data Value and the Message Control Header</strong>
            </p>
         </div>
         <p>
            <br class="figure-break" clear="none" />
         </p>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="chapter_E.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="chapter_E.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="chapter_F.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">E Usage of the P-DATA Service By the DICOM Application Entity (Normative) </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.8.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> F DICOM UL Encoding Rules for Application Contexts, Abstract Syntaxes, Transfer Syntaxes (Normative)</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.8 - Network Communication Support for Message Exchange</span>
            </th>
         </tr>
      </table>
   </body>
</html>
