<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>11.10 Subscribe Transaction</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.18.html" title="PS3.18" />
      <link rel="up" href="chapter_11.html" title="11 Worklist Service and Resources" />
      <link rel="prev" href="sect_11.9.3.3.html" title="11.9.3.3 Response Payload" />
      <link rel="next" href="sect_11.10.2.html" title="11.10.2 Behavior" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.18 - Web Services</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">11.10 Subscribe Transaction <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part18/sect_11.10.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_11.9.3.3.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">11 Worklist Service and Resources</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_11.10.2.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.18.html" shape="rect">PS3.18</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_11.html" shape="rect">Worklist Service and Resources</a>
         </span> &gt; <span class="breadcrumb-node">Subscribe Transaction</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both">
                     <a id="sect_11.10" shape="rect"></a>11.10 Subscribe Transaction</h2>
               </div>
            </div>
         </div>
         <p>
            <a id="para_45813873-f4c3-4524-ae1a-df276f7d6b4c" shape="rect"></a>This transaction creates a Subscription to a Worklist or Workitem resource. It corresponds to the UPS DIMSE N-ACTION operation "Subscribe to Receive UPS Event Reports".</p>
         <p>
            <a id="para_43d1d811-5f40-4332-8dfe-3cb3426d2bfc" shape="rect"></a>Once a Subscription has been created the user agent will receive notifications containing Event Reports for events associated with the Subscription's resource. To receive the notifications generated by Subscriptions, the user agent must have first opened a Notification Connection between itself and the origin server using the Open Notification Connection transaction; see <a class="xref" href="sect_8.10.4.html" title="8.10.4 Open Notification Connection Transaction" shape="rect">Section 8.10.4</a>.</p>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title">
                        <a id="sect_11.10.1" shape="rect"></a>11.10.1 Request</h3>
                  </div>
               </div>
            </div>
            <p>
               <a id="para_16ed568c-cc76-4373-a564-65d5a1b8f508" shape="rect"></a>The request shall have the following syntax:</p>
            <pre class="programlisting" xml:space="preserve">POST SP /workitems/{resource}/subscribers/{aetitle}{?deletionlock}{&amp;filter} SP version CRLF</pre>
            <pre class="programlisting" xml:space="preserve">*(header-field CRLF)</pre>
            <pre class="programlisting" xml:space="preserve">CRLF</pre>
            <p>
               <a id="para_5f4cc0ae-305e-4252-adf1-907ea5279e9c" shape="rect"></a>The user agent shall conform to the SCU behavior specified in <a href="../part04/sect_CC.2.3.2.html" class="olink" shape="rect">Section CC.2.3.2 “Service Class User Behavior” in PS3.4</a>.</p>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_11.10.1.1" shape="rect"></a>11.10.1.1 Target Resources</h4>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_0601fb8f-913d-47c3-a681-aa1c484a5763" shape="rect"></a>The origin server shall support the resources in <a class="xref" href="sect_11.10.html#table_11.10.1-1" title="Table 11.10.1-1. Subscribe Transaction Resources" shape="rect">Table 11.10.1-1</a>.</p>
               <div class="table">
                  <a id="table_11.10.1-1" shape="rect"></a>
                  <p class="title">
                     <strong>Table 11.10.1-1. Subscribe Transaction Resources</strong>
                  </p>
                  <div class="table-contents">
                     <table frame="box" rules="all">
                        <thead>
                           <tr valign="top">
                              <th align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_ea9016f3-9dc1-4b68-81cd-a5fecec57515" shape="rect"></a>Resource</p>
                                </th>
                              <th align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_9d98d30b-8ac2-4fcd-be1f-2053c40bdfa9" shape="rect"></a>URI Template</p>
                                </th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_ba569e44-098c-4157-9863-e1b608a2f63a" shape="rect"></a>Worklist Subscription</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_a4d100e1-6957-40d4-b417-cf1bbeecd88d" shape="rect"></a>/workitems/1.2.840.10008.5.1.4.34.5/subscribers/{aetitle}</p>
                                </td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_f6f1a10f-475c-473d-9c49-81385883a359" shape="rect"></a>Filtered Worklist Subscription</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_6dd03d1d-931d-4b1f-be55-6ae807ad7fc3" shape="rect"></a>/workitems/1.2.840.10008.5.1.4.34.5.1/subscribers/{aetitle}</p>
                                </td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_2800afd3-8729-43a6-8459-e988e9146ad3" shape="rect"></a>Workitem Subscription</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_8e772b5f-b73d-43ef-bd60-ef7e5dfd9da3" shape="rect"></a>/workitems/{workitem}/subscribers/{aetitle}</p>
                                </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
               </div>
               <br class="table-break" clear="none" />
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_11.10.1.2" shape="rect"></a>11.10.1.2 Query Parameters</h4>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_46697488-aecb-4b75-ae48-a206e1e12436" shape="rect"></a>The origin server shall support Query Parameters as required in <a class="xref" href="sect_11.10.html#table_11.10.1-2" title="Table 11.10.1-2. uery Parameters by Resource" shape="rect">Table 11.10.1-2</a>.</p>
               <p>
                  <a id="para_3ddf3651-356b-46cf-a580-710d1a8930e1" shape="rect"></a>The user agent shall supply in the request Query Parameters as required in <a class="xref" href="sect_11.10.html#table_11.10.1-2" title="Table 11.10.1-2. uery Parameters by Resource" shape="rect">Table 11.10.1-2</a>.</p>
               <div class="table">
                  <a id="table_11.10.1-2" shape="rect"></a>
                  <p class="title">
                     <strong>Table 11.10.1-2. uery Parameters by Resource</strong>
                  </p>
                  <div class="table-contents">
                     <table frame="box" rules="all">
                        <thead>
                           <tr valign="top">
                              <th align="center" rowspan="2" colspan="1">
                                    <p>
                                    <a id="para_58c757d8-772c-4404-96ea-f9f4949a061e" shape="rect"></a>Key</p>
                                </th>
                              <th align="center" rowspan="2" colspan="1">
                                    <p>
                                    <a id="para_12dda333-7517-4539-825c-e3e5ae24f1e5" shape="rect"></a>Value</p>
                                </th>
                              <th align="center" rowspan="2" colspan="1">
                                    <p>
                                    <a id="para_afbba0ed-83fb-4fc3-ac6f-7de44514b8ee" shape="rect"></a>Resource</p>
                                </th>
                              <th align="center" colspan="2" rowspan="1">
                                    <p>
                                    <a id="para_4ce4a5df-e11c-45f1-9bff-06a9800d3f6b" shape="rect"></a>Usage</p>
                                </th>
                              <th align="center" rowspan="2" colspan="1">
                                    <p>
                                    <a id="para_7a7810b7-fb4b-4662-97f2-726ba694e9c3" shape="rect"></a>Description</p>
                                </th>
                           </tr>
                           <tr valign="top">
                              <th align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_459d4f7e-d8bb-431d-95cc-07d7cf2257ff" shape="rect"></a>User Agent</p>
                                </th>
                              <th align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_fe7d0908-e4ff-4378-bca0-0353a1f43c2f" shape="rect"></a>Origin Server</p>
                                </th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_470814e5-7aae-48b6-aab0-049b86176aaf" shape="rect"></a>accept</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_b500be30-63b5-4c66-841f-6917263b3ee0" shape="rect"></a>media type</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_0db5fe51-902a-45ea-8f68-32e43066cfe6" shape="rect"></a>Worklist, Filtered Worklist, Workitem</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_f0f8b06e-b97a-4ac7-910d-7ac37d761592" shape="rect"></a>O</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_72ca53ff-6db9-4ec8-80db-d5564b3e04bc" shape="rect"></a>M</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1"></td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_f1b37a08-8ee5-4181-ab9e-8d7225766b6d" shape="rect"></a>charset</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_d843d830-2751-4f04-8c4e-22d30f5fb823" shape="rect"></a>charset</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_cdd65e17-39e1-4c91-9187-728b8bf1b304" shape="rect"></a>Worklist, Filtered Worklist, Workitem</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_ee510218-9f8d-4063-8c3d-de24ea394bca" shape="rect"></a>O</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_e78332f5-02fa-4736-82ac-08a33fba19e4" shape="rect"></a>M</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1"></td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_7cc10f81-339f-4d8f-8932-219febd441a0" shape="rect"></a>deletionlock</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_ecbbb463-d4fe-4364-b2b0-43f81bb91b84" shape="rect"></a>true/false</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_96609d47-8544-4833-bf7e-b7565e969611" shape="rect"></a>Worklist, Filtered Worklist, Workitem</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_cf109001-c3a1-4b62-abb3-bd5e20ddfe37" shape="rect"></a>O</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_b0045ee3-b496-44d8-85d3-72d76244ba76" shape="rect"></a>M</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1"></td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_9ea688c5-7dc9-4680-9c77-a225798edf84" shape="rect"></a>filter</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_b45cd38a-a523-498c-9a44-584fbf9d223d" shape="rect"></a>1#(attribute"=" value)</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_f9c82269-b32e-4910-b688-bf6518ab4302" shape="rect"></a>Filtered Worklist</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_5ceb299f-8568-43c8-8328-b36fc4de8f21" shape="rect"></a>C</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_9ec81102-46f3-47cc-964e-5d8e8d37af7d" shape="rect"></a>M</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_604b7aa8-ecf8-44f7-926d-083204a82508" shape="rect"></a>Shall be present if the Target Resource is the Filtered Worklist.</p>
                                </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
               </div>
               <br class="table-break" clear="none" />
               <p>
                  <a id="para_ceb171d7-c4f8-40db-82ae-84c513a2ec0f" shape="rect"></a>The Deletion Lock Query Parameter has the following syntax:</p>
               <pre class="programlisting" xml:space="preserve">deletionlock = "deletionlock=" true / false</pre>
               <p>
                  <a id="para_8fc16134-1699-462b-a451-fb48bb540e92" shape="rect"></a>If present with a value of true the Subscription will be created with a Deletion Lock (see <a href="../part04/sect_CC.2.3.html#sect_CC.2.3.1" class="olink" shape="rect">Section CC.2.3.1 “Action Information” in PS3.4</a>).</p>
               <p>
                  <a id="para_2ffbdf88-9dc8-4719-ac0a-0d52fcecd17e" shape="rect"></a>The Filter Query Parameter has the following syntax:</p>
               <pre class="programlisting" xml:space="preserve">filter = 1#(attribute "=" value)</pre>
               <p>
                  <a id="para_a5c352a0-21d3-493f-889e-cd6bf2f7f7b7" shape="rect"></a>It is a comma-separated list of one or more matching keys (attribute/value pairs). A Workitem Subscription will be created for any existing and future Workitem that matches the attribute/value pairs of the filter. The valid Attributes for this Query Parameter are defined by the UPS IOD (see <a href="../part03/sect_B.26.2.html" class="olink" shape="rect">Section B.26.2 “IOD Modules” in PS3.3</a>).</p>
               <p>
                  <a id="para_c299922a-81c8-42c9-8aca-3e290b812c67" shape="rect"></a>See <a class="xref" href="sect_8.3.4.html#sect_8.3.4.1" title="8.3.4.1 Attribute Matching" shape="rect">Section 8.3.4.1</a> for the syntax of matching keys.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_11.10.1.3" shape="rect"></a>11.10.1.3 Request Header Fields</h4>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_6e023002-cd7c-4876-aaa3-4b340b508848" shape="rect"></a>The request has no mandatory header fields. See <a class="xref" href="sect_8.4.html" title="8.4 Header Fields" shape="rect">Section 8.4</a>.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_11.10.1.4" shape="rect"></a>11.10.1.4 Request Payload</h4>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_2537b541-f5b0-4c8a-a760-ab4e827ed1c8" shape="rect"></a>The request has no payload.</p>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_11.9.3.3.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="chapter_11.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_11.10.2.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">11.9.3.3 Response Payload </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.18.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> 11.10.2 Behavior</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.18 - Web Services</span>
            </th>
         </tr>
      </table>
   </body>
</html>
