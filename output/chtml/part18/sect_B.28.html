<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>B.28 Request Storage Commitment For Multiple Instances With XML and Referenced Study and Series Instance UIDs</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.18.html" title="PS3.18" />
      <link rel="up" href="chapter_B.html" title="B Examples (Informative)" />
      <link rel="prev" href="sect_B.27.html" title="B.27 Request Storage Commitment For Multiple Instances With JSON" />
      <link rel="next" href="sect_B.29.html" title="B.29 Request Storage Commitment With HTTP Multipart Request For Instances From Multiple Studies" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.18 2024b - Web Services</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">B.28 Request Storage Commitment For Multiple Instances With XML and Referenced Study and Series Instance UIDs <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part18/sect_B.28.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_B.27.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">B Examples (Informative)</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_B.29.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.18.html" shape="rect">PS3.18</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_B.html" shape="rect">Examples (Informative)</a>
         </span> &gt; <span class="breadcrumb-node">Request Storage Commitment For Multiple Instances With XML and Referenced Study and Series Instance UIDs</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both">
                     <a id="sect_B.28" shape="rect"></a>B.28 Request Storage Commitment For Multiple Instances With XML and Referenced Study and Series Instance UIDs</h2>
               </div>
            </div>
         </div>
         <p>
            <a id="para_c988cdcf-248b-4516-969f-2f55008ee36f" shape="rect"></a>The intent of this example is the same as presented in <a class="xref" href="sect_B.27.html" title="B.27 Request Storage Commitment For Multiple Instances With JSON" shape="rect">Section B.27</a>,
                namely the scenario to request storage commitment for two SOP Instances, where for one it succeeds, and for one it fails.
                The differences are in the synchronicity (in this case it is synchronous), the syntax (in this case using XML),
                and the structure (in this case using the hierarchical study-series-SOP Class-instance structure, starting with a Referenced Study Sequence (0008,1110);
                see <a class="xref" href="chapter_J.html#table_J.1-1" title="Table J.1-1.  Storage Commitment Request Module" shape="rect">Table J.1-1</a> for more details on this structure).</p>
         <p>
            <a id="para_d9dfdbde-c17f-4c8d-b8e9-e2e98adcd245" shape="rect"></a>Step 1:</p>
         <pre class="programlisting" xml:space="preserve">POST /radiology/commitment-requests/1.1.99999.20220901 HTTP/1.1
Host: www.hospital-stmarco
Content-Type: application/dicom+xml

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;NativeDicomModel&gt;
  &lt;DicomAttribute Tag="00081110" VR="SQ" Keyword="ReferencedStudySequence"&gt;
  &lt;Item number="1"&gt;
    &lt;DicomAttribute Tag="0020000D" VR="UI" Keyword="StudyInstanceUID"&gt;
      &lt;Value number="1"&gt;1.2.250.1.59.40211.12345678.678910&lt;/Value&gt;
    &lt;/DicomAttribute&gt;
    &lt;DicomAttribute Tag="00081115" VR="SQ" Keyword="ReferencedSeriesSequence"&gt;
    &lt;Item number="1"&gt;
      &lt;DicomAttribute Tag="0020000E" VR="UI" Keyword="SeriesInstanceUID"&gt;
        &lt;Value number="1"&gt;1.2.250.1.59.40211.789001276.14556172.67789&lt;/Value&gt;
      &lt;/DicomAttribute&gt;
      &lt;DicomAttribute Tag="00081112" VR="SQ" Keyword="ReferencedInstancesBySOPClassSequence"&gt;
      &lt;Item number="1"&gt;
        &lt;DicomAttribute Tag="00081150" VR="UI" Keyword="ReferencedSOPClassUID"&gt;
          &lt;Value number="1"&gt;1.2.840.10008.5.1.4.1.1.2&lt;/Value&gt;
        &lt;/DicomAttribute&gt;
        &lt;DicomAttribute Tag="0008114A" VR="SQ" Keyword="ReferencedInstanceSequence"&gt;
        &lt;Item number="1"&gt;
          &lt;DicomAttribute Tag="00081155" VR="UI" Keyword="ReferencedSOPInstanceUID"&gt;
            &lt;Value number="1"&gt;1.3.12.2.1107.5.99.3.30000012031310075961300000059&lt;/Value&gt;
          &lt;/DicomAttribute&gt;
        &lt;/Item&gt;
        &lt;Item number="2"&gt;
          &lt;DicomAttribute Tag="00081155" VR="UI" Keyword="ReferencedSOPInstanceUID"&gt;
            &lt;Value number="1"&gt;1.3.12.2.1107.5.99.3.30000012031310075961300000060&lt;/Value&gt;
          &lt;/DicomAttribute&gt;
        &lt;/Item&gt;
        &lt;/DicomAttribute&gt;
      &lt;/Item&gt;
      &lt;/DicomAttribute&gt;
    &lt;/Item&gt;
    &lt;/DicomAttribute&gt;
  &lt;/Item&gt;
  &lt;/DicomAttribute&gt;
&lt;/NativeDicomModel&gt;
</pre>
         <p>
            <a id="para_2876ef5f-091f-4e08-a7c1-f5c3d6901ca0" shape="rect"></a>In the above, the applicable Study is identified by its Study Instance UID (0020,000D) with value 1.2.250.1.59.40211.12345678.678910.
                The applicable Series is identified by its Series Instance UID (0020,000E) with value 1.2.250.1.59.40211.789001276.14556172.67789.
                SOP Class UIDs and SOP Instance UIDs are the same as the example given in <a class="xref" href="sect_B.27.html" title="B.27 Request Storage Commitment For Multiple Instances With JSON" shape="rect">Section B.27</a>.</p>
         <p>
            <a id="para_bd161cbc-7a75-45c6-96e7-567de5678129" shape="rect"></a>Step 2:</p>
         <pre class="programlisting" xml:space="preserve">HTTP/1.1 200 OK
Content-Length: 2910
Content-Type: application/dicom+xml

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;NativeDicomModel&gt;
  &lt;DicomAttribute Tag="00081110" VR="SQ" Keyword="ReferencedStudySequence"&gt;
  &lt;Item number="1"&gt;
    &lt;DicomAttribute Tag="0020000D" VR="UI" Keyword="StudyInstanceUID"&gt;
      &lt;Value number="1"&gt;1.2.250.1.59.40211.12345678.678910&lt;/Value&gt;
    &lt;/DicomAttribute&gt;
    &lt;DicomAttribute Tag="00081115" VR="SQ" Keyword="ReferencedSeriesSequence"&gt;
    &lt;Item number="1"&gt;
      &lt;DicomAttribute Tag="0020000E" VR="UI" Keyword="SeriesInstanceUID"&gt;
        &lt;Value number="1"&gt;1.2.250.1.59.40211.789001276.14556172.67789&lt;/Value&gt;
      &lt;/DicomAttribute&gt;
      &lt;DicomAttribute Tag="00081112" VR="SQ" Keyword="ReferencedInstancesBySOPClassSequence"&gt;
      &lt;Item number="1"&gt;
        &lt;DicomAttribute Tag="00081150" VR="UI" Keyword="ReferencedSOPClassUID"&gt;
          &lt;Value number="1"&gt;1.2.840.10008.5.1.4.1.1.2&lt;/Value&gt;
        &lt;/DicomAttribute&gt;
        &lt;DicomAttribute Tag="0008114A" VR="SQ" Keyword="ReferencedInstanceSequence"&gt;
        &lt;Item number="1"&gt;
          &lt;DicomAttribute Tag="00081155" VR="UI" Keyword="ReferencedSOPInstanceUID"&gt;
            &lt;Value number="1"&gt;1.3.12.2.1107.5.99.3.30000012031310075961300000059&lt;/Value&gt;
          &lt;/DicomAttribute&gt;
        &lt;/Item&gt;
        &lt;/DicomAttribute&gt;
      &lt;/Item&gt;
      &lt;/DicomAttribute&gt;
    &lt;/Item&gt;
    &lt;/DicomAttribute&gt;
  &lt;/Item&gt;
  &lt;/DicomAttribute&gt;
  &lt;DicomAttribute Tag="0008119B" VR="SQ" Keyword="FailedStudySequence"&gt;
  &lt;Item number="1"&gt;
    &lt;DicomAttribute Tag="0020000D" VR="UI" Keyword="StudyInstanceUID"&gt;
      &lt;Value number="1"&gt;1.2.250.1.59.40211.12345678.678910&lt;/Value&gt;
    &lt;/DicomAttribute&gt;
    &lt;DicomAttribute Tag="00081115" VR="SQ" Keyword="ReferencedSeriesSequence"&gt;
    &lt;Item number="1"&gt;
      &lt;DicomAttribute Tag="0020000E" VR="UI" Keyword="SeriesInstanceUID"&gt;
        &lt;Value number="1"&gt;1.2.250.1.59.40211.789001276.14556172.67789&lt;/Value&gt;
      &lt;/DicomAttribute&gt;
      &lt;DicomAttribute Tag="00081112" VR="SQ" Keyword="ReferencedInstancesBySOPClassSequence"&gt;
      &lt;Item number="1"&gt;
        &lt;DicomAttribute Tag="00081150" VR="UI" Keyword="ReferencedSOPClassUID"&gt;
          &lt;Value number="1"&gt;1.2.840.10008.5.1.4.1.1.2&lt;/Value&gt;
        &lt;/DicomAttribute&gt;
        &lt;DicomAttribute Tag="0008114A" VR="SQ" Keyword="ReferencedInstanceSequence"&gt;
        &lt;Item number="1"&gt;
          &lt;DicomAttribute Tag="00081155" VR="UI" Keyword="ReferencedSOPInstanceUID"&gt;
            &lt;Value number="1"&gt;1.3.12.2.1107.5.99.3.30000012031310075961300000060&lt;/Value&gt;
          &lt;/DicomAttribute&gt;
          &lt;DicomAttribute Tag="00081197" VR="UI" Keyword="FailureReason"&gt;
            &lt;Value number="1"&gt;274&lt;/Value&gt;
          &lt;/DicomAttribute&gt;
        &lt;/Item&gt;
        &lt;/DicomAttribute&gt;
      &lt;/Item&gt;
      &lt;/DicomAttribute&gt;
    &lt;/Item&gt;
    &lt;/DicomAttribute&gt;
  &lt;/Item&gt;
  &lt;/DicomAttribute&gt;
&lt;/NativeDicomModel&gt;
</pre>
         <p>
            <a id="para_af6f0232-caf3-4472-9fbc-4341ec39d1a5" shape="rect"></a>The Failed Study Sequence (0008,119B) has the same structure as the Referenced Study Sequence,
                except that it adds a Failure Reason (0008,1197) to each Referenced SOP Instance UID,
                indicating why the origin server could not commit to safely store that referenced SOP Instance.</p>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_B.27.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="chapter_B.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_B.29.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">B.27 Request Storage Commitment For Multiple Instances With JSON </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.18.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> B.29 Request Storage Commitment With HTTP Multipart Request For Instances From Multiple Studies</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.18 2024b - Web Services</span>
            </th>
         </tr>
      </table>
   </body>
</html>
