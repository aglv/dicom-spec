<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>8 Common Aspects of DICOM Web Services</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.18.html" title="PS3.18" />
      <link rel="up" href="PS3.18.html" title="PS3.18" />
      <link rel="prev" href="sect_7.2.3.html" title="7.2.3 Target URIs" />
      <link rel="next" href="sect_8.2.html" title="8.2 Target Resources" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.18 2024a - Web Services</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">8 Common Aspects of DICOM Web Services <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part18/chapter_8.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_7.2.3.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1"> </th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_8.2.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.18.html" shape="rect">PS3.18</a>
         </span> &gt; <span class="breadcrumb-node">Common Aspects of DICOM Web Services</span>
      </div>
      <div class="chapter">
         <div class="titlepage">
            <div>
               <div>
                  <h1 class="title">
                     <a id="chapter_8" shape="rect"></a>8 Common Aspects of DICOM Web Services</h1>
               </div>
            </div>
         </div>
         <p>
            <a id="para_d61cbed0-c881-4dd2-b005-28c5f4039cc5" shape="rect"></a>This section describes details and requirements that are common to all Web Services defined in this Part of the Standard.</p>
         <p>
            <a id="para_59c76335-6584-4906-9a51-da24b12cd691" shape="rect"></a>A user agent or origin server that implements a Service in this Part of the Standard shall conform to <a class="xref" href="chapter_8.html" title="8 Common Aspects of DICOM Web Services" shape="rect">Chapter 8</a> unless stated otherwise in the specification of that Service and its Transactions.</p>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both">
                        <a id="sect_8.1" shape="rect"></a>8.1 Transactions</h2>
                  </div>
               </div>
            </div>
            <p>
               <a id="para_2459bc04-1e0d-47c1-9e8d-0c243c4531c5" shape="rect"></a>Each transaction is composed of a request message and a response message, sometimes referred to as a request/response pair. When used in this Part of the Standard the term "request" means "request message", and "response" means "response message", unless clearly stated otherwise. <a class="xref" href="chapter_8.html#figure_8.1-1" title="Figure 8.1-1. Interaction Diagram for Transactions" shape="rect">Figure 8.1-1</a> is an interaction diagram that shows the message flow of a transaction. When it receives the request, the origin server processes it and returns a response.</p>
            <p>
               <a id="para_b17ea158-11a7-4c92-a717-31bca5de654c" shape="rect"></a>The request includes a method, the URI of the Target Resource, and header fields. It might also include Query Parameters and a payload.</p>
            <p>
               <a id="para_b09267f6-408a-493b-a708-c9337111a792" shape="rect"></a>The response includes a status code, a reason phrase, header fields, and might also include a payload.</p>
            <p>
               <a id="para_e61a730a-339b-45dd-bb68-50e1356181fc" shape="rect"></a>
                </p>
            <div class="figure">
               <a id="figure_8.1-1" shape="rect"></a>
               <div class="figure-contents">
                  <div class="mediaobject">
                     <img src="figures/PS3.18_8.1-1.svg" alt="Interaction Diagram for Transactions" />
                  </div>
               </div>
               <p class="title">
                  <strong>Figure 8.1-1. Interaction Diagram for Transactions</strong>
               </p>
            </div>
            <p>
               <br class="figure-break" clear="none" />
            </p>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="sect_8.1.1" shape="rect"></a>8.1.1 Request Message Syntax</h3>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_99d98e31-d8ca-426c-a8a2-9f2d570c5eab" shape="rect"></a>This Part of the Standard uses the ABNF defined in <a class="xref" href="chapter_5.html#sect_5.1" title="5.1 Message Syntax" shape="rect">Section 5.1</a> to define the syntax of transactions.</p>
               <p>
                  <a id="para_bbf8970d-0e11-4cb5-93fb-93718839afc0" shape="rect"></a>All Web Services API request messages have the following syntax:</p>
               <pre class="programlisting" xml:space="preserve">method SP target-uri SP version CRLF</pre>
               <pre class="programlisting" xml:space="preserve">*(header-field CRLF)</pre>
               <pre class="programlisting" xml:space="preserve">CRLF</pre>
               <pre class="programlisting" xml:space="preserve">[payload]</pre>
               <p>
                  <a id="para_946d601e-d4a0-4f00-82ff-8dac02416e9b" shape="rect"></a>Where</p>
               <div class="informaltable">
                  <table frame="void" rules="none">
                     <tbody>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                                <pre class="programlisting" xml:space="preserve">method = "CONNECT" / "DELETE" / "GET" / "HEAD" / "OPTIONS" / "POST" / "PUT"</pre>
                            </td>
                           <td align="left" rowspan="1" colspan="1">
                                <p>
                                 <a id="para_24ffe849-9cad-4a34-a95a-27d82a425b8a" shape="rect"></a>Each transaction defines the method it uses.</p>
                            </td>
                        </tr>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                                <pre class="programlisting" xml:space="preserve">SP= %x20</pre>
                            </td>
                           <td align="left" rowspan="1" colspan="1">
                                <p>
                                 <a id="para_62a9abc4-2074-41a7-b438-966491ea92c1" shape="rect"></a>The US-ASCII Space character</p>
                            </td>
                        </tr>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                                <pre class="programlisting" xml:space="preserve">target-uri = "/" {/resource} {?parameters*}</pre>
                            </td>
                           <td align="left" rowspan="1" colspan="1">
                                <p>
                                 <a id="para_72339490-74cc-41d8-b190-00c91da8e74e" shape="rect"></a>Each transaction defines a URI Template for the Target Resource. The template specifies the format of URIs that reference the Target Resource of a request. See <a class="xref" href="chapter_8.html#sect_8.1.1.2" title="8.1.1.2 Target Resource" shape="rect">Section 8.1.1.2</a>.</p>
                            </td>
                        </tr>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                                <pre class="programlisting" xml:space="preserve">version = ("HTTP" / "HTTPS") "/" ("1.1" / "2")</pre>
                            </td>
                           <td align="left" rowspan="1" colspan="1">
                                <p>
                                 <a id="para_ffc0d74f-4bb6-49f4-be54-1b7534e270a4" shape="rect"></a>The version of the HTTP protocol; one of "HTTP/1.1", "HTTP/2", "HTTPS/1.1", or "HTTPS/2".</p>
                            </td>
                        </tr>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                                <pre class="programlisting" xml:space="preserve">CRLF = %x0D.0A</pre>
                            </td>
                           <td align="left" rowspan="1" colspan="1">
                                <p>
                                 <a id="para_f45361d7-26d0-49c7-80eb-5cccec2284ad" shape="rect"></a>A US-ASCII carriage return (%x0D) followed by a linefeed (%x0A).</p>
                            </td>
                        </tr>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                                <pre class="programlisting" xml:space="preserve">*(header-field CRLF)</pre>
                            </td>
                           <td align="left" rowspan="1" colspan="1">
                                <p>
                                 <a id="para_e8811103-33e4-4625-93bb-52291fac3270" shape="rect"></a>Zero or more header fields each followed by a CRLF delimiter.</p>
                            </td>
                        </tr>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                                <pre class="programlisting" xml:space="preserve">[payload] = *OCTET / multipart-payload</pre>
                            </td>
                           <td align="left" rowspan="1" colspan="1">
                                <p>
                                 <a id="para_98f36c65-446d-4fa9-8bc0-ed1e6807ef24" shape="rect"></a>An optional payload containing zero or more 8-bit OCTETs.</p>
                            </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Note</h3>
                  <p>
                     <a id="para_cb4af3e8-25b4-4ac4-bb4c-38e22bece773" shape="rect"></a>The method, SP, version, CRLF, header-field, and payload are all HTTP productions from <a class="xref" href="chapter_2.html#biblio_RFC_7230" title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing" shape="rect">[<abbr class="abbrev">RFC7230</abbr>]</a>, and <a class="xref" href="chapter_2.html#biblio_RFC_7231" title="Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content" shape="rect">[<abbr class="abbrev">RFC7231</abbr>]</a>. The definitions are reproduced here for convenience.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_8.1.1.1" shape="rect"></a>8.1.1.1 Method</h4>
                        </div>
                     </div>
                  </div>
                  <p>
                     <a id="para_0d3eeef0-71fe-4d39-a6a7-79c4bc6e00ae" shape="rect"></a>The request method is one of the HTTP methods, such as CONNECT, DELETE, GET, HEAD, OPTIONS, POST, PUT. See <a class="xref" href="chapter_2.html#biblio_RFC_7230" title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing" shape="rect">[<abbr class="abbrev">RFC7230</abbr>]</a>
                        <a class="link" href="http://tools.ietf.org/html/rfc7230#section-4" target="_top" shape="rect">Section 4</a>.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_8.1.1.2" shape="rect"></a>8.1.1.2 Target Resource</h4>
                        </div>
                     </div>
                  </div>
                  <p>
                     <a id="para_94a0d030-1c85-4ab8-b56b-7c3484fec485" shape="rect"></a>The Target Resource of a request is specified by the Target URI contained in the request message. See <a class="xref" href="sect_8.2.html" title="8.2 Target Resources" shape="rect">Section 8.2</a>.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_8.1.1.3" shape="rect"></a>8.1.1.3 Query Parameters</h4>
                        </div>
                     </div>
                  </div>
                  <p>
                     <a id="para_9f8f9b46-a551-4178-86ce-142f222d9170" shape="rect"></a>Query parameters are contained in the query component (see <a class="xref" href="chapter_2.html#biblio_RFC_3986" title="Uniform Resource Identifiers (URI): Generic Syntax" shape="rect">[<abbr class="abbrev">RFC3986</abbr>]</a>) of the URI. The user agent may use Query Parameters to supply parameters to the request. See <a class="xref" href="sect_8.3.html" title="8.3 Query Parameters" shape="rect">Section 8.3</a>.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_8.1.1.4" shape="rect"></a>8.1.1.4 Request Header Fields</h4>
                        </div>
                     </div>
                  </div>
                  <p>
                     <a id="para_0650be94-15ac-4652-b31f-e06ff3daa0a5" shape="rect"></a>Request header fields are used to specify metadata for the request. Most requests have one or more Content Negotiation (see <a class="xref" href="sect_8.4.html#sect_8.4.1" title="8.4.1 Content Negotiation Header Fields" shape="rect">Section 8.4.1</a>) header fields. If a request has a payload, the request will have the corresponding Content Representation (see <a class="xref" href="sect_8.4.2.html" title="8.4.2 Content Representation Header Fields" shape="rect">Section 8.4.2</a>) and Payload (see <a class="xref" href="sect_8.4.3.html" title="8.4.3 Payload Header Fields" shape="rect">Section 8.4.3</a>) header fields.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_8.1.1.5" shape="rect"></a>8.1.1.5 Request Payload</h4>
                        </div>
                     </div>
                  </div>
                  <p>
                     <a id="para_132242fb-d4d1-4f67-8464-4a8bd1aa4d81" shape="rect"></a>The payload of the request is an octet-stream containing the content of the message. See <a class="xref" href="sect_8.6.html" title="8.6 Payloads" shape="rect">Section 8.6</a>. The presence of a payload in a request is signaled by a Content-Length or Transfer-Encoding header field.</p>
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title">
                           <a id="sect_8.1.2" shape="rect"></a>8.1.2 Response Message Syntax</h3>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_78bcb611-c137-425f-a81b-d283fa831087" shape="rect"></a>The syntax of a response message is:</p>
               <pre class="programlisting" xml:space="preserve">version SP status-code SP reason-phrase CRLF</pre>
               <pre class="programlisting" xml:space="preserve">*(header-field CRLF)</pre>
               <pre class="programlisting" xml:space="preserve">CRLF</pre>
               <pre class="programlisting" xml:space="preserve">[payload]</pre>
               <p>
                  <a id="para_76f251df-c0a6-45f0-99ff-1ccbd11b11fd" shape="rect"></a>Where</p>
               <div class="informaltable">
                  <table frame="void" rules="none">
                     <tbody>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                                <pre class="programlisting" xml:space="preserve">status-code = 3DIGIT</pre>
                            </td>
                           <td align="left" rowspan="1" colspan="1">
                                <p>
                                 <a id="para_556e40f9-8f09-4156-ae58-98b0155f944f" shape="rect"></a>A three-digit code specifying the status of the response.</p>
                            </td>
                        </tr>
                        <tr valign="top">
                           <td align="left" rowspan="1" colspan="1">
                                <pre class="programlisting" xml:space="preserve">reason-phrase = *(HTAB / SP / VCHAR)</pre>
                            </td>
                           <td rowspan="1" colspan="1">
                                <p>
                                 <a id="para_5d0f6146-8145-48ad-b5bc-7c6f1ea70acf" shape="rect"></a>A human readable phrase that corresponds to the status. An implementation may define its own reason phrases. The reason-phrase syntax is slightly modified from that in <a class="xref" href="chapter_2.html#biblio_RFC_7230" title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing" shape="rect">[<abbr class="abbrev">RFC7230</abbr>]</a>; this Part of the Standard does not allow obsolete text (obs-text) in the reason-phrase.</p>
                            </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Note</h3>
                  <p>
                     <a id="para_d2f13103-9495-43a5-b13e-8454ac5c6c96" shape="rect"></a>The status-code production is from <a class="xref" href="chapter_2.html#biblio_RFC_7230" title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing" shape="rect">[<abbr class="abbrev">RFC7230</abbr>]</a>.</p>
               </div>
               <p>
                  <a id="para_cbb4c971-72ca-4d2f-be14-365452237777" shape="rect"></a>The origin server shall always return a response message.</p>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_8.1.2.1" shape="rect"></a>8.1.2.1 Status Codes</h4>
                        </div>
                     </div>
                  </div>
                  <p>
                     <a id="para_6c0375c9-6d37-4ca8-9a48-ee466d172397" shape="rect"></a>The response message shall always include a valid 3-digit status code. <a class="xref" href="sect_8.5.html" title="8.5 Status Codes" shape="rect">Section 8.5</a> defines the status codes used by transactions. IANA maintains a registry of HTTP Status codes. See <a class="xref" href="chapter_2.html#biblio_IANA_HTTPStatusCodeRegistry" title="Hypertext Transfer Protocol (HTTP) Status Code Registry" shape="rect">[<abbr class="abbrev">IANA HTTP Status Code Registry</abbr>]</a>.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_8.1.2.2" shape="rect"></a>8.1.2.2 Response Header Fields</h4>
                        </div>
                     </div>
                  </div>
                  <p>
                     <a id="para_398325a3-51b7-470c-a346-923bfa7d6c84" shape="rect"></a>Response header fields are used to specify metadata for the response. The response will have the Content Representation (see <a class="xref" href="sect_8.4.2.html" title="8.4.2 Content Representation Header Fields" shape="rect">Section 8.4.2</a>) and Payload (see <a class="xref" href="sect_8.4.3.html" title="8.4.3 Payload Header Fields" shape="rect">Section 8.4.3</a>) header fields that correspond to the contents of the payload.</p>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title">
                              <a id="sect_8.1.2.3" shape="rect"></a>8.1.2.3 Response Payload</h4>
                        </div>
                     </div>
                  </div>
                  <p>
                     <a id="para_5715af4e-c185-4a04-9f08-688a8290a755" shape="rect"></a>The payload of the response is an octet-stream containing one or more representations. See <a class="xref" href="sect_8.6.html" title="8.6 Payloads" shape="rect">Section 8.6</a>.</p>
                  <p>
                     <a id="para_91ba23b3-2cb0-4927-91ac-cee8d325fb1e" shape="rect"></a>A transaction typically defines two types of payloads for a response message: a success payload, and a failure payload.</p>
                  <p>
                     <a id="para_02ccacb3-d8d4-42ca-b5ea-b2256eec0755" shape="rect"></a>A failure response payload should contain a Status Report describing any failures, warnings, or other useful information.</p>
               </div>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_7.2.3.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1"> </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_8.2.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">7.2.3 Target URIs </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.18.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> 8.2 Target Resources</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.18 2024a - Web Services</span>
            </th>
         </tr>
      </table>
   </body>
</html>
