<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>10.5 Store Transaction</title>
      <link rel="stylesheet" type="text/css" href="dicom.css" />
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
      <link rel="home" href="PS3.18.html" title="PS3.18" />
      <link rel="up" href="chapter_10.html" title="10 Studies Service and Resources" />
      <link rel="prev" href="sect_10.4.5.html" title="10.4.5 Conformance Statement" />
      <link rel="next" href="sect_10.5.2.html" title="10.5.2 Behavior" />
      <style type="text/css"><![CDATA[
	p { font-size: 15px; }
      ]]></style>
   </head>
   <body>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.18 2024b - Web Services</span>
            </th>
         </tr>
      </table>
      <div xmlns="" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center" rowspan="1">10.5 Store Transaction <a accesskey="current" href="http://dicom.nema.org/medical/dicom/current/output/chtml/part18/sect_10.5.html" shape="rect">(Current)</a>
               </th>
            </tr>
            <tr>
               <td width="20%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_10.4.5.html" shape="rect">Prev</a> </td>
               <th width="60%" align="center" rowspan="1" colspan="1">10 Studies Service and Resources</th>
               <td width="20%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_10.5.2.html" shape="rect">Next</a>
               </td>
            </tr>
         </table>
         <hr />
      </div>
      <div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="breadcrumbs">
         <span class="breadcrumb-link">
            <a href="PS3.18.html" shape="rect">PS3.18</a>
         </span> &gt; <span class="breadcrumb-link">
            <a href="chapter_10.html" shape="rect">Studies Service and Resources</a>
         </span> &gt; <span class="breadcrumb-node">Store Transaction</span>
      </div>
      <div class="section">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both">
                     <a id="sect_10.5" shape="rect"></a>10.5 Store Transaction</h2>
               </div>
            </div>
         </div>
         <p>
            <a id="para_40161cb1-97f6-4696-99d6-6b8eb6aaf1df" shape="rect"></a>This transaction uses the POST method to Store representations of Studies, Series, and Instances contained in the request payload.</p>
         <p>
            <a id="para_cc3e872c-c6a1-48e7-8c44-c2762c21c5ae" shape="rect"></a>The Store transaction supports only DICOM resources. The resource can be supplied as a single Instance, or as separate Metadata and Bulkdata.</p>
         <div class="section">
            <div class="titlepage">
               <div>
                  <div>
                     <h3 class="title">
                        <a id="sect_10.5.1" shape="rect"></a>10.5.1 Request</h3>
                  </div>
               </div>
            </div>
            <p>
               <a id="para_1aa8d02d-fc5d-4823-8999-308ed9d12183" shape="rect"></a>The request shall have the following syntax:</p>
            <pre class="programlisting" xml:space="preserve">POST SP "/" {/resource} SP version CRLF</pre>
            <pre class="programlisting" xml:space="preserve">Accept: 1#media-type CRLF</pre>
            <pre class="programlisting" xml:space="preserve">Content-Type: dicom-media-type CRLF</pre>
            <pre class="programlisting" xml:space="preserve">(Content-Length: uint / Transfer-Encoding: encoding) CRLF</pre>
            <pre class="programlisting" xml:space="preserve">*(header-field CRLF)</pre>
            <pre class="programlisting" xml:space="preserve">CRLF</pre>
            <pre class="programlisting" xml:space="preserve">payload</pre>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_10.5.1.1" shape="rect"></a>10.5.1.1 Target Resources</h4>
                     </div>
                  </div>
               </div>
               <div class="section">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h5 class="title">
                              <a id="sect_10.5.1.1.1" shape="rect"></a>10.5.1.1.1 DICOM Resources</h5>
                        </div>
                     </div>
                  </div>
                  <p>
                     <a id="para_e226d61d-f9c9-4bd1-9760-789edb872eb4" shape="rect"></a>
                            <a class="xref" href="sect_10.5.html#table_10.5.1-1" title="Table 10.5.1-1. Store Transaction DICOM Resources" shape="rect">Table 10.5.1-1</a> defines the resources used to store Instances.</p>
                  <div class="table">
                     <a id="table_10.5.1-1" shape="rect"></a>
                     <p class="title">
                        <strong>Table 10.5.1-1. Store Transaction DICOM Resources</strong>
                     </p>
                     <div class="table-contents">
                        <table frame="box" rules="all">
                           <thead>
                              <tr valign="top">
                                 <th align="center" rowspan="1" colspan="1">
                                        <p>
                                       <a id="para_8a8e5ed3-e90c-461d-bc7e-d189338aa3d3" shape="rect"></a>Resource</p>
                                    </th>
                                 <th align="center" rowspan="1" colspan="1">
                                        <p>
                                       <a id="para_a67a0f60-e2db-4c74-9fdd-8f5a0dc5b700" shape="rect"></a>URI Template</p>
                                    </th>
                                 <th align="center" rowspan="1" colspan="1">
                                        <p>
                                       <a id="para_c8a2186d-6ba6-4a81-9fd6-f5a542c03c2f" shape="rect"></a>Description</p>
                                    </th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                        <p>
                                       <a id="para_f3d3dc73-d19f-48ee-a4eb-72d2b2f91633" shape="rect"></a>Studies</p>
                                    </td>
                                 <td align="left" rowspan="1" colspan="1">
                                        <pre class="programlisting" xml:space="preserve">/studies</pre>
                                    </td>
                                 <td align="left" rowspan="1" colspan="1">
                                        <p>
                                       <a id="para_c290c0dc-d139-4ca2-8908-89755f7dfb83" shape="rect"></a>Stores a set of representations that may have different Study Instance UIDs.</p>
                                    </td>
                              </tr>
                              <tr valign="top">
                                 <td align="left" rowspan="1" colspan="1">
                                        <p>
                                       <a id="para_3c7fc4fb-51a1-4e89-bb15-bddfdad40c89" shape="rect"></a>Study</p>
                                    </td>
                                 <td align="left" rowspan="1" colspan="1">
                                        <pre class="programlisting" xml:space="preserve">/studies/{study}</pre>
                                    </td>
                                 <td align="left" rowspan="1" colspan="1">
                                        <p>
                                       <a id="para_781efc69-d3a4-4c38-ac82-90bb457ac719" shape="rect"></a>Stores a set of representations that belong to the same Study, i.e., each representation shall have the same Study Instance UID.</p>
                                    </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </div>
                  <br class="table-break" clear="none" />
               </div>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_10.5.1.2" shape="rect"></a>10.5.1.2 Query Parameters</h4>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_af32e118-496f-4b98-ac9c-96cc553c1477" shape="rect"></a>The Store transaction has no Query Parameters.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_10.5.1.3" shape="rect"></a>10.5.1.3 Request Header Fields</h4>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_7922401a-2963-4a8c-bb7c-9f4cf5049121" shape="rect"></a>The origin server shall support Header Fields as required in <a class="xref" href="sect_10.5.html#table_10.5.1-2" title="Table 10.5.1-2. Request Header Fields" shape="rect">Table 10.5.1-2</a>.</p>
               <p>
                  <a id="para_75785605-aaca-42c1-9a65-88de92866819" shape="rect"></a>The user agent shall supply in the request Header Fields as required in <a class="xref" href="sect_10.5.html#table_10.5.1-2" title="Table 10.5.1-2. Request Header Fields" shape="rect">Table 10.5.1-2</a>.</p>
               <div class="table">
                  <a id="table_10.5.1-2" shape="rect"></a>
                  <p class="title">
                     <strong>Table 10.5.1-2. Request Header Fields</strong>
                  </p>
                  <div class="table-contents">
                     <table frame="box" rules="all">
                        <thead>
                           <tr valign="top">
                              <th align="center" rowspan="2" colspan="1">
                                    <p>
                                    <a id="para_145a47fa-ef6c-488d-b131-cd1330a9c371" shape="rect"></a>Name</p>
                                </th>
                              <th align="center" rowspan="2" colspan="1">
                                    <p>
                                    <a id="para_4a891810-b5b0-4c05-907d-aca66d4beda7" shape="rect"></a>Values</p>
                                </th>
                              <th align="center" colspan="2" rowspan="1">
                                    <p>
                                    <a id="para_6eef9fe8-8306-4896-9149-fdaeebf7cf06" shape="rect"></a>Usage</p>
                                </th>
                              <th align="center" rowspan="2" colspan="1">
                                    <p>
                                    <a id="para_87e105c7-9e4e-4330-998c-e925b40196ec" shape="rect"></a>Description</p>
                                </th>
                           </tr>
                           <tr valign="top">
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_69de75fa-4f60-4b40-b1c5-dcfd83203307" shape="rect"></a>User Agent</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_4385a9f2-bd6f-40a1-9c1a-1a3895eb3a49" shape="rect"></a>Origin Server</p>
                                </td>
                           </tr>
                        </thead>
                        <tbody>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_6534e70d-685f-4a65-8f0f-d1822d430e87" shape="rect"></a>Content-Type</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_6a91cb5b-c19b-46e3-808a-3c8ffa88d08a" shape="rect"></a>media-type</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_de31e190-9733-44bc-b7bb-83c9afa6dc2b" shape="rect"></a>M</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_913dbfbf-4545-4594-a48b-a8bc89d3c76e" shape="rect"></a>M</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_da593fd8-24a8-405a-ae1a-06bac017fee9" shape="rect"></a>The DICOM Media Type of the request payload</p>
                                    <p>
                                    <a id="para_756d793f-401b-472a-ae96-c67f27a81fc5" shape="rect"></a>Shall be present if the request has a payload</p>
                                </td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_60d5b3c1-d2e3-4b8b-9211-1f21b339b2ff" shape="rect"></a>Content-Length</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_b249f942-ff37-42c4-93a6-e4ef8a2154ed" shape="rect"></a>uint</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_90fc3945-4ec4-4981-9bc0-7982d55de9e7" shape="rect"></a>C</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_b93a8e67-16e0-4bea-a4bc-4b6baa1ac500" shape="rect"></a>M</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_7dfe3fd1-ca29-4691-bfe3-dcb4983564c9" shape="rect"></a>Shall be present if a transfer encoding has not been applied to the payload</p>
                                </td>
                           </tr>
                           <tr valign="top">
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_1979a053-f929-47c2-aff9-9d092c673565" shape="rect"></a>Transfer-Encoding</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_251e46d5-0c8e-4bbc-8b9f-83e67020f1b6" shape="rect"></a>encoding</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_e9bb141e-1e58-43d8-82b0-6acd1c193190" shape="rect"></a>C</p>
                                </td>
                              <td align="center" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_1a0e333a-d972-4b76-91d4-d9d7f0a15ea0" shape="rect"></a>M</p>
                                </td>
                              <td align="left" rowspan="1" colspan="1">
                                    <p>
                                    <a id="para_11b76d81-9ac1-4a6b-a699-2108718086cb" shape="rect"></a>Shall be present if a transfer encoding has been applied to the payload</p>
                                </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
               </div>
               <br class="table-break" clear="none" />
               <p>
                  <a id="para_cd28d32a-fec0-48fe-a250-0b921a61ad3d" shape="rect"></a>See also <a class="xref" href="sect_8.4.html" title="8.4 Header Fields" shape="rect">Section 8.4</a>.</p>
            </div>
            <div class="section">
               <div class="titlepage">
                  <div>
                     <div>
                        <h4 class="title">
                           <a id="sect_10.5.1.4" shape="rect"></a>10.5.1.4 Request Payload</h4>
                     </div>
                  </div>
               </div>
               <p>
                  <a id="para_7e1f9a5a-c6e0-4d59-9ed7-abd28bb4935d" shape="rect"></a>The request payload shall be present and shall contain one or more representations consistent with the Content-Type header field. The representations shall conform to Media Types described in <a class="xref" href="sect_8.7.3.html" title="8.7.3 DICOM Media Type Sets" shape="rect">Section 8.7.3 DICOM Media Type Sets</a>. The payload shall conform to <a class="xref" href="sect_8.6.html" title="8.6 Payloads" shape="rect">Section 8.6 Payloads</a>.</p>
               <p>
                  <a id="para_70504e03-eda1-4718-93c0-6433bc81d44e" shape="rect"></a>The payload may contain representations of SOP Instances from more than one Study if the Study Instance UID is not specified in the Target URI.</p>
               <p>
                  <a id="para_88a7d875-f1a6-4269-b54d-56cfad25fbb9" shape="rect"></a>The request payload shall consist of either:</p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">
                        <p>
                           <a id="para_48fb847e-f6df-441b-bc78-318c2097a8db" shape="rect"></a>
                                <a href="../part10/PS3.10.html" class="olink" shape="rect">PS3.10</a> representations of SOP Instances, or</p>
                     </li>
                     <li class="listitem">
                        <p>
                           <a id="para_69d1f715-e3e8-4a6b-b226-f741043b62f6" shape="rect"></a>Metadata and Bulkdata representations of SOP Instances.</p>
                     </li>
                  </ul>
               </div>
               <p>
                  <a id="para_cc0edd5e-d3be-4de2-8e31-9fce38318d82" shape="rect"></a>
                        <a href="../part10/PS3.10.html" class="olink" shape="rect">PS3.10</a> representations of SOP instances shall be encoded with one representation per DICOM Instance.</p>
               <p>
                  <a id="para_83722061-3e3a-49ab-afc8-a2dcdcd9f68f" shape="rect"></a>Metadata and Bulkdata representations of SOP instances shall be encoded in the following manner (see <a class="xref" href="sect_8.6.html#figure_8.6-1" title="Figure 8.6-1. Mapping between IOD and HTTP message parts" shape="rect">Figure 8.6-1 Mapping between IOD and HTTP message parts</a>):</p>
               <div class="itemizedlist">
                  <ul class="itemizedlist" style="list-style-type: disc; ">
                     <li class="listitem">
                        <p>
                           <a id="para_561ebb02-36c9-4e95-98be-e5b6bdac2650" shape="rect"></a>XML representations of Metadata shall be encoded as described in the Native DICOM Model defined in <a href="../part19/PS3.19.html" class="olink" shape="rect">PS3.19</a> with one representation per XML object.</p>
                     </li>
                     <li class="listitem">
                        <p>
                           <a id="para_089b5bb9-2751-44af-93da-195062bb927a" shape="rect"></a>JSON representations of Metadata shall be encoded as an array of DICOM JSON Model Objects defined in <a class="xref" href="chapter_F.html" title="F DICOM JSON Model" shape="rect">Annex F</a> in a single representation.</p>
                     </li>
                     <li class="listitem">
                        <p>
                           <a id="para_e6d2abf0-47d4-47a5-926e-0cddf86bbf6f" shape="rect"></a>Representations of Metadata may omit Attributes of the Image Pixel Description Macro for referenced pixel data whose representation is encoded in one of the media types specified in <a class="xref" href="sect_10.5.2.html#table_10.5.2-1" title="Table 10.5.2-1. Media Type Transformation to Transfer Syntaxes" shape="rect">Table 10.5.2-1</a>.</p>
                     </li>
                     <li class="listitem">
                        <p>
                           <a id="para_3953ef0d-ee5a-4288-84ef-93fd6e269e01" shape="rect"></a>The Metadata shall include only the DICOM Dataset (without Bulkdata), and in particular shall not include any Group 0002 File Meta Information Data Elements. The origin server shall create appropriate File Meta Information depending on the media type of the supplied compressed pixel data, if it happens to internally store the Dataset in a <a href="../part10/PS3.10.html" class="olink" shape="rect">PS3.10</a> File.</p>
                     </li>
                     <li class="listitem">
                        <p>
                           <a id="para_6f507e25-a6d0-4d51-a292-21b3595e0731" shape="rect"></a>Uncompressed Bulkdata (including pixel data but with the exception of the Encapsulated Document (0042,0011) element) shall be encoded as application/octet-stream with one representation per Bulkdata item.</p>
                     </li>
                     <li class="listitem">
                        <p>
                           <a id="para_d88e3987-d817-4fcb-a483-229b666d399f" shape="rect"></a>Compressed pixel data for a Single Frame Image shall be encoded as one compressed Bulkdata representation.</p>
                     </li>
                     <li class="listitem">
                        <p>
                           <a id="para_bb4d1bea-ad4c-4522-821d-6cf750701f1f" shape="rect"></a>Compressed pixel data for a Multi-Frame Image shall be encoded as multiple Single Frame Image compressed Bulkdata representations.</p>
                     </li>
                     <li class="listitem">
                        <p>
                           <a id="para_8761a8a9-562f-4186-9493-8d2734606045" shape="rect"></a>Compressed pixel data for a Video shall be encoded as one compressed Bulkdata representation.</p>
                     </li>
                     <li class="listitem">
                        <p>
                           <a id="para_78761e12-3a46-42c1-aa87-8e84ab9b0f65" shape="rect"></a>The Encapsulated Document (0042,0011) Bulkdata element shall be encoded using the media-type from the MIME Type of the Encapsulated Document (0042,0012) Attribute with one representation per document.</p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr />
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left" rowspan="1" colspan="1">
                  <a accesskey="p" href="sect_10.4.5.html" shape="rect">Prev</a> </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="u" href="chapter_10.html" shape="rect">Up</a>
               </td>
               <td width="40%" align="right" rowspan="1" colspan="1"> <a accesskey="n" href="sect_10.5.2.html" shape="rect">Next</a>
               </td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top" rowspan="1" colspan="1">10.4.5 Conformance Statement </td>
               <td width="20%" align="center" rowspan="1" colspan="1">
                  <a accesskey="h" href="PS3.18.html" shape="rect">Home</a>
               </td>
               <td width="40%" align="right" valign="top" rowspan="1" colspan="1"> 10.5.2 Behavior</td>
            </tr>
         </table>
      </div>
      <table xmlns="" xmlns:d="http://docbook.org/ns/docbook" width="100%">
         <tr>
            <th colspan="1" align="center" rowspan="1">
               <span class="documentreleaseinformation">DICOM PS3.18 2024b - Web Services</span>
            </th>
         </tr>
      </table>
   </body>
</html>
